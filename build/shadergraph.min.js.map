{"version":3,"sources":["webpack://ShaderGraph/webpack/universalModuleDefinition","webpack://ShaderGraph/../glsl-parser/direct.js","webpack://ShaderGraph/../glsl-parser/lib/expr.js","webpack://ShaderGraph/../glsl-parser/lib/index.js","webpack://ShaderGraph/../glsl-parser/lib/scope.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/index.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/operators.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/string.js","webpack://ShaderGraph/./src/linker/priority.js","webpack://ShaderGraph/webpack/bootstrap","webpack://ShaderGraph/webpack/runtime/compat get default export","webpack://ShaderGraph/webpack/runtime/define property getters","webpack://ShaderGraph/webpack/runtime/hasOwnProperty shorthand","webpack://ShaderGraph/webpack/runtime/make namespace object","webpack://ShaderGraph/./src/graph/graph.js","webpack://ShaderGraph/./src/graph/outlet.js","webpack://ShaderGraph/./src/graph/node.js","webpack://ShaderGraph/./src/graph/index.js","webpack://ShaderGraph/./src/linker/snippet.js","webpack://ShaderGraph/./src/linker/assemble.js","webpack://ShaderGraph/./src/linker/program.js","webpack://ShaderGraph/./src/linker/link.js","webpack://ShaderGraph/./src/linker/layout.js","webpack://ShaderGraph/./src/linker/index.js","webpack://ShaderGraph/./src/block/block.js","webpack://ShaderGraph/./src/block/call.js","webpack://ShaderGraph/./src/block/callback.js","webpack://ShaderGraph/./src/block/isolate.js","webpack://ShaderGraph/./src/block/join.js","webpack://ShaderGraph/./src/visualize/serialize.js","webpack://ShaderGraph/./src/factory/hash.js","webpack://ShaderGraph/./src/visualize/markup.js","webpack://ShaderGraph/./src/visualize/index.js","webpack://ShaderGraph/./src/factory/factory.js","webpack://ShaderGraph/./src/factory/material.js","webpack://ShaderGraph/./src/factory/library.js","webpack://ShaderGraph/./src/factory/queue.js","webpack://ShaderGraph/./src/factory/cache.js","webpack://ShaderGraph/./src/glsl/compile.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector2.js","webpack://ShaderGraph/./node_modules/three/src/math/MathUtils.js","webpack://ShaderGraph/./node_modules/three/src/math/Quaternion.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector3.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector4.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix3.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix4.js","webpack://ShaderGraph/./src/glsl/decl.js","webpack://ShaderGraph/./src/glsl/constants.js","webpack://ShaderGraph/./src/glsl/parse.js","webpack://ShaderGraph/./src/glsl/generate.js","webpack://ShaderGraph/./src/index.js"],"names":["root","factory","exports","module","define","amd","self","parse","tokens","parser","i","length","state","token","idx","original_symbol","nud","this","children","fail","led","symbol_table","itself","symbol","id","binding_power","sym","lbp","Object","create","expression","rbp","left","t","advance","infix","bp","type","infixr","prefix","suffix","assignment","next","value","output","data","unexpected","scope","find","create_node","message","fake","push","incoming_state","incoming_tokens","result","parent","emit","node","unshift","len","shift","Error","stmtlist","n","STMTLIST","stmt","STMT","decllist","DECLLIST","precision","PRECISION","ident","IDENT","fn","KEYWORD_OR_IDENT","FUNCTION","fnargs","FUNCTIONARGS","forstmt","FORLOOP","ifstmt","IF","whilestmt","WHILELOOP","returnstmt","RETURN","dowhilestmt","DOWHILELOOP","quantifier","QUANTIFIER","parse_struct","parse_precision","parse_quantifier","parse_forloop","parse_if","parse_return","parse_whileloop","parse_dowhileloop","parse_function","parse_function_args","program","check","arguments","slice","call","complete","ended","nodes","whitespace","errored","special_shift","special_unshift","special_fake","Scope","mknode","reader","setup_stative_parsers","expecting","mode","end","write","input","preceding","concat","take","parse_stmt","parse_stmtlist","DECL","parse_decl","parse_decllist","EXPR","parse_expr","STRUCT","parse_ident","KEYWORD","parse_keyword","parse_keyword_or_ident","x","_node","add_child","ret","undefined","okay","test","stative","enter","Advance","exit","adhoc","brace","got_eof","BREAK","CONTINUE","DISCARD","decl","DECL_STATEMENT","lookup","expr","flags","keyword","PLACEHOLDER","position","is_storage","is_parameter","is_precision","struct","stage","collected_name","name","parenlevel","bracelevel","indexOf","full_parse_expr","err","parseexpr","token_map","_","allow_assign","allow_comma","default_value","str","line","assert","assert_null_string_or_array","y","join","step","steps","current","op","last","last_node","succeeding","advance_expr","until","advance_ident","declare","advance_stmtlist","maybe_stmtlist","skip","popstmt","COMMENT","PREPROCESSOR","preprocessor","stmt_type","sourcetoken","Math","random","toString","constructor","scopes","proto","prototype","s","pop","hasOwnProperty","opt","c","total","NORMAL","content","col","start","isnum","isoperator","allBuiltins","builtins100","allLiterals","literals100","version","builtins300es","literals300es","builtinsDict","literalsDict","chunk","replace","block_comment","line_comment","operator","integer","hex","decimal","TOKEN","readtoken","normal","map","column","determine_operator","is_composite_operator","buf","res","j","operators","contentstr","v100","filter","b","tokenize","generator","make","Array","nest","a","compare","min","asc","p","q","max","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","key","o","defineProperty","enumerable","get","obj","prop","r","Symbol","toStringTag","Graph","index","IN","OUT","add","inputs","from","outlet","outputs","ignore","graph","remove","disconnect","splice","adopt","initClass","Outlet","extra","meta","inout","hint","connect","_name","owner","outlets","all","setOutlets","getIn","getOut","_add","hash","match","_remove","existing","_morph","empty","force","dest","dests","source","hints","typeHint","list","sources","_key","morph","Snippet","language","code","sigs","compiler","compile","_signatures","_compiler","_original","namespace","main","entry","uniforms","externals","symbols","attributes","varyings","config","defines","def","v","exist","exceptions","global","local","globals","_u","globalUniforms","_v","globalVaryings","_a","globalAttributes","_e","u","e","redef","uniform","varying","external","attribute","body","defs","k","assemble","calls","requires","generate","library","handle","ns","sort","priority","include","isDangling","signature","record","lib","required","ext","copy","build","includes","lines","process","Program","exists","snippet","links","modules","exported","header","bodies","m","sorted","defuse","hoist","dedupe","Layout","visits","load","Block","delay","construct","makeOutlets","layout","_include","export","link","_program","_depth","_layout","_external","_outlet","string","props","depth","require","arg","__guard__","previous","callback","OutletError","_info","child","block","transform","Call","super","params","callbacks","_call","_inputs","visit","_link","_trace","Callback","refresh","subroutine","ins","outs","dupe","_require","_callback","Isolate","seen","done","set","Join","serialize","format","open","other","out","to","in","imul","al","bl","h","floor","charCodeAt","iterate","trim","hashColor","alpha","color","g","norm","round","cssColor","escapeText","el","_markup","update","_activate","codes","querySelectorAll","popup","parentNode","classList","addEventListener","_event","style","display","none","nodeMap","linkMap","recurse","_order","wrapper","document","createElement","columns","innerHTML","addOutlet","div","appendChild","querySelector","clear","sqr","path","x1","y1","x2","y2","dx","dy","sqrt","abs","mx","my","f","makeSVG","tag","createElementNS","element","ref","getBoundingClientRect","coords","right","top","bottom","svg","removeChild","box","offsetHeight","setAttribute","offsetWidth","overlay","contents","close","view","inside","wrap","markup","Node","innerText","merge","_visualize","resolve","vertex","fragment","_graph","args","visualize","inspect","apply","Factory","fetch","_concat","pipe","_import","_group","_next","pass","_stack","_state","sub","_exit","_tail","State","error","autoInspect","_auto","multi","_main","subgraph","_subgraph","bind","tail","_push","_pop","_append","_insert","Material","options","shader","vertexShader","vertexGraph","fragmentShader","fragmentGraph","snippets","used","inline","_used","queue","limit","head","count","item","prev","dead","cache","cached","expire","clone","signatures","placeholders","replaced","string_compiler","sig","re","RegExp","compiled","result1","Vector2","scalar","w","console","warn","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","ceil","atan2","PI","distanceToSquared","normalize","v1","v2","array","offset","getX","getY","center","angle","cos","sin","isVector2","_lut","clamp","Quaternion","z","_x","_y","_z","_w","qa","qb","qm","slerpQuaternions","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","z1","w1","dir","sqrSin","Number","EPSILON","tDir","_onChangeCallback","quaternion","euler","isEuler","order","c1","c2","c3","s1","s2","s3","axis","halfAngle","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","vFrom","vTo","dot","acos","angleTo","slerp","conjugate","l","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","getZ","getW","isQuaternion","Vector3","multiplyVectors","applyQuaternion","_quaternion","setFromEuler","setFromAxisAngle","applyMatrix3","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector","projectOnVector","theta","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","sx","setFromMatrixColumn","sy","sz","fromArray","isVector3","Vector4","epsilon","epsilon2","xx","yy","zz","xy","xz","yz","isVector4","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","tx","ty","rotation","cx","cy","matrix","isMatrix3","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","target","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","scale","z2","wx","wy","wz","determinant","_m1","invSX","invSY","invSZ","setFromRotationMatrix","near","far","isMatrix4","function","storage","quant","func","argument","param","spec","long","split","threejs","window","THREE","defaults","int","float","vec2","vec3","vec4","mat2","mat3","mat4","sampler2D","samplerCube","three","dirs","const","Definition","isIn","shadowed","SHADOW_ARG","RETURN_ARG","ast","parseGLSL","processAST","tock","errors","fmt","walk","mapSymbols","collect","internals","sortSymbols","extractSignatures","maybe","found","internal","defn","shadow","indent","log","now","Date","label","delta","unshadow","real","statements","return","vars","post","chain","invoke","same","A","B","dangling","omit","isReturn","returnVar","_lookup","_dangling","inner","outer","strip","_m","blocks","level","rest","qual","_struct","ShaderGraph","_config","GLSL","Linker","Visualize"],"mappings":"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AmN,EAAQzK,KAAKsK,GACb3B,EAAO2B,EACAhN,EAAI,IAlXf,IAAI2N,EAAc,EAAQ,KACtBwB,EAAY,EAAQ,KACpB1B,EAAc,EAAQ,KACtBK,EAAgB,EAAQ,KACxBD,EAAgB,EAAQ,KAExBX,EAAS,IACTuB,EAAQ,KAcRG,EAAM,CACN,gBACA,eACA,eACA,WACA,UACA,QACA,QACA,UACA,UACA,aACA,MACA,Y,cClCJ,IAAIS,EAAO,EAAQ,KAInBA,EAAOA,EAAKvJ,QAAQwJ,QAAO,SAAUC,GACnC,OAAQ,kBAAkBjH,KAAKiH,MAGjC9P,EAAOD,QAAU6P,EAAKnI,OAAO,CAEzB,cACA,gBACA,cACA,eACA,eACA,iBACA,eACA,gBACA,sBACA,6BACA,4BACA,6BACA,gCACA,kCACA,0BACA,+BACA,oBACA,2BACA,2BACA,0BACA,gBAGA,QACA,QACA,YACA,QACA,QACA,iBACA,kBACA,iBACA,kBACA,gBACA,kBACA,gBACA,kBACA,eACA,iBACA,eACA,YACA,cACA,UACA,UACA,cACA,cACA,aACA,gBACA,aACA,mBACA,oBACA,mBACA,iBACA,uBACA,cACA,oBACA,kBACA,2B,QCnEJzH,EAAOD,QAAU,CAEf,MACE,OACA,MACA,MACA,OACA,OACA,OACA,QACA,MACA,QACA,OACA,OACA,UACA,WACA,MACA,QACA,MACA,OACA,cACA,QACA,QACA,eACA,2BACA,sBACA,kBACA,wBACA,eACA,gBACA,WACA,gBACA,0BACA,eACA,eACA,eACA,eACA,SACA,cACA,kBACA,mBACA,eACA,eACA,cACA,eACA,kBACA,gBACA,iBACA,4BACA,uBACA,mBACA,yBACA,gBACA,0BACA,wBACA,mBACA,iBACA,2BACA,wBACA,mBACA,kCACA,oBACA,kCACA,eACA,sBACA,0BACA,qBACA,sBACA,sBACA,gCACA,gCACA,qBACA,4BACA,qCACA,8BACA,+BACA,sCACA,+CACA,wCACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,YACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,WACA,gBACA,qBACA,eACA,cACA,sBACA,6BACA,sCACA,+BACA,oBACA,cACA,qBACA,mBACA,0BACA,mCACA,4BACA,YACA,cACA,mBACA,cACA,SACA,WACA,gBACA,MACA,OACA,iBACA,MACA,MACA,MACA,MACA,YACA,MACA,WACA,MACA,UACA,UACA,UACA,OACA,MACA,aACA,OACA,OACA,MACA,YACA,eACA,gBACA,mBACA,cACA,iBACA,kBACA,sBACA,oBACA,mBACA,uBACA,uB,cCpJJ,IAAI6P,EAAO,EAAQ,KAEnB5P,EAAOD,QAAU6P,EAAKvJ,QAAQoB,OAAO,CAClC,SACC,WACA,SACA,OACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACA,QACA,QACA,oBACA,iBACA,uBACA,aACA,aACA,eACA,kBACA,aACA,aACA,eACA,kBACA,WACA,WACA,WACA,YACA,WACA,cACA,gBACA,QACA,SACA,aACA,SACA,YACA,SACA,SACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,aACA,WACA,WACA,WACA,aACA,eACA,eACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,qBACA,qBACA,cACA,eACA,eACA,iBACA,uBACA,aACA,kBACA,aACA,kBACA,iBACA,iBACA,gBACA,iBACA,iBACA,cACA,eACA,eACA,mBACA,oBACA,uB,QCrFJzH,EAAOD,QAAU,CAEb,YACA,QACA,UACA,OACA,YACA,QACA,UACA,UACA,QACA,WACA,KACA,MACA,QACA,KACA,OACA,KACA,MACA,QACA,QACA,MACA,OACA,OACA,OACA,OACA,QACA,UACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,cACA,kBACA,kBACA,SAGA,MACA,QACA,QACA,OACA,UACA,WACA,OACA,SACA,OACA,SACA,UACA,SACA,WACA,WACA,SACA,SACA,SACA,WACA,YACA,OACA,QACA,SACA,OACA,QACA,WACA,QACA,SA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","file":"shadergraph.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ShaderGraph\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ShaderGraph\"] = factory();\n\telse\n\t\troot[\"ShaderGraph\"] = factory();\n})(self, function() {\nreturn ","var parse = require(\"./lib/index\");\n\nmodule.exports = parseArray;\n\nfunction parseArray(tokens) {\n  var parser = parse();\n\n  for (var i = 0; i < tokens.length; i++) {\n    parser(tokens[i]);\n  }\n\n  return parser(null);\n}\n","let state, token, tokens, idx;\n\nconst original_symbol = {\n  nud: function () {\n    return this.children && this.children.length ? this : fail(\"unexpected\")();\n  },\n  led: fail(\"missing operator\"),\n};\n\nconst symbol_table = {};\n\nfunction itself() {\n  return this;\n}\n\nsymbol(\"(ident)\").nud = itself;\nsymbol(\"(keyword)\").nud = itself;\nsymbol(\"(builtin)\").nud = itself;\nsymbol(\"(literal)\").nud = itself;\nsymbol(\"(end)\");\n\nsymbol(\":\");\nsymbol(\";\");\nsymbol(\",\");\nsymbol(\")\");\nsymbol(\"]\");\nsymbol(\"}\");\n\ninfixr(\"&&\", 30);\ninfixr(\"||\", 30);\ninfix(\"|\", 43);\ninfix(\"^\", 44);\ninfix(\"&\", 45);\ninfix(\"==\", 46);\ninfix(\"!=\", 46);\ninfix(\"<\", 47);\ninfix(\"<=\", 47);\ninfix(\">\", 47);\ninfix(\">=\", 47);\ninfix(\">>\", 48);\ninfix(\"<<\", 48);\ninfix(\"+\", 50);\ninfix(\"-\", 50);\ninfix(\"*\", 60);\ninfix(\"/\", 60);\ninfix(\"%\", 60);\ninfix(\"?\", 20, function (left) {\n  this.children = [left, expression(0), (advance(\":\"), expression(0))];\n  this.type = \"ternary\";\n  return this;\n});\ninfix(\".\", 80, function (left) {\n  token.type = \"literal\";\n  state.fake(token);\n  this.children = [left, token];\n  advance();\n  return this;\n});\ninfix(\"[\", 80, function (left) {\n  this.children = [left, expression(0)];\n  this.type = \"binary\";\n  advance(\"]\");\n  return this;\n});\ninfix(\"(\", 80, function (left) {\n  this.children = [left];\n  this.type = \"call\";\n\n  if (token.data !== \")\")\n    while (1) {\n      this.children.push(expression(0));\n      if (token.data !== \",\") break;\n      advance(\",\");\n    }\n  advance(\")\");\n  return this;\n});\n\nprefix(\"-\");\nprefix(\"+\");\nprefix(\"!\");\nprefix(\"~\");\nprefix(\"defined\");\nprefix(\"(\", function () {\n  this.type = \"group\";\n  this.children = [expression(0)];\n  advance(\")\");\n  return this;\n});\nprefix(\"++\");\nprefix(\"--\");\nsuffix(\"++\");\nsuffix(\"--\");\n\nassignment(\"=\");\nassignment(\"+=\");\nassignment(\"-=\");\nassignment(\"*=\");\nassignment(\"/=\");\nassignment(\"%=\");\nassignment(\"&=\");\nassignment(\"|=\");\nassignment(\"^=\");\nassignment(\">>=\");\nassignment(\"<<=\");\n\nmodule.exports = function (incoming_state, incoming_tokens) {\n  state = incoming_state;\n  tokens = incoming_tokens;\n  idx = 0;\n  let result;\n\n  if (!tokens.length) return;\n\n  advance();\n  result = expression(0);\n  result.parent = state[0];\n  emit(result);\n\n  if (idx < tokens.length) {\n    throw new Error(\"did not use all tokens\");\n  }\n\n  result.parent.children = [result];\n\n  function emit(node) {\n    state.unshift(node, false);\n    for (let i = 0, len = node.children.length; i < len; ++i) {\n      emit(node.children[i]);\n    }\n    state.shift();\n  }\n};\n\nfunction symbol(id, binding_power) {\n  let sym = symbol_table[id];\n  binding_power = binding_power || 0;\n  if (sym) {\n    if (binding_power > sym.lbp) {\n      sym.lbp = binding_power;\n    }\n  } else {\n    sym = Object.create(original_symbol);\n    sym.id = id;\n    sym.lbp = binding_power;\n    symbol_table[id] = sym;\n  }\n  return sym;\n}\n\nfunction expression(rbp) {\n  let left,\n    t = token;\n  advance();\n\n  left = t.nud();\n  while (rbp < token.lbp) {\n    t = token;\n    advance();\n    left = t.led(left);\n  }\n  return left;\n}\n\nfunction infix(id, bp, led) {\n  const sym = symbol(id, bp);\n  sym.led =\n    led ||\n    function (left) {\n      this.children = [left, expression(bp)];\n      this.type = \"binary\";\n      return this;\n    };\n}\n\nfunction infixr(id, bp, led) {\n  const sym = symbol(id, bp);\n  sym.led =\n    led ||\n    function (left) {\n      this.children = [left, expression(bp - 1)];\n      this.type = \"binary\";\n      return this;\n    };\n  return sym;\n}\n\nfunction prefix(id, nud) {\n  const sym = symbol(id);\n  sym.nud =\n    nud ||\n    function () {\n      this.children = [expression(70)];\n      this.type = \"unary\";\n      return this;\n    };\n  return sym;\n}\n\nfunction suffix(id) {\n  const sym = symbol(id, 150);\n  sym.led = function (left) {\n    this.children = [left];\n    this.type = \"suffix\";\n    return this;\n  };\n}\n\nfunction assignment(id) {\n  return infixr(id, 10, function (left) {\n    this.children = [left, expression(9)];\n    this.assignment = true;\n    this.type = \"assign\";\n    return this;\n  });\n}\n\nfunction advance(id) {\n  let next, value, type, output;\n\n  if (id && token.data !== id) {\n    return state.unexpected(\"expected `\" + id + \"`, got `\" + token.data + \"`\");\n  }\n\n  if (idx >= tokens.length) {\n    token = symbol_table[\"(end)\"];\n    return;\n  }\n\n  next = tokens[idx++];\n  value = next.data;\n  type = next.type;\n\n  if (type === \"ident\") {\n    output = state.scope.find(value) || state.create_node();\n    type = output.type;\n  } else if (type === \"builtin\") {\n    output = symbol_table[\"(builtin)\"];\n  } else if (type === \"keyword\") {\n    output = symbol_table[\"(keyword)\"];\n  } else if (type === \"operator\") {\n    output = symbol_table[value];\n    if (!output) {\n      return state.unexpected(\"unknown operator `\" + value + \"`\");\n    }\n  } else if (type === \"float\" || type === \"integer\") {\n    type = \"literal\";\n    output = symbol_table[\"(literal)\"];\n  } else {\n    return state.unexpected(\"unexpected token.\");\n  }\n\n  if (output) {\n    if (!output.nud) {\n      output.nud = itself;\n    }\n    if (!output.children) {\n      output.children = [];\n    }\n  }\n\n  output = Object.create(output);\n  output.token = next;\n  output.type = type;\n  if (!output.data) output.data = value;\n\n  return (token = output);\n}\n\nfunction fail(message) {\n  return function () {\n    return state.unexpected(message);\n  };\n}\n","module.exports = parser;\n\nconst full_parse_expr = require(\"./expr\"),\n  Scope = require(\"./scope\");\n\n// singleton!\nconst Advance = new Object();\n\nconst DEBUG = false;\n\nlet _ = 0,\n  IDENT = _++,\n  STMT = _++,\n  STMTLIST = _++,\n  STRUCT = _++,\n  FUNCTION = _++,\n  FUNCTIONARGS = _++,\n  DECL = _++,\n  DECLLIST = _++,\n  FORLOOP = _++,\n  WHILELOOP = _++,\n  IF = _++,\n  EXPR = _++,\n  PRECISION = _++,\n  COMMENT = _++,\n  PREPROCESSOR = _++,\n  KEYWORD = _++,\n  KEYWORD_OR_IDENT = _++,\n  RETURN = _++,\n  BREAK = _++,\n  CONTINUE = _++,\n  DISCARD = _++,\n  DOWHILELOOP = _++,\n  PLACEHOLDER = _++,\n  QUANTIFIER = _++;\n\nconst DECL_ALLOW_ASSIGN = 0x1,\n  DECL_ALLOW_COMMA = 0x2,\n  DECL_REQUIRE_NAME = 0x4,\n  DECL_ALLOW_INVARIANT = 0x8,\n  DECL_ALLOW_STORAGE = 0x10,\n  DECL_NO_INOUT = 0x20,\n  DECL_ALLOW_STRUCT = 0x40,\n  DECL_STATEMENT = 0xff,\n  DECL_FUNCTION =\n    DECL_STATEMENT &\n    ~(\n      DECL_ALLOW_ASSIGN |\n      DECL_ALLOW_COMMA |\n      DECL_NO_INOUT |\n      DECL_ALLOW_INVARIANT |\n      DECL_REQUIRE_NAME\n    ),\n  DECL_STRUCT =\n    DECL_STATEMENT &\n    ~(\n      DECL_ALLOW_ASSIGN |\n      DECL_ALLOW_INVARIANT |\n      DECL_ALLOW_STORAGE |\n      DECL_ALLOW_STRUCT\n    );\n\nconst QUALIFIERS = [\"const\", \"attribute\", \"uniform\", \"varying\"];\n\nconst NO_ASSIGN_ALLOWED = false,\n  NO_COMMA_ALLOWED = false;\n\n// map of tokens to stmt types\nconst token_map = {\n  \"block-comment\": COMMENT,\n  \"line-comment\": COMMENT,\n  preprocessor: PREPROCESSOR,\n};\n\n// map of stmt types to human\nconst stmt_type = (_ = [\n  \"ident\",\n  \"stmt\",\n  \"stmtlist\",\n  \"struct\",\n  \"function\",\n  \"functionargs\",\n  \"decl\",\n  \"decllist\",\n  \"forloop\",\n  \"whileloop\",\n  \"if\",\n  \"expr\",\n  \"precision\",\n  \"comment\",\n  \"preprocessor\",\n  \"keyword\",\n  \"keyword_or_ident\",\n  \"return\",\n  \"break\",\n  \"continue\",\n  \"discard\",\n  \"do-while\",\n  \"placeholder\",\n  \"quantifier\",\n]);\n\nfunction parser() {\n  const stmtlist = n(STMTLIST),\n    stmt = n(STMT),\n    decllist = n(DECLLIST),\n    precision = n(PRECISION),\n    ident = n(IDENT),\n    keyword_or_ident = n(KEYWORD_OR_IDENT),\n    fn = n(FUNCTION),\n    fnargs = n(FUNCTIONARGS),\n    forstmt = n(FORLOOP),\n    ifstmt = n(IF),\n    whilestmt = n(WHILELOOP),\n    returnstmt = n(RETURN),\n    dowhilestmt = n(DOWHILELOOP),\n    quantifier = n(QUANTIFIER);\n\n  let parse_struct,\n    parse_precision,\n    parse_quantifier,\n    parse_forloop,\n    parse_if,\n    parse_return,\n    parse_whileloop,\n    parse_dowhileloop,\n    parse_function,\n    parse_function_args;\n\n  let check = arguments.length ? [].slice.call(arguments) : [],\n    complete = false,\n    ended = false,\n    depth = 0,\n    state = [],\n    nodes = [],\n    tokens = [],\n    whitespace = [],\n    errored = false,\n    program,\n    token,\n    node;\n\n  // setup state\n  state.shift = special_shift;\n  state.unshift = special_unshift;\n  state.fake = special_fake;\n  state.unexpected = unexpected;\n  state.scope = new Scope(state);\n  state.create_node = function () {\n    const n = mknode(IDENT, token);\n    n.parent = reader.program;\n    return n;\n  };\n\n  setup_stative_parsers();\n\n  // setup root node\n  node = stmtlist();\n  node.expecting = \"(eof)\";\n  node.mode = STMTLIST;\n  node.token = { type: \"(program)\", data: \"(program)\" };\n  program = node;\n\n  reader.program = program;\n  reader.scope = function (scope) {\n    if (arguments.length === 1) {\n      state.scope = scope;\n    }\n    return state.scope;\n  };\n\n  state.unshift(node);\n  return reader;\n\n  function reader(data) {\n    if (data === null) {\n      return end(), program;\n    }\n\n    nodes = [];\n    write(data);\n    return nodes;\n  }\n\n  // stream functions ---------------------------------------------\n\n  function write(input) {\n    if (\n      input.type === \"whitespace\" ||\n      input.type === \"line-comment\" ||\n      input.type === \"block-comment\"\n    ) {\n      whitespace.push(input);\n      return;\n    }\n    tokens.push(input);\n    token = token || tokens[0];\n\n    if (token && whitespace.length) {\n      token.preceding = token.preceding || [];\n      token.preceding = token.preceding.concat(whitespace);\n      whitespace = [];\n    }\n\n    while (take())\n      switch (state[0].mode) {\n        case STMT:\n          parse_stmt();\n          break;\n        case STMTLIST:\n          parse_stmtlist();\n          break;\n        case DECL:\n          parse_decl();\n          break;\n        case DECLLIST:\n          parse_decllist();\n          break;\n        case EXPR:\n          parse_expr();\n          break;\n        case STRUCT:\n          parse_struct(true, true);\n          break;\n        case PRECISION:\n          parse_precision();\n          break;\n        case IDENT:\n          parse_ident();\n          break;\n        case KEYWORD:\n          parse_keyword();\n          break;\n        case KEYWORD_OR_IDENT:\n          parse_keyword_or_ident();\n          break;\n        case FUNCTION:\n          parse_function();\n          break;\n        case FUNCTIONARGS:\n          parse_function_args();\n          break;\n        case FORLOOP:\n          parse_forloop();\n          break;\n        case WHILELOOP:\n          parse_whileloop();\n          break;\n        case DOWHILELOOP:\n          parse_dowhileloop();\n          break;\n        case RETURN:\n          parse_return();\n          break;\n        case IF:\n          parse_if();\n          break;\n        case QUANTIFIER:\n          parse_quantifier();\n          break;\n      }\n  }\n\n  function end(tokens) {\n    if (arguments.length) {\n      write(tokens);\n    }\n\n    if (state.length > 1) {\n      unexpected(\"unexpected EOF\");\n      return;\n    }\n\n    complete = true;\n  }\n\n  function take() {\n    if (errored || !state.length) return false;\n\n    return (token = tokens[0]);\n  }\n\n  // ----- state manipulation --------\n\n  function special_fake(x) {\n    state.unshift(x);\n    state.shift();\n  }\n\n  function special_unshift(_node, add_child) {\n    _node.parent = state[0];\n\n    const ret = [].unshift.call(this, _node);\n\n    add_child = add_child === undefined ? true : add_child;\n\n    if (DEBUG) {\n      let pad = \"\";\n      for (let i = 0, len = this.length - 1; i < len; ++i) {\n        pad += \" |\";\n      }\n      console.log(pad, \"\\\\\" + _node.type, _node.token.data);\n    }\n\n    if (add_child && node !== _node) node.children.push(_node);\n    node = _node;\n\n    return ret;\n  }\n\n  function special_shift() {\n    let _node = [].shift.call(this),\n      okay = check[this.length],\n      emit = false;\n\n    if (DEBUG) {\n      let pad = \"\";\n      for (let i = 0, len = this.length; i < len; ++i) {\n        pad += \" |\";\n      }\n      console.log(pad, \"/\" + _node.type);\n    }\n\n    if (check.length) {\n      if (typeof check[0] === \"function\") {\n        emit = check[0](_node);\n      } else if (okay !== undefined) {\n        emit = okay.test ? okay.test(_node.type) : okay === _node.type;\n      }\n    } else {\n      emit = true;\n    }\n\n    if (emit && !errored) nodes.push(_node);\n\n    node = _node.parent;\n    return _node;\n  }\n\n  // parse states ---------------\n\n  function parse_stmtlist() {\n    // determine the type of the statement\n    // and then start parsing\n    return stative(function () {\n      state.scope.enter();\n      return Advance;\n    }, normal_mode)();\n\n    function normal_mode() {\n      if (token.data === state[0].expecting) {\n        return state.scope.exit(), state.shift();\n      }\n      switch (token.type) {\n        case \"preprocessor\":\n          state.fake(adhoc());\n          tokens.shift();\n          return;\n        default:\n          state.unshift(stmt());\n          return;\n      }\n    }\n  }\n\n  function parse_stmt() {\n    if (state[0].brace) {\n      if (token.data !== \"}\") {\n        return unexpected(\"expected `}`, got \" + token.data);\n      }\n      state[0].brace = false;\n      return tokens.shift(), state.shift();\n    }\n    switch (token.type) {\n      case \"eof\":\n        return got_eof();\n      case \"keyword\":\n        switch (token.data) {\n          case \"for\":\n            return state.unshift(forstmt());\n          case \"if\":\n            return state.unshift(ifstmt());\n          case \"while\":\n            return state.unshift(whilestmt());\n          case \"do\":\n            return state.unshift(dowhilestmt());\n          case \"break\":\n            return state.fake(mknode(BREAK, token)), tokens.shift();\n          case \"continue\":\n            return state.fake(mknode(CONTINUE, token)), tokens.shift();\n          case \"discard\":\n            return state.fake(mknode(DISCARD, token)), tokens.shift();\n          case \"return\":\n            return state.unshift(returnstmt());\n          case \"precision\":\n            return state.unshift(precision());\n        }\n        return state.unshift(decl(DECL_STATEMENT));\n      case \"ident\":\n        var lookup;\n        if ((lookup = state.scope.find(token.data))) {\n          if (lookup.parent.type === \"struct\") {\n            // this is strictly untrue, you could have an\n            // expr that starts with a struct constructor.\n            //      ... sigh\n            return state.unshift(decl(DECL_STATEMENT));\n          }\n          return state.unshift(expr(\";\"));\n        }\n      case \"operator\":\n        if (token.data === \"{\") {\n          state[0].brace = true;\n          const n = stmtlist();\n          n.expecting = \"}\";\n          return tokens.shift(), state.unshift(n);\n        }\n        if (token.data === \";\") {\n          return tokens.shift(), state.shift();\n        }\n      default:\n        return state.unshift(expr(\";\"));\n    }\n  }\n\n  function got_eof() {\n    if (ended) errored = true;\n    ended = true;\n    return state.shift();\n  }\n\n  function parse_decl() {\n    const stmt = state[0];\n\n    return stative(\n      invariant_or_not,\n      storage_or_not,\n      parameter_or_not,\n      precision_or_not,\n      struct_or_type,\n      maybe_name,\n      maybe_lparen, // lparen means we're a function\n      is_decllist,\n      done\n    )();\n\n    function invariant_or_not() {\n      if (token.data === \"invariant\") {\n        if (stmt.flags & DECL_ALLOW_INVARIANT) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"`invariant` is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function storage_or_not() {\n      if (is_storage(token)) {\n        if (stmt.flags & DECL_ALLOW_STORAGE) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"storage is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function parameter_or_not() {\n      if (is_parameter(token)) {\n        if (!(stmt.flags & DECL_NO_INOUT)) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"parameter is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function precision_or_not() {\n      if (is_precision(token)) {\n        state.unshift(keyword());\n        return Advance;\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function struct_or_type() {\n      if (token.data === \"struct\") {\n        if (!(stmt.flags & DECL_ALLOW_STRUCT)) {\n          return unexpected(\"cannot nest structs\");\n        }\n        state.unshift(struct());\n        return Advance;\n      }\n\n      if (token.type === \"keyword\") {\n        state.unshift(keyword());\n        return Advance;\n      }\n\n      const lookup = state.scope.find(token.data);\n\n      if (lookup) {\n        state.fake(Object.create(lookup));\n        tokens.shift();\n        return Advance;\n      }\n      return unexpected(\n        \"expected user defined type, struct or keyword, got \" + token.data\n      );\n    }\n\n    function maybe_name() {\n      if (token.data === \",\" && !(stmt.flags & DECL_ALLOW_COMMA)) {\n        return state.shift();\n      }\n\n      if (token.data === \"[\") {\n        // oh lord.\n        state.unshift(quantifier());\n        return;\n      }\n\n      if (token.data === \")\") return state.shift();\n\n      if (token.data === \";\") {\n        return stmt.stage + 3;\n      }\n\n      if (token.type !== \"ident\" && token.type !== \"builtin\") {\n        return unexpected(\"expected identifier, got \" + token.data);\n      }\n\n      stmt.collected_name = tokens.shift();\n      return Advance;\n    }\n\n    function maybe_lparen() {\n      if (token.data === \"(\") {\n        tokens.unshift(stmt.collected_name);\n        delete stmt.collected_name;\n        state.unshift(fn());\n        return stmt.stage + 2;\n      }\n      return Advance;\n    }\n\n    function is_decllist() {\n      tokens.unshift(stmt.collected_name);\n      delete stmt.collected_name;\n      state.unshift(decllist());\n      return Advance;\n    }\n\n    function done() {\n      return state.shift();\n    }\n  }\n\n  function parse_decllist() {\n    // grab ident\n\n    if (token.type === \"ident\" || token.type === \"builtin\") {\n      const name = token.data;\n      state.unshift(ident());\n      state.scope.define(name);\n      return;\n    }\n\n    if (token.type === \"operator\") {\n      if (token.data === \",\") {\n        // multi-decl!\n        if (!(state[1].flags & DECL_ALLOW_COMMA)) {\n          return state.shift();\n        }\n\n        return tokens.shift();\n      } else if (token.data === \"=\") {\n        if (!(state[1].flags & DECL_ALLOW_ASSIGN))\n          return unexpected(\"`=` is not allowed here.\");\n\n        tokens.shift();\n\n        state.unshift(expr(\",\", \";\"));\n        return;\n      } else if (token.data === \"[\") {\n        state.unshift(quantifier());\n        return;\n      }\n    }\n    return state.shift();\n  }\n\n  function parse_keyword_or_ident() {\n    if (token.type === \"keyword\") {\n      state[0].type = \"keyword\";\n      state[0].mode = KEYWORD;\n      return;\n    }\n\n    if (token.type === \"ident\") {\n      state[0].type = \"ident\";\n      state[0].mode = IDENT;\n      return;\n    }\n\n    return unexpected(\n      \"expected keyword or user-defined name, got \" + token.data\n    );\n  }\n\n  function parse_keyword() {\n    if (token.type !== \"keyword\") {\n      return unexpected(\"expected keyword, got \" + token.data);\n    }\n\n    return state.shift(), tokens.shift();\n  }\n\n  function parse_ident() {\n    if (token.type !== \"ident\" && token.type !== \"builtin\") {\n      return unexpected(\"expected user-defined name, got \" + token.data);\n    }\n\n    state[0].data = token.data;\n    return state.shift(), tokens.shift();\n  }\n\n  function parse_expr() {\n    const expecting = state[0].expecting;\n\n    state[0].tokens = state[0].tokens || [];\n\n    if (state[0].parenlevel === undefined) {\n      state[0].parenlevel = 0;\n      state[0].bracelevel = 0;\n    }\n    if (state[0].parenlevel < 1 && expecting.indexOf(token.data) > -1) {\n      return parseexpr(state[0].tokens);\n    }\n    if (token.data === \"(\") {\n      ++state[0].parenlevel;\n    } else if (token.data === \")\") {\n      --state[0].parenlevel;\n    }\n\n    switch (token.data) {\n      case \"{\":\n        ++state[0].bracelevel;\n        break;\n      case \"}\":\n        --state[0].bracelevel;\n        break;\n      case \"(\":\n        ++state[0].parenlevel;\n        break;\n      case \")\":\n        --state[0].parenlevel;\n        break;\n    }\n\n    if (state[0].parenlevel < 0) return unexpected(\"unexpected `)`\");\n    if (state[0].bracelevel < 0) return unexpected(\"unexpected `}`\");\n\n    state[0].tokens.push(tokens.shift());\n    return;\n\n    function parseexpr(tokens) {\n      try {\n        full_parse_expr(state, tokens);\n      } catch (err) {\n        errored = true;\n        throw err;\n      }\n\n      return state.shift();\n    }\n  }\n\n  // node types ---------------\n\n  function n(type) {\n    // this is a function factory that suffices for most kinds of expressions and statements\n    return function () {\n      return mknode(type, token);\n    };\n  }\n\n  function adhoc() {\n    return mknode(token_map[token.type], token, node);\n  }\n\n  function decl(flags) {\n    const _ = mknode(DECL, token, node);\n    _.flags = flags;\n\n    return _;\n  }\n\n  function struct(allow_assign, allow_comma) {\n    const _ = mknode(STRUCT, token, node);\n    _.allow_assign = allow_assign === undefined ? true : allow_assign;\n    _.allow_comma = allow_comma === undefined ? true : allow_comma;\n    return _;\n  }\n\n  function expr() {\n    const n = mknode(EXPR, token, node);\n\n    n.expecting = [].slice.call(arguments);\n    return n;\n  }\n\n  function keyword(default_value) {\n    let t = token;\n    if (default_value) {\n      t = { type: \"(implied)\", data: \"(default)\", position: t.position };\n    }\n    return mknode(KEYWORD, t, node);\n  }\n\n  // utils ----------------------------\n\n  function unexpected(str) {\n    errored = true;\n    throw new Error(\n      (str || \"unexpected \" + state) + \" at line \" + state[0].token.line\n    );\n  }\n\n  function assert(type, data) {\n    return (\n      1,\n      assert_null_string_or_array(type, token.type) &&\n        assert_null_string_or_array(data, token.data)\n    );\n  }\n\n  function assert_null_string_or_array(x, y) {\n    switch (typeof x) {\n      case \"string\":\n        if (y !== x) {\n          unexpected(\"expected `\" + x + \"`, got \" + y + \"\\n\" + token.data);\n        }\n        return !errored;\n\n      case \"object\":\n        if (x && x.indexOf(y) === -1) {\n          unexpected(\"expected one of `\" + x.join(\"`, `\") + \"`, got \" + y);\n        }\n        return !errored;\n    }\n    return true;\n  }\n\n  // stative ----------------------------\n\n  function stative() {\n    let steps = [].slice.call(arguments),\n      step,\n      result;\n\n    return function () {\n      const current = state[0];\n\n      current.stage || (current.stage = 0);\n\n      step = steps[current.stage];\n      if (!step) return unexpected(\"parser in undefined state!\");\n\n      result = step();\n\n      if (result === Advance) return ++current.stage;\n      if (result === undefined) return;\n      current.stage = result;\n    };\n  }\n\n  function advance(op, t) {\n    t = t || \"operator\";\n    return function () {\n      if (!assert(t, op)) return;\n\n      const last = tokens.shift(),\n        children = state[0].children,\n        last_node = children[children.length - 1];\n\n      if (last_node && last_node.token && last.preceding) {\n        last_node.token.succeeding = last_node.token.succeeding || [];\n        last_node.token.succeeding = last_node.token.succeeding.concat(\n          last.preceding\n        );\n      }\n      return Advance;\n    };\n  }\n\n  function advance_expr(until) {\n    return function () {\n      state.unshift(expr(until));\n      return Advance;\n    };\n  }\n\n  function advance_ident(declare) {\n    return declare\n      ? function () {\n          const name = token.data;\n          return (\n            assert(\"ident\") &&\n            (state.unshift(ident()), state.scope.define(name), Advance)\n          );\n        }\n      : function () {\n          if (!assert(\"ident\")) return;\n\n          const s = Object.create(state.scope.find(token.data));\n          s.token = token;\n\n          return tokens.shift(), Advance;\n        };\n  }\n\n  function advance_stmtlist() {\n    return function () {\n      const n = stmtlist();\n      n.expecting = \"}\";\n      return state.unshift(n), Advance;\n    };\n  }\n\n  function maybe_stmtlist(skip) {\n    return function () {\n      const current = state[0].stage;\n      if (token.data !== \"{\") {\n        return state.unshift(stmt()), current + skip;\n      }\n      return tokens.shift(), Advance;\n    };\n  }\n\n  function popstmt() {\n    return function () {\n      return state.shift(), state.shift();\n    };\n  }\n\n  function setup_stative_parsers() {\n    // could also be\n    // struct { } decllist\n    parse_struct = stative(\n      advance(\"struct\", \"keyword\"),\n      function () {\n        if (token.data === \"{\") {\n          state.fake(\n            mknode(IDENT, { data: \"\", position: token.position, type: \"ident\" })\n          );\n          return Advance;\n        }\n\n        return advance_ident(true)();\n      },\n      function () {\n        state.scope.enter();\n        return Advance;\n      },\n      advance(\"{\"),\n      function () {\n        if (token.type === \"preprocessor\") {\n          state.fake(adhoc());\n          tokens.shift();\n          return;\n        }\n        if (token.data === \"}\") {\n          state.scope.exit();\n          tokens.shift();\n          return state.shift();\n        }\n        if (token.data === \";\") {\n          tokens.shift();\n          return;\n        }\n        state.unshift(decl(DECL_STRUCT));\n      }\n    );\n\n    parse_precision = stative(\n      function () {\n        return tokens.shift(), Advance;\n      },\n      function () {\n        return (\n          assert(\"keyword\", [\"lowp\", \"mediump\", \"highp\"]) &&\n          (state.unshift(keyword()), Advance)\n        );\n      },\n      function () {\n        return state.unshift(keyword()), Advance;\n      },\n      function () {\n        return state.shift();\n      }\n    );\n\n    parse_quantifier = stative(\n      advance(\"[\"),\n      advance_expr(\"]\"),\n      advance(\"]\"),\n      function () {\n        return state.shift();\n      }\n    );\n\n    parse_forloop = stative(\n      advance(\"for\", \"keyword\"),\n      advance(\"(\"),\n      function () {\n        let lookup;\n        if (token.type === \"ident\") {\n          if (!(lookup = state.scope.find(token.data))) {\n            lookup = state.create_node();\n          }\n\n          if (lookup.parent.type === \"struct\") {\n            return state.unshift(decl(DECL_STATEMENT)), Advance;\n          }\n        } else if (token.type === \"builtin\" || token.type === \"keyword\") {\n          return state.unshift(decl(DECL_STATEMENT)), Advance;\n        }\n        return advance_expr(\";\")();\n      },\n      advance(\";\"),\n      advance_expr(\";\"),\n      advance(\";\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      popstmt()\n    );\n\n    parse_if = stative(\n      advance(\"if\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      function () {\n        if (token.data === \"else\") {\n          return tokens.shift(), state.unshift(stmt()), Advance;\n        }\n        return popstmt()();\n      },\n      popstmt()\n    );\n\n    parse_return = stative(\n      advance(\"return\", \"keyword\"),\n      function () {\n        if (token.data === \";\") return Advance;\n        return state.unshift(expr(\";\")), Advance;\n      },\n      function () {\n        tokens.shift(), popstmt()();\n      }\n    );\n\n    parse_whileloop = stative(\n      advance(\"while\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      popstmt()\n    );\n\n    parse_dowhileloop = stative(\n      advance(\"do\", \"keyword\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      advance(\"while\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      popstmt()\n    );\n\n    parse_function = stative(\n      function () {\n        for (let i = 1, len = state.length; i < len; ++i)\n          if (state[i].mode === FUNCTION) {\n            return unexpected(\n              \"function definition is not allowed within another function\"\n            );\n          }\n\n        return Advance;\n      },\n      function () {\n        if (!assert(\"ident\")) return;\n\n        const name = token.data,\n          lookup = state.scope.find(name);\n\n        state.unshift(ident());\n        state.scope.define(name);\n\n        state.scope.enter(lookup ? lookup.scope : null);\n        return Advance;\n      },\n      advance(\"(\"),\n      function () {\n        return state.unshift(fnargs()), Advance;\n      },\n      advance(\")\"),\n      function () {\n        // forward decl\n        if (token.data === \";\") {\n          return state.scope.exit(), state.shift(), state.shift();\n        }\n        return Advance;\n      },\n      advance(\"{\"),\n      advance_stmtlist(),\n      advance(\"}\"),\n      function () {\n        state.scope.exit();\n        return Advance;\n      },\n      function () {\n        return state.shift(), state.shift(), state.shift();\n      }\n    );\n\n    parse_function_args = stative(\n      function () {\n        if (token.data === \"void\") {\n          state.fake(keyword());\n          tokens.shift();\n          return Advance;\n        }\n        if (token.data === \")\") {\n          state.shift();\n          return;\n        }\n        if (token.data === \"struct\") {\n          state.unshift(struct(NO_ASSIGN_ALLOWED, NO_COMMA_ALLOWED));\n          return Advance;\n        }\n        state.unshift(decl(DECL_FUNCTION));\n        return Advance;\n      },\n      function () {\n        if (token.data === \",\") {\n          tokens.shift();\n          return 0;\n        }\n        if (token.data === \")\") {\n          state.shift();\n          return;\n        }\n        unexpected(\"expected one of `,` or `)`, got \" + token.data);\n      }\n    );\n  }\n}\n\nfunction mknode(mode, sourcetoken) {\n  return {\n    mode: mode,\n    token: sourcetoken,\n    children: [],\n    type: stmt_type[mode],\n    id: (Math.random() * 0xffffffff).toString(16),\n  };\n}\n\nfunction is_storage(token) {\n  return (\n    token.data === \"const\" ||\n    token.data === \"attribute\" ||\n    token.data === \"uniform\" ||\n    token.data === \"varying\"\n  );\n}\n\nfunction is_parameter(token) {\n  return token.data === \"in\" || token.data === \"inout\" || token.data === \"out\";\n}\n\nfunction is_precision(token) {\n  return (\n    token.data === \"highp\" || token.data === \"mediump\" || token.data === \"lowp\"\n  );\n}\n","module.exports = scope;\n\nfunction scope(state) {\n  if (this.constructor !== scope) return new scope(state);\n\n  this.state = state;\n  this.scopes = [];\n  this.current = null;\n}\n\nconst cons = scope,\n  proto = cons.prototype;\n\nproto.enter = function (s) {\n  this.scopes.push((this.current = this.state[0].scope = s || {}));\n};\n\nproto.exit = function () {\n  this.scopes.pop();\n  this.current = this.scopes[this.scopes.length - 1];\n};\n\nproto.define = function (str) {\n  this.current[str] = this.state[0];\n};\n\nproto.find = function (name, fail) {\n  for (let i = this.scopes.length - 1; i > -1; --i) {\n    if (this.scopes[i].hasOwnProperty(name)) {\n      return this.scopes[i][name];\n    }\n  }\n\n  return null;\n};\n","module.exports = tokenize\r\n\r\nvar literals100 = require('./lib/literals')\r\n  , operators = require('./lib/operators')\r\n  , builtins100 = require('./lib/builtins')\r\n  , literals300es = require('./lib/literals-300es')\r\n  , builtins300es = require('./lib/builtins-300es')\r\n\r\nvar NORMAL = 999          // <-- never emitted\r\n  , TOKEN = 9999          // <-- never emitted\r\n  , BLOCK_COMMENT = 0\r\n  , LINE_COMMENT = 1\r\n  , PREPROCESSOR = 2\r\n  , OPERATOR = 3\r\n  , INTEGER = 4\r\n  , FLOAT = 5\r\n  , IDENT = 6\r\n  , BUILTIN = 7\r\n  , KEYWORD = 8\r\n  , WHITESPACE = 9\r\n  , EOF = 10\r\n  , HEX = 11\r\n\r\nvar map = [\r\n    'block-comment'\r\n  , 'line-comment'\r\n  , 'preprocessor'\r\n  , 'operator'\r\n  , 'integer'\r\n  , 'float'\r\n  , 'ident'\r\n  , 'builtin'\r\n  , 'keyword'\r\n  , 'whitespace'\r\n  , 'eof'\r\n  , 'integer'\r\n]\r\n\r\nfunction tokenize(opt) {\r\n  var i = 0\r\n    , total = 0\r\n    , mode = NORMAL\r\n    , c\r\n    , last\r\n    , content = []\r\n    , tokens = []\r\n    , token_idx = 0\r\n    , token_offs = 0\r\n    , line = 1\r\n    , col = 0\r\n    , start = 0\r\n    , isnum = false\r\n    , isoperator = false\r\n    , input = ''\r\n    , len\r\n\r\n  opt = opt || {}\r\n  var allBuiltins = builtins100\r\n  var allLiterals = literals100\r\n  if (opt.version === '300 es') {\r\n    allBuiltins = builtins300es\r\n    allLiterals = literals300es\r\n  }\r\n\r\n  // cache by name\r\n  var builtinsDict = {}, literalsDict = {}\r\n  for (var i = 0; i < allBuiltins.length; i++) {\r\n    builtinsDict[allBuiltins[i]] = true\r\n  }\r\n  for (var i = 0; i < allLiterals.length; i++) {\r\n    literalsDict[allLiterals[i]] = true\r\n  }\r\n\r\n  return function(data) {\r\n    tokens = []\r\n    if (data !== null) return write(data)\r\n    return end()\r\n  }\r\n\r\n  function token(data) {\r\n    if (data.length) {\r\n      tokens.push({\r\n        type: map[mode]\r\n      , data: data\r\n      , position: start\r\n      , line: line\r\n      , column: col\r\n      })\r\n    }\r\n  }\r\n\r\n  function write(chunk) {\r\n    i = 0\r\n\r\n    if (chunk.toString) chunk = chunk.toString()\r\n\r\n    input += chunk.replace(/\\r\\n/g, '\\n')\r\n    len = input.length\r\n\r\n\r\n    var last\r\n\r\n    while(c = input[i], i < len) {\r\n      last = i\r\n\r\n      switch(mode) {\r\n        case BLOCK_COMMENT: i = block_comment(); break\r\n        case LINE_COMMENT: i = line_comment(); break\r\n        case PREPROCESSOR: i = preprocessor(); break\r\n        case OPERATOR: i = operator(); break\r\n        case INTEGER: i = integer(); break\r\n        case HEX: i = hex(); break\r\n        case FLOAT: i = decimal(); break\r\n        case TOKEN: i = readtoken(); break\r\n        case WHITESPACE: i = whitespace(); break\r\n        case NORMAL: i = normal(); break\r\n      }\r\n\r\n      if(last !== i) {\r\n        switch(input[last]) {\r\n          case '\\n': col = 0; ++line; break\r\n          default: ++col; break\r\n        }\r\n      }\r\n    }\r\n\r\n    total += i\r\n    input = input.slice(i)\r\n    return tokens\r\n  }\r\n\r\n  function end(chunk) {\r\n    if(content.length) {\r\n      token(content.join(''))\r\n    }\r\n\r\n    mode = EOF\r\n    token('(eof)')\r\n    return tokens\r\n  }\r\n\r\n  function normal() {\r\n    content = content.length ? [] : content\r\n\r\n    if(last === '/' && c === '*') {\r\n      start = total + i - 1\r\n      mode = BLOCK_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      start = total + i - 1\r\n      mode = LINE_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === '#') {\r\n      mode = PREPROCESSOR\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    if(/\\s/.test(c)) {\r\n      mode = WHITESPACE\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    isnum = /\\d/.test(c)\r\n    isoperator = /[^\\w_]/.test(c)\r\n\r\n    start = total + i\r\n    mode = isnum ? INTEGER : isoperator ? OPERATOR : TOKEN\r\n    return i\r\n  }\r\n\r\n  function whitespace() {\r\n    if(/[^\\s]/g.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function preprocessor() {\r\n    if((c === '\\r' || c === '\\n') && last !== '\\\\') {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function line_comment() {\r\n    return preprocessor()\r\n  }\r\n\r\n  function block_comment() {\r\n    if(c === '/' && last === '*') {\r\n      content.push(c)\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function operator() {\r\n    if(last === '.' && /\\d/.test(c)) {\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '*') {\r\n      mode = BLOCK_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      mode = LINE_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(c === '.' && content.length) {\r\n      while(determine_operator(content));\r\n\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(c === ';' || c === ')' || c === '(') {\r\n      if(content.length) while(determine_operator(content));\r\n      token(c)\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    var is_composite_operator = content.length === 2 && c !== '='\r\n    if(/[\\w_\\d\\s]/.test(c) || is_composite_operator) {\r\n      while(determine_operator(content));\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function determine_operator(buf) {\r\n    var j = 0\r\n      , idx\r\n      , res\r\n\r\n    do {\r\n      idx = operators.indexOf(buf.slice(0, buf.length + j).join(''))\r\n      res = operators[idx]\r\n\r\n      if(idx === -1) {\r\n        if(j-- + buf.length > 0) continue\r\n        res = buf.slice(0, 1).join('')\r\n      }\r\n\r\n      token(res)\r\n\r\n      start += res.length\r\n      content = content.slice(res.length)\r\n      return content.length\r\n    } while(1)\r\n  }\r\n\r\n  function hex() {\r\n    if(/[^a-fA-F0-9]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function integer() {\r\n    if(c === '.') {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === 'x' && content.length === 1 && content[0] === '0') {\r\n      mode = HEX\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function decimal() {\r\n    if(c === 'f') {\r\n      content.push(c)\r\n      last = c\r\n      i += 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if ((c === '-' || c === '+') && /[eE]/.test(last)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function readtoken() {\r\n    if(/[^\\d\\w_]/.test(c)) {\r\n      var contentstr = content.join('')\r\n      if(literalsDict[contentstr]) {\r\n        mode = KEYWORD\r\n      } else if(builtinsDict[contentstr]) {\r\n        mode = BUILTIN\r\n      } else {\r\n        mode = IDENT\r\n      }\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n}\r\n","// 300es builtins/reserved words that were previously valid in v100\r\nvar v100 = require('./builtins')\r\n\r\n// The texture2D|Cube functions have been removed\r\n// And the gl_ features are updated\r\nv100 = v100.slice().filter(function (b) {\r\n  return !/^(gl\\_|texture)/.test(b)\r\n})\r\n\r\nmodule.exports = v100.concat([\r\n  // the updated gl_ constants\r\n    'gl_VertexID'\r\n  , 'gl_InstanceID'\r\n  , 'gl_Position'\r\n  , 'gl_PointSize'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FragDepth'\r\n  , 'gl_PointCoord'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexUniformVectors'\r\n  , 'gl_MaxVertexOutputVectors'\r\n  , 'gl_MaxFragmentInputVectors'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxFragmentUniformVectors'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MinProgramTexelOffset'\r\n  , 'gl_MaxProgramTexelOffset'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_DepthRange'\r\n\r\n  // other builtins\r\n  , 'trunc'\r\n  , 'round'\r\n  , 'roundEven'\r\n  , 'isnan'\r\n  , 'isinf'\r\n  , 'floatBitsToInt'\r\n  , 'floatBitsToUint'\r\n  , 'intBitsToFloat'\r\n  , 'uintBitsToFloat'\r\n  , 'packSnorm2x16'\r\n  , 'unpackSnorm2x16'\r\n  , 'packUnorm2x16'\r\n  , 'unpackUnorm2x16'\r\n  , 'packHalf2x16'\r\n  , 'unpackHalf2x16'\r\n  , 'outerProduct'\r\n  , 'transpose'\r\n  , 'determinant'\r\n  , 'inverse'\r\n  , 'texture'\r\n  , 'textureSize'\r\n  , 'textureProj'\r\n  , 'textureLod'\r\n  , 'textureOffset'\r\n  , 'texelFetch'\r\n  , 'texelFetchOffset'\r\n  , 'textureProjOffset'\r\n  , 'textureLodOffset'\r\n  , 'textureProjLod'\r\n  , 'textureProjLodOffset'\r\n  , 'textureGrad'\r\n  , 'textureGradOffset'\r\n  , 'textureProjGrad'\r\n  , 'textureProjGradOffset'\r\n])\r\n","module.exports = [\r\n  // Keep this list sorted\r\n  'abs'\r\n  , 'acos'\r\n  , 'all'\r\n  , 'any'\r\n  , 'asin'\r\n  , 'atan'\r\n  , 'ceil'\r\n  , 'clamp'\r\n  , 'cos'\r\n  , 'cross'\r\n  , 'dFdx'\r\n  , 'dFdy'\r\n  , 'degrees'\r\n  , 'distance'\r\n  , 'dot'\r\n  , 'equal'\r\n  , 'exp'\r\n  , 'exp2'\r\n  , 'faceforward'\r\n  , 'floor'\r\n  , 'fract'\r\n  , 'gl_BackColor'\r\n  , 'gl_BackLightModelProduct'\r\n  , 'gl_BackLightProduct'\r\n  , 'gl_BackMaterial'\r\n  , 'gl_BackSecondaryColor'\r\n  , 'gl_ClipPlane'\r\n  , 'gl_ClipVertex'\r\n  , 'gl_Color'\r\n  , 'gl_DepthRange'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_EyePlaneQ'\r\n  , 'gl_EyePlaneR'\r\n  , 'gl_EyePlaneS'\r\n  , 'gl_EyePlaneT'\r\n  , 'gl_Fog'\r\n  , 'gl_FogCoord'\r\n  , 'gl_FogFragCoord'\r\n  , 'gl_FogParameters'\r\n  , 'gl_FragColor'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FragData'\r\n  , 'gl_FragDepth'\r\n  , 'gl_FragDepthEXT'\r\n  , 'gl_FrontColor'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FrontLightModelProduct'\r\n  , 'gl_FrontLightProduct'\r\n  , 'gl_FrontMaterial'\r\n  , 'gl_FrontSecondaryColor'\r\n  , 'gl_LightModel'\r\n  , 'gl_LightModelParameters'\r\n  , 'gl_LightModelProducts'\r\n  , 'gl_LightProducts'\r\n  , 'gl_LightSource'\r\n  , 'gl_LightSourceParameters'\r\n  , 'gl_MaterialParameters'\r\n  , 'gl_MaxClipPlanes'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MaxFragmentUniformComponents'\r\n  , 'gl_MaxLights'\r\n  , 'gl_MaxTextureCoords'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxTextureUnits'\r\n  , 'gl_MaxVaryingFloats'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxVertexUniformComponents'\r\n  , 'gl_ModelViewMatrix'\r\n  , 'gl_ModelViewMatrixInverse'\r\n  , 'gl_ModelViewMatrixInverseTranspose'\r\n  , 'gl_ModelViewMatrixTranspose'\r\n  , 'gl_ModelViewProjectionMatrix'\r\n  , 'gl_ModelViewProjectionMatrixInverse'\r\n  , 'gl_ModelViewProjectionMatrixInverseTranspose'\r\n  , 'gl_ModelViewProjectionMatrixTranspose'\r\n  , 'gl_MultiTexCoord0'\r\n  , 'gl_MultiTexCoord1'\r\n  , 'gl_MultiTexCoord2'\r\n  , 'gl_MultiTexCoord3'\r\n  , 'gl_MultiTexCoord4'\r\n  , 'gl_MultiTexCoord5'\r\n  , 'gl_MultiTexCoord6'\r\n  , 'gl_MultiTexCoord7'\r\n  , 'gl_Normal'\r\n  , 'gl_NormalMatrix'\r\n  , 'gl_NormalScale'\r\n  , 'gl_ObjectPlaneQ'\r\n  , 'gl_ObjectPlaneR'\r\n  , 'gl_ObjectPlaneS'\r\n  , 'gl_ObjectPlaneT'\r\n  , 'gl_Point'\r\n  , 'gl_PointCoord'\r\n  , 'gl_PointParameters'\r\n  , 'gl_PointSize'\r\n  , 'gl_Position'\r\n  , 'gl_ProjectionMatrix'\r\n  , 'gl_ProjectionMatrixInverse'\r\n  , 'gl_ProjectionMatrixInverseTranspose'\r\n  , 'gl_ProjectionMatrixTranspose'\r\n  , 'gl_SecondaryColor'\r\n  , 'gl_TexCoord'\r\n  , 'gl_TextureEnvColor'\r\n  , 'gl_TextureMatrix'\r\n  , 'gl_TextureMatrixInverse'\r\n  , 'gl_TextureMatrixInverseTranspose'\r\n  , 'gl_TextureMatrixTranspose'\r\n  , 'gl_Vertex'\r\n  , 'greaterThan'\r\n  , 'greaterThanEqual'\r\n  , 'inversesqrt'\r\n  , 'length'\r\n  , 'lessThan'\r\n  , 'lessThanEqual'\r\n  , 'log'\r\n  , 'log2'\r\n  , 'matrixCompMult'\r\n  , 'max'\r\n  , 'min'\r\n  , 'mix'\r\n  , 'mod'\r\n  , 'normalize'\r\n  , 'not'\r\n  , 'notEqual'\r\n  , 'pow'\r\n  , 'radians'\r\n  , 'reflect'\r\n  , 'refract'\r\n  , 'sign'\r\n  , 'sin'\r\n  , 'smoothstep'\r\n  , 'sqrt'\r\n  , 'step'\r\n  , 'tan'\r\n  , 'texture2D'\r\n  , 'texture2DLod'\r\n  , 'texture2DProj'\r\n  , 'texture2DProjLod'\r\n  , 'textureCube'\r\n  , 'textureCubeLod'\r\n  , 'texture2DLodEXT'\r\n  , 'texture2DProjLodEXT'\r\n  , 'textureCubeLodEXT'\r\n  , 'texture2DGradEXT'\r\n  , 'texture2DProjGradEXT'\r\n  , 'textureCubeGradEXT'\r\n]\r\n","var v100 = require('./literals')\r\n\r\nmodule.exports = v100.slice().concat([\r\n   'layout'\r\n  , 'centroid'\r\n  , 'smooth'\r\n  , 'case'\r\n  , 'mat2x2'\r\n  , 'mat2x3'\r\n  , 'mat2x4'\r\n  , 'mat3x2'\r\n  , 'mat3x3'\r\n  , 'mat3x4'\r\n  , 'mat4x2'\r\n  , 'mat4x3'\r\n  , 'mat4x4'\r\n  , 'uvec2'\r\n  , 'uvec3'\r\n  , 'uvec4'\r\n  , 'samplerCubeShadow'\r\n  , 'sampler2DArray'\r\n  , 'sampler2DArrayShadow'\r\n  , 'isampler2D'\r\n  , 'isampler3D'\r\n  , 'isamplerCube'\r\n  , 'isampler2DArray'\r\n  , 'usampler2D'\r\n  , 'usampler3D'\r\n  , 'usamplerCube'\r\n  , 'usampler2DArray'\r\n  , 'coherent'\r\n  , 'restrict'\r\n  , 'readonly'\r\n  , 'writeonly'\r\n  , 'resource'\r\n  , 'atomic_uint'\r\n  , 'noperspective'\r\n  , 'patch'\r\n  , 'sample'\r\n  , 'subroutine'\r\n  , 'common'\r\n  , 'partition'\r\n  , 'active'\r\n  , 'filter'\r\n  , 'image1D'\r\n  , 'image2D'\r\n  , 'image3D'\r\n  , 'imageCube'\r\n  , 'iimage1D'\r\n  , 'iimage2D'\r\n  , 'iimage3D'\r\n  , 'iimageCube'\r\n  , 'uimage1D'\r\n  , 'uimage2D'\r\n  , 'uimage3D'\r\n  , 'uimageCube'\r\n  , 'image1DArray'\r\n  , 'image2DArray'\r\n  , 'iimage1DArray'\r\n  , 'iimage2DArray'\r\n  , 'uimage1DArray'\r\n  , 'uimage2DArray'\r\n  , 'image1DShadow'\r\n  , 'image2DShadow'\r\n  , 'image1DArrayShadow'\r\n  , 'image2DArrayShadow'\r\n  , 'imageBuffer'\r\n  , 'iimageBuffer'\r\n  , 'uimageBuffer'\r\n  , 'sampler1DArray'\r\n  , 'sampler1DArrayShadow'\r\n  , 'isampler1D'\r\n  , 'isampler1DArray'\r\n  , 'usampler1D'\r\n  , 'usampler1DArray'\r\n  , 'isampler2DRect'\r\n  , 'usampler2DRect'\r\n  , 'samplerBuffer'\r\n  , 'isamplerBuffer'\r\n  , 'usamplerBuffer'\r\n  , 'sampler2DMS'\r\n  , 'isampler2DMS'\r\n  , 'usampler2DMS'\r\n  , 'sampler2DMSArray'\r\n  , 'isampler2DMSArray'\r\n  , 'usampler2DMSArray'\r\n])\r\n","module.exports = [\r\n  // current\r\n    'precision'\r\n  , 'highp'\r\n  , 'mediump'\r\n  , 'lowp'\r\n  , 'attribute'\r\n  , 'const'\r\n  , 'uniform'\r\n  , 'varying'\r\n  , 'break'\r\n  , 'continue'\r\n  , 'do'\r\n  , 'for'\r\n  , 'while'\r\n  , 'if'\r\n  , 'else'\r\n  , 'in'\r\n  , 'out'\r\n  , 'inout'\r\n  , 'float'\r\n  , 'int'\r\n  , 'uint'\r\n  , 'void'\r\n  , 'bool'\r\n  , 'true'\r\n  , 'false'\r\n  , 'discard'\r\n  , 'return'\r\n  , 'mat2'\r\n  , 'mat3'\r\n  , 'mat4'\r\n  , 'vec2'\r\n  , 'vec3'\r\n  , 'vec4'\r\n  , 'ivec2'\r\n  , 'ivec3'\r\n  , 'ivec4'\r\n  , 'bvec2'\r\n  , 'bvec3'\r\n  , 'bvec4'\r\n  , 'sampler1D'\r\n  , 'sampler2D'\r\n  , 'sampler3D'\r\n  , 'samplerCube'\r\n  , 'sampler1DShadow'\r\n  , 'sampler2DShadow'\r\n  , 'struct'\r\n\r\n  // future\r\n  , 'asm'\r\n  , 'class'\r\n  , 'union'\r\n  , 'enum'\r\n  , 'typedef'\r\n  , 'template'\r\n  , 'this'\r\n  , 'packed'\r\n  , 'goto'\r\n  , 'switch'\r\n  , 'default'\r\n  , 'inline'\r\n  , 'noinline'\r\n  , 'volatile'\r\n  , 'public'\r\n  , 'static'\r\n  , 'extern'\r\n  , 'external'\r\n  , 'interface'\r\n  , 'long'\r\n  , 'short'\r\n  , 'double'\r\n  , 'half'\r\n  , 'fixed'\r\n  , 'unsigned'\r\n  , 'input'\r\n  , 'output'\r\n  , 'hvec2'\r\n  , 'hvec3'\r\n  , 'hvec4'\r\n  , 'dvec2'\r\n  , 'dvec3'\r\n  , 'dvec4'\r\n  , 'fvec2'\r\n  , 'fvec3'\r\n  , 'fvec4'\r\n  , 'sampler2DRect'\r\n  , 'sampler3DRect'\r\n  , 'sampler2DRectShadow'\r\n  , 'sizeof'\r\n  , 'cast'\r\n  , 'namespace'\r\n  , 'using'\r\n]\r\n","module.exports = [\r\n    '<<='\r\n  , '>>='\r\n  , '++'\r\n  , '--'\r\n  , '<<'\r\n  , '>>'\r\n  , '<='\r\n  , '>='\r\n  , '=='\r\n  , '!='\r\n  , '&&'\r\n  , '||'\r\n  , '+='\r\n  , '-='\r\n  , '*='\r\n  , '/='\r\n  , '%='\r\n  , '&='\r\n  , '^^'\r\n  , '^='\r\n  , '|='\r\n  , '('\r\n  , ')'\r\n  , '['\r\n  , ']'\r\n  , '.'\r\n  , '!'\r\n  , '~'\r\n  , '*'\r\n  , '/'\r\n  , '%'\r\n  , '+'\r\n  , '-'\r\n  , '<'\r\n  , '>'\r\n  , '&'\r\n  , '^'\r\n  , '|'\r\n  , '?'\r\n  , ':'\r\n  , '='\r\n  , ','\r\n  , ';'\r\n  , '{'\r\n  , '}'\r\n]\r\n","var tokenize = require('./index')\r\n\r\nmodule.exports = tokenizeString\r\n\r\nfunction tokenizeString(str, opt) {\r\n  var generator = tokenize(opt)\r\n  var tokens = []\r\n\r\n  tokens = tokens.concat(generator(str))\r\n  tokens = tokens.concat(generator(null))\r\n\r\n  return tokens\r\n}\r\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexports.make = function (x) {\n  if (x == null) {\n    x = [];\n  }\n  if (!(x instanceof Array)) {\n    x = [+x != null ? +x : 0];\n  }\n  return x;\n};\n\nexports.nest = (a, b) => a.concat(b);\n\nexports.compare = function (a, b) {\n  const n = Math.min(a.length, b.length);\n  for (\n    let i = 0, end = n, asc = 0 <= end;\n    asc ? i < end : i > end;\n    asc ? i++ : i--\n  ) {\n    const p = a[i];\n    const q = b[i];\n    if (p > q) {\n      return -1;\n    }\n    if (p < q) {\n      return 1;\n    }\n  }\n  a = a.length;\n  b = b.length;\n  if (a > b) {\n    return -1;\n  } else if (a < b) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n\nexports.max = function (a, b) {\n  if (exports.compare(a, b) > 0) {\n    return b;\n  } else {\n    return a;\n  }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Graph of nodes with outlets\n*/\nexport class Graph {\n  static initClass() {\n    this.index = 0;\n\n    this.IN = 0;\n    this.OUT = 1;\n  }\n  // eslint-disable-next-line no-unused-vars\n  static id(name) {\n    return ++Graph.index;\n  }\n\n  constructor(nodes, parent = null) {\n    this.parent = parent;\n    this.id = Graph.id();\n    this.nodes = [];\n    nodes && this.add(nodes);\n  }\n\n  inputs() {\n    const inputs = [];\n    for (const node of Array.from(this.nodes)) {\n      for (const outlet of Array.from(node.inputs)) {\n        if (outlet.input === null) {\n          inputs.push(outlet);\n        }\n      }\n    }\n    return inputs;\n  }\n\n  outputs() {\n    const outputs = [];\n    for (const node of Array.from(this.nodes)) {\n      for (const outlet of Array.from(node.outputs)) {\n        if (outlet.output.length === 0) {\n          outputs.push(outlet);\n        }\n      }\n    }\n    return outputs;\n  }\n\n  getIn(name) {\n    return Array.from(this.inputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n  getOut(name) {\n    return Array.from(this.outputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n\n  add(node, ignore) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.add(_node);\n      }\n      return;\n    }\n\n    if (node.graph && !ignore) {\n      throw new Error(\"Adding node to two graphs at once\");\n    }\n\n    node.graph = this;\n    this.nodes.push(node);\n  }\n\n  remove(node, ignore) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.remove(_node);\n      }\n      return;\n    }\n\n    if (node.graph !== this) {\n      throw new Error(\"Removing node from wrong graph.\");\n    }\n\n    ignore || node.disconnect();\n\n    this.nodes.splice(this.nodes.indexOf(node), 1);\n    node.graph = null;\n  }\n\n  adopt(node) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.adopt(_node);\n      }\n      return;\n    }\n\n    node.graph.remove(node, true);\n    this.add(node, true);\n  }\n}\nGraph.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\n\n/*\n  In/out outlet on node\n*/\nexport class Outlet {\n  static initClass() {\n    this.index = 0;\n  }\n  static make(outlet, extra) {\n    if (extra == null) {\n      extra = {};\n    }\n    const meta = extra;\n    if (outlet.meta != null) {\n      for (const key in outlet.meta) {\n        const value = outlet.meta[key];\n        meta[key] = value;\n      }\n    }\n    return new Outlet(\n      outlet.inout,\n      outlet.name,\n      outlet.hint,\n      outlet.type,\n      meta\n    );\n  }\n  static id(name) {\n    return `_io_${++Outlet.index}_${name}`;\n  }\n\n  static hint(name) {\n    name = name.replace(/^_io_[0-9]+_/, \"\");\n    name = name.replace(/_i_o$/, \"\");\n    return (name = name.replace(/(In|Out|Inout|InOut)$/, \"\"));\n  }\n\n  constructor(inout, name, hint, type, meta, id) {\n    this.inout = inout;\n    this.name = name;\n    this.hint = hint;\n    this.type = type;\n    if (meta == null) {\n      meta = {};\n    }\n    this.meta = meta;\n    this.id = id;\n    if (this.hint == null) {\n      this.hint = Outlet.hint(this.name);\n    }\n\n    this.node = null;\n    this.input = null;\n    this.output = [];\n    if (this.id == null) {\n      this.id = Outlet.id(this.hint);\n    }\n  }\n\n  // Change into given outlet without touching connections\n  morph(outlet) {\n    this.inout = outlet.inout;\n    this.name = outlet.name;\n    this.hint = outlet.hint;\n    this.type = outlet.type;\n    return (this.meta = outlet.meta);\n  }\n\n  // Copy with unique name and cloned metadata\n  dupe(name) {\n    if (name == null) {\n      name = this.id;\n    }\n    const outlet = Outlet.make(this);\n    outlet.name = name;\n    return outlet;\n  }\n\n  // Connect to given outlet\n  connect(outlet) {\n    // Auto-reverse in/out to out/in\n    if (this.inout === Graph.IN && outlet.inout === Graph.OUT) {\n      return outlet.connect(this);\n    }\n\n    // Disallow bad combinations\n    if (this.inout !== Graph.OUT || outlet.inout !== Graph.IN) {\n      throw new Error(\"Can only connect out to in.\");\n    }\n\n    // Check for existing connection\n    if (outlet.input === this) {\n      return;\n    }\n\n    // Disconnect existing connections\n    outlet.disconnect();\n\n    // Add new connection.\n    outlet.input = this;\n    return this.output.push(outlet);\n  }\n\n  // Disconnect given outlet (or all)\n  disconnect(outlet) {\n    // Disconnect input from the other side.\n    if (this.input) {\n      this.input.disconnect(this);\n    }\n\n    if (this.output.length) {\n      if (outlet) {\n        // Remove one outgoing connection.\n        const index = this.output.indexOf(outlet);\n        if (index >= 0) {\n          this.output.splice(index, 1);\n          return (outlet.input = null);\n        }\n      } else {\n        // Remove all outgoing connections.\n        for (outlet of Array.from(this.output)) {\n          outlet.input = null;\n        }\n        return (this.output = []);\n      }\n    }\n  }\n}\nOutlet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\nimport { Outlet } from \"./outlet\";\n\n/*\n Node in graph.\n*/\nexport class Node {\n  static initClass() {\n    this.index = 0;\n  }\n  static id(_name) {\n    return ++Node.index;\n  }\n\n  constructor(owner, outlets) {\n    this.owner = owner;\n    this.graph = null;\n    this.inputs = [];\n    this.outputs = [];\n    this.all = [];\n    this.outlets = null;\n    this.id = Node.id();\n\n    this.setOutlets(outlets);\n  }\n\n  // Retrieve input\n  getIn(name) {\n    return Array.from(this.inputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve output\n  getOut(name) {\n    return Array.from(this.outputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve by name\n  get(name) {\n    return this.getIn(name) || this.getOut(name);\n  }\n\n  // Set new outlet definition\n  setOutlets(outlets) {\n    if (outlets != null) {\n      // First init\n      let outlet;\n      if (this.outlets == null) {\n        this.outlets = {};\n        for (outlet of Array.from(outlets)) {\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n        return;\n      }\n\n      // Return new/old outlet matching hash key\n      const hash = (\n        outlet // Match by name, direction and type.\n      ) => [outlet.name, outlet.inout, outlet.type].join(\"-\");\n\n      // Build hash of new outlets\n      const match = {};\n      for (outlet of Array.from(outlets)) {\n        match[hash(outlet)] = true;\n      }\n\n      // Remove missing outlets, record matches\n      for (let key in this.outlets) {\n        outlet = this.outlets[key];\n        key = hash(outlet);\n        if (match[key]) {\n          match[key] = outlet;\n        } else {\n          this._remove(outlet);\n        }\n      }\n\n      // Insert new outlets\n      for (outlet of Array.from(outlets)) {\n        // Find match by hash\n        const existing = match[hash(outlet)];\n        if (existing instanceof Outlet) {\n          // Update existing outlets in place to retain connections.\n          this._morph(existing, outlet);\n        } else {\n          // Spawn new outlet\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n      }\n\n      this;\n    }\n    return this.outlets;\n  }\n\n  // Connect to the target node by matching up inputs and outputs.\n  connect(node, empty, force) {\n    let dest, dests, hint, source, type;\n    const outlets = {};\n    const hints = {};\n\n    const typeHint = (outlet) => type + \"/\" + outlet.hint;\n\n    // Hash the types/hints of available target outlets.\n    for (dest of Array.from(node.inputs)) {\n      // Only autoconnect if not already connected\n      let list;\n      if (!force && dest.input) {\n        continue;\n      }\n\n      // Match outlets by type/name hint, then type/position key\n      ({ type } = dest);\n      hint = typeHint(dest);\n\n      if (!hints[hint]) {\n        hints[hint] = dest;\n      }\n      outlets[type] = list = outlets[type] || [];\n      list.push(dest);\n    }\n\n    // Available source outlets\n    let sources = this.outputs;\n\n    // Ignore connected source if only matching empties.\n    sources = sources.filter((outlet) => !(empty && outlet.output.length));\n\n    // Match hints first\n    for (source of Array.from(sources.slice())) {\n      // Match outlets by type and name\n      ({ type } = source);\n      hint = typeHint(source);\n      dests = outlets[type];\n\n      // Connect if found\n      if ((dest = hints[hint])) {\n        source.connect(dest);\n\n        // Remove from potential set\n        delete hints[hint];\n        dests.splice(dests.indexOf(dest), 1);\n        sources.splice(sources.indexOf(source), 1);\n      }\n    }\n\n    // Match what's left\n    if (!sources.length) {\n      return this;\n    }\n    for (source of Array.from(sources.slice())) {\n      ({ type } = source);\n      dests = outlets[type];\n\n      // Match outlets by type and order\n      if (dests && dests.length) {\n        // Link up and remove from potential set\n        source.connect(dests.shift());\n      }\n    }\n\n    return this;\n  }\n\n  // Disconnect entire node\n  disconnect(_node) {\n    let outlet;\n    for (outlet of Array.from(this.inputs)) {\n      outlet.disconnect();\n    }\n    for (outlet of Array.from(this.outputs)) {\n      outlet.disconnect();\n    }\n\n    return this;\n  }\n\n  // Return hash key for outlet\n  _key(outlet) {\n    return [outlet.name, outlet.inout].join(\"-\");\n  }\n\n  // Add outlet object to node\n  _add(outlet) {\n    const key = this._key(outlet);\n\n    // Sanity checks\n    if (outlet.node) {\n      throw new Error(\"Adding outlet to two nodes at once.\");\n    }\n    if (this.outlets[key]) {\n      throw new Error(`Adding two identical outlets to same node. (${key})`);\n    }\n\n    // Link back outlet\n    outlet.node = this;\n\n    // Add to name hash and inout list\n    if (outlet.inout === Graph.IN) {\n      this.inputs.push(outlet);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.push(outlet);\n    }\n    this.all.push(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Morph outlet to other\n  _morph(existing, outlet) {\n    let key = this._key(outlet);\n    delete this.outlets[key];\n\n    existing.morph(outlet);\n\n    key = this._key(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Remove outlet object from node.\n  _remove(outlet) {\n    const key = this._key(outlet);\n\n    // Sanity checks\n    if (outlet.node !== this) {\n      throw new Error(\"Removing outlet from wrong node.\");\n    }\n\n    // Disconnect outlet.\n    outlet.disconnect();\n\n    // Unlink outlet.\n    outlet.node = null;\n\n    // Remove from name list and inout list.\n    delete this.outlets[key];\n    if (outlet.inout === Graph.IN) {\n      this.inputs.splice(this.inputs.indexOf(outlet), 1);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.splice(this.outputs.indexOf(outlet), 1);\n    }\n    this.all.splice(this.all.indexOf(outlet), 1);\n    return this;\n  }\n}\nNode.initClass();\n","import { Graph } from \"./graph\";\nexport const { IN, OUT } = Graph;\n\nexport * from \"./graph\";\nexport * from \"./node\";\nexport * from \"./outlet\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexport class Snippet {\n  static initClass() {\n    this.index = 0;\n  }\n  static namespace() {\n    return `_sn_${++Snippet.index}_`;\n  }\n\n  static load(language, name, code) {\n    const program = language.parse(name, code);\n    const [sigs, compiler] = Array.from(language.compile(program));\n    return new Snippet(language, sigs, compiler, name, code);\n  }\n\n  constructor(language, _signatures, _compiler, _name, _original) {\n    this.language = language;\n    this._signatures = _signatures;\n    this._compiler = _compiler;\n    this._name = _name;\n    this._original = _original;\n    this.namespace = null;\n    this.code = null;\n\n    this.main = null;\n    this.entry = null;\n\n    this.uniforms = null;\n    this.externals = null;\n    this.symbols = null;\n    this.attributes = null;\n    this.varyings = null;\n\n    // Tidy up object for export\n    if (!this.language) {\n      delete this.language;\n    }\n    if (!this._signatures) {\n      delete this._signatures;\n    }\n    if (!this._compiler) {\n      delete this._compiler;\n    }\n    if (!this._original) {\n      delete this._original;\n    }\n\n    // Insert snippet name if not provided\n    if (!this._name) {\n      this._name =\n        this._signatures != null ? this._signatures.main.name : undefined;\n    }\n  }\n\n  clone() {\n    return new Snippet(\n      this.language,\n      this._signatures,\n      this._compiler,\n      this._name,\n      this._original\n    );\n  }\n\n  bind(config, uniforms, namespace, defines) {\n    // Alt syntax (namespace, uniforms, defines)\n    let def, left;\n    let v;\n    if (uniforms === \"\" + uniforms) {\n      [namespace, uniforms, defines] = Array.from([\n        uniforms,\n        namespace != null ? namespace : {},\n        defines != null ? defines : {},\n      ]);\n      // Alt syntax (uniforms, defines)\n    } else if (namespace !== \"\" + namespace) {\n      [defines, namespace] = Array.from([\n        namespace != null ? namespace : {},\n        undefined,\n      ]);\n    }\n\n    // Prepare data structure\n    this.main = this._signatures.main;\n    this.namespace =\n      (left = namespace != null ? namespace : this.namespace) != null\n        ? left\n        : Snippet.namespace();\n    this.entry = this.namespace + this.main.name;\n\n    this.uniforms = {};\n    this.varyings = {};\n    this.attributes = {};\n    this.externals = {};\n    this.symbols = [];\n    const exist = {};\n    const exceptions = {};\n\n    // Handle globals and locals for prefixing\n    const global = function (name) {\n      exceptions[name] = true;\n      return name;\n    };\n    const local = (name) => {\n      return this.namespace + name;\n    };\n\n    // Apply config\n    if (config.globals) {\n      for (const key of Array.from(config.globals)) {\n        global(key);\n      }\n    }\n    const _u = config.globalUniforms ? global : local;\n    const _v = config.globalVaryings ? global : local;\n    const _a = config.globalAttributes ? global : local;\n    const _e = local;\n\n    // Build finalized properties\n    const x = (def) => {\n      return (exist[def.name] = true);\n    };\n    const u = (def, name) => {\n      return (this.uniforms[_u(name != null ? name : def.name)] = def);\n    };\n    v = (def) => {\n      return (this.varyings[_v(def.name)] = def);\n    };\n    const a = (def) => {\n      return (this.attributes[_a(def.name)] = def);\n    };\n    const e = (def) => {\n      const name = _e(def.name);\n      this.externals[name] = def;\n      return this.symbols.push(name);\n    };\n\n    const redef = (def) => ({\n      type: def.type,\n      name: def.name,\n      value: def.value,\n    });\n\n    for (def of Array.from(this._signatures.uniform)) {\n      x(def);\n    }\n    for (def of Array.from(this._signatures.uniform)) {\n      u(redef(def));\n    }\n    for (def of Array.from(this._signatures.varying)) {\n      v(redef(def));\n    }\n    for (def of Array.from(this._signatures.external)) {\n      e(def);\n    }\n    for (def of Array.from(this._signatures.attribute)) {\n      a(redef(def));\n    }\n    for (const name in uniforms) {\n      def = uniforms[name];\n      if (exist[name]) {\n        u(def, name);\n      }\n    }\n\n    this.body = this.code = this._compiler(this.namespace, exceptions, defines);\n\n    // Adds defs to original snippet for inspection\n    if (defines) {\n      const defs = (() => {\n        const result = [];\n        for (const k in defines) {\n          v = defines[k];\n          result.push(`#define ${k} ${v}`);\n        }\n        return result;\n      })().join(\"\\n\");\n      if (defs.length) {\n        this._original = [\n          defs,\n          \"//----------------------------------------\",\n          this._original,\n        ].join(\"\\n\");\n      }\n    }\n\n    return null;\n  }\n}\nSnippet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n  Program assembler\n\n  Builds composite program that can act as new module/snippet\n  Unconnected input/outputs and undefined callbacks are exposed in the new global/main scope\n  If there is only one call with an identical call signature, a #define is output instead.\n*/\nexport const assemble = function (language, namespace, calls, requires) {\n  const generate = language;\n\n  const externals = {};\n  const symbols = [];\n  const uniforms = {};\n  const varyings = {};\n  const attributes = {};\n  const library = {};\n\n  const process = function () {\n    let body;\n    let ns;\n    for (ns in requires) {\n      const r = requires[ns];\n      required(r.node, r.module);\n    }\n\n    [body, calls] = Array.from(handle(calls));\n    if (namespace != null) {\n      body.entry = namespace;\n    }\n    const main = generate.build(body, calls);\n\n    const sorted = (() => {\n      const result = [];\n      for (ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    const includes = sorted.map((x) => x.code);\n    includes.push(main.code);\n    const code = generate.lines(includes);\n\n    // Build new virtual snippet\n    return {\n      namespace: main.name,\n      library, // Included library functions\n      body: main.code, // Snippet body\n      code, // Complete snippet (tests/debug)\n      main, // Function signature\n      entry: main.name, // Entry point name\n      symbols,\n      externals,\n      uniforms,\n      varyings,\n      attributes,\n    };\n  };\n\n  // Sort and process calls\n  const handle = (calls) => {\n    let c;\n    calls = (() => {\n      const result = [];\n      for (const ns in calls) {\n        c = calls[ns];\n        result.push(c);\n      }\n      return result;\n    })();\n    calls.sort((a, b) => b.priority - a.priority);\n\n    // Call module in DAG chain\n    const call = (node, module, priority) => {\n      include(node, module, priority);\n      const { main } = module;\n      const { entry } = module;\n\n      const _lookup = (name) => lookup(node, name);\n      const _dangling = (name) => isDangling(node, name);\n      return generate.call(_lookup, _dangling, entry, main.signature, body);\n    };\n\n    const body = generate.body();\n    for (c of Array.from(calls)) {\n      call(c.node, c.module, c.priority);\n    }\n\n    return [body, calls];\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include snippet for a call\n  const include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (const ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt GL vars\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return required(node, module);\n  };\n\n  const required = (\n    node,\n    module // Adopt external symbols\n  ) =>\n    (() => {\n      const result = [];\n      for (const key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          const copy = {};\n          for (const k in ext) {\n            const v = ext[k];\n            copy[k] = v;\n          }\n          copy.name = lookup(node, ext.name);\n          externals[key] = copy;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n\n  // Check for dangling input/output\n  const isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  // Look up unique name for outlet\n  const lookup = function (node, name) {\n    // Traverse graph edge\n    let outlet = node.get(name);\n    if (!outlet) {\n      return null;\n    }\n\n    if (outlet.input) {\n      outlet = outlet.input;\n    }\n    ({ name } = outlet);\n\n    return outlet.id;\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { assemble } from \"./assemble\";\n\n/*\n  Program assembly model\n\n  Snippets are added to its queue, registering calls and code includes.\n  Calls are de-duped and scheduled at the earliest point required for correct data flow.\n\n  When assemble() is called, it builds a main() function to\n  execute all calls in final order.\n\n  The result is a new instance of Snippet that acts as if it\n  was parsed from the combined source of the component\n  nodes.\n*/\nexport class Program {\n  static initClass() {\n    this.index = 0;\n  }\n  static entry() {\n    return `_pg_${++Program.index}_`;\n  }\n\n  // Program starts out empty, ready to compile starting from a particular block\n  constructor(language, namespace, graph) {\n    this.language = language;\n    this.namespace = namespace;\n    this.graph = graph;\n    this.calls = {};\n    this.requires = {};\n  }\n\n  // Call a given module at certain priority\n  call(node, module, priority) {\n    let exists;\n    const ns = module.namespace;\n\n    // Merge all calls down into one with the right priority\n    if ((exists = this.calls[ns])) {\n      exists.priority = Math.max(exists.priority, priority);\n    } else {\n      this.calls[ns] = { node, module, priority };\n    }\n\n    return this;\n  }\n\n  // Require a given (callback) module's externals\n  require(node, module) {\n    const ns = module.namespace;\n    return (this.requires[ns] = { node, module });\n  }\n\n  // Compile queued ops into result\n  assemble() {\n    const data = assemble(\n      this.language,\n      this.namespace != null ? this.namespace : Program.entry,\n      this.calls,\n      this.requires\n    );\n    const snippet = new Snippet();\n    for (const key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\nProgram.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n Callback linker\n\n Imports given modules and generates linkages for registered callbacks.\n\n Builds composite program with single module as exported entry point\n*/\n\nexport const link = function (language, links, modules, exported) {\n  const generate = language;\n  let includes = [];\n\n  const symbols = [];\n  const externals = {};\n  const uniforms = {};\n  const attributes = {};\n  const varyings = {};\n  const library = {};\n\n  const process = function () {\n    const exports = generate.links(links);\n\n    const header = [];\n    if (exports.defs != null) {\n      header.push(exports.defs);\n    }\n    if (exports.bodies != null) {\n      header.push(exports.bodies);\n    }\n\n    for (const m of Array.from(modules)) {\n      include(m.node, m.module, m.priority);\n    }\n    const sorted = (() => {\n      const result = [];\n      for (const ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    includes = sorted.map((x) => x.code);\n\n    let code = generate.lines(includes);\n    code = generate.defuse(code);\n    if (header.length) {\n      code = [generate.lines(header), code].join(\"\\n\");\n    }\n    code = generate.hoist(code);\n    code = generate.dedupe(code);\n\n    // Export module's externals\n    const e = exported;\n    return {\n      namespace: e.main.name,\n      code, // Complete snippet (tests/debug)\n      main: e.main, // Function signature\n      entry: e.main.name, // Entry point name\n      externals,\n      uniforms,\n      attributes,\n      varyings,\n    };\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include piece of code\n  const include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (const ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt externals\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return (() => {\n      const result = [];\n      for (key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          externals[key] = ext;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n  };\n\n  // Check for dangling input/output\n  const isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (!outlet) {\n      const module =\n        (node.owner.snippet != null ? node.owner.snippet._name : undefined) !=\n        null\n          ? node.owner.snippet != null\n            ? node.owner.snippet._name\n            : undefined\n          : node.owner.namespace;\n      throw new Error(\n        `Unable to link program. Unlinked callback \\`${name}\\` on \\`${module}\\``\n      );\n    }\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { link } from \"./link\";\n\nconst debug = false;\n\n/*\n  Program linkage layout\n\n  Entry points are added to its dependency graph\n  Callbacks are linked either with a go-between function\n  or a #define if the signatures are identical.\n*/\nexport class Layout {\n  constructor(language, graph) {\n    this.language = language;\n    this.graph = graph;\n    this.links = [];\n    this.includes = [];\n    this.modules = {};\n    this.visits = {};\n  }\n\n  // Link up a given named external to this module's entry point\n  callback(node, module, priority, name, external) {\n    return this.links.push({ node, module, priority, name, external });\n  }\n\n  // Include this module of code\n  include(node, module, priority) {\n    let m;\n    if ((m = this.modules[module.namespace]) != null) {\n      return (m.priority = Math.max(priority, m.priority));\n    } else {\n      this.modules[module.namespace] = true;\n      return this.includes.push({ node, module, priority });\n    }\n  }\n\n  // Visit each namespace at most once to avoid infinite recursion\n  visit(namespace) {\n    debug && console.log(\"Visit\", namespace, !this.visits[namespace]);\n    if (this.visits[namespace]) {\n      return false;\n    }\n    return (this.visits[namespace] = true);\n  }\n\n  // Compile queued ops into result\n  link(module) {\n    const data = link(this.language, this.links, this.includes, module);\n    const snippet = new Snippet();\n    for (const key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\n","import { Snippet } from \"./snippet\";\n\nexport const { load } = Snippet;\n\nexport * from \"./snippet\";\nexport * from \"./program\";\nexport * from \"./layout\";\nexport * from \"./assemble\";\nexport * from \"./link\";\nexport * from \"./priority\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS103: Rewrite code to no longer use __guard__, or convert again using --optional-chaining\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport { Program, Layout } from \"../linker\";\n\nconst debug = false;\n\nexport class Block {\n  static previous(outlet) {\n    return outlet.input != null ? outlet.input.node.owner : undefined;\n  }\n\n  constructor(delay) {\n    // Subclasses can pass `delay` to allow them to initialize before they call\n    // `@construct`.\n    if (delay == null) {\n      delay = false;\n    }\n    if (!delay) {\n      this.construct();\n    }\n  }\n\n  construct() {\n    let left;\n    if (this.namespace == null) {\n      this.namespace = Program.entry();\n    }\n    return (this.node = new Graph.Node(\n      this,\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    ));\n  }\n\n  refresh() {\n    let left;\n    return this.node.setOutlets(\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    );\n  }\n\n  clone() {\n    return new Block();\n  }\n\n  // Compile a new program starting from this block\n  compile(language, namespace) {\n    const program = new Program(\n      language,\n      namespace != null ? namespace : Program.entry(),\n      this.node.graph\n    );\n    this.call(program, 0);\n    return program.assemble();\n  }\n\n  // Link up programs into a layout, starting from this block\n  link(language, namespace) {\n    const module = this.compile(language, namespace);\n\n    const layout = new Layout(language, this.node.graph);\n    this._include(module, layout, 0);\n    this.export(layout, 0);\n    return layout.link(module);\n  }\n\n  // Subclassed methods\n  call(_program, _depth) {}\n  callback(_layout, _depth, _name, _external, _outlet) {}\n  export(_layout, _depth) {}\n\n  // Info string for debugging\n  _info(suffix) {\n    let string =\n      (this.node.owner.snippet != null\n        ? this.node.owner.snippet._name\n        : undefined) != null\n        ? this.node.owner.snippet != null\n          ? this.node.owner.snippet._name\n          : undefined\n        : this.node.owner.namespace;\n    if (suffix != null) {\n      return (string += \".\" + suffix);\n    }\n  }\n\n  // Create an outlet for a signature definition\n  _outlet(def, props) {\n    const outlet = Graph.Outlet.make(def, props);\n    outlet.meta.def = def;\n    return outlet;\n  }\n\n  // Make a call to this module in the given program\n  _call(module, program, depth) {\n    return program.call(this.node, module, depth);\n  }\n\n  // Require this module's dependencies in the given program\n  _require(module, program) {\n    return program.require(this.node, module);\n  }\n\n  // Make a call to all connected inputs\n  _inputs(module, program, depth) {\n    return (() => {\n      const result = [];\n      for (const arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.call(program, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Insert callback to this module in the given layout\n  _callback(module, layout, depth, name, external, outlet) {\n    return layout.callback(this.node, module, depth, name, external, outlet);\n  }\n\n  // Include this module in the given layout\n  _include(module, layout, depth) {\n    return layout.include(this.node, module, depth);\n  }\n\n  // Link this module's connected callbacks\n  _link(module, layout, depth) {\n    debug && console.log(\"block::_link\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (const key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        let outlet = this.node.get(ext.name);\n        if (!outlet) {\n          throw new OutletError(\n            `External not found on ${this._info(ext.name)}`\n          );\n        }\n\n        if (outlet.meta.child != null) {\n          continue;\n        }\n\n        let parent = outlet;\n\n        // eslint-disable-next-line prefer-const\n        let block;\n        while (!block && parent) {\n          [parent, outlet] = Array.from([outlet.meta.parent, parent]);\n        }\n\n        block = Block.previous(outlet);\n        if (!block) {\n          throw new OutletError(\n            `Missing connection on ${this._info(ext.name)}`\n          );\n        }\n\n        debug && console.log(\"callback -> \", this.toString(), ext.name, outlet);\n        block.callback(layout, depth + 1, key, ext, outlet.input);\n        result.push(\n          block != null ? block.export(layout, depth + 1) : undefined\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Trace backwards to discover callbacks further up\n  _trace(module, layout, depth) {\n    debug && console.log(\"block::_trace\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (const arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.export(layout, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n}\n\nconst OutletError = function (message) {\n  const e = new Error(message);\n  e.name = \"OutletError\";\n  return e;\n};\n\nOutletError.prototype = new Error();\n\nfunction __guard__(value, transform) {\n  return typeof value !== \"undefined\" && value !== null\n    ? transform(value)\n    : undefined;\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\nexport class Call extends Block {\n  constructor(snippet) {\n    super(true);\n\n    this.snippet = snippet;\n    this.namespace = snippet.namespace;\n    this.construct();\n  }\n\n  clone() {\n    return new Call(this.snippet);\n  }\n\n  makeOutlets() {\n    const main = this.snippet.main.signature;\n    const { externals } = this.snippet;\n    const { symbols } = this.snippet;\n\n    const params = Array.from(main).map((outlet) =>\n      this._outlet(outlet, { callback: false })\n    );\n    const callbacks = Array.from(symbols).map((key) =>\n      this._outlet(externals[key], { callback: true })\n    );\n\n    return params.concat(callbacks);\n  }\n\n  call(program, depth) {\n    this._call(this.snippet, program, depth);\n    return this._inputs(this.snippet, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.snippet, layout, depth);\n    return this._trace(this.snippet, layout, depth);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Re-use a subgraph as a callback\n*/\nexport class Callback extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Callback(this.graph);\n  }\n\n  makeOutlets() {\n    let outlet;\n    this.make();\n\n    const outlets = [];\n    let ins = [];\n    let outs = [];\n\n    // Pass-through existing callbacks\n    // Collect open inputs/outputs\n    const handle = (outlet, list) => {\n      if (outlet.meta.callback) {\n        if (outlet.inout === Graph.IN) {\n          // Dupe outlet and create two-way link between cloned outlets\n          const dupe = outlet.dupe();\n          if (dupe.meta.child == null) {\n            dupe.meta.child = outlet;\n          }\n          outlet.meta.parent = dupe;\n\n          return outlets.push(dupe);\n        }\n      } else {\n        return list.push(outlet.type);\n      }\n    };\n\n    for (outlet of Array.from(this.graph.inputs())) {\n      handle(outlet, ins);\n    }\n    for (outlet of Array.from(this.graph.outputs())) {\n      handle(outlet, outs);\n    }\n\n    // Merge inputs/outputs into new callback signature\n    ins = ins.join(\",\");\n    outs = outs.join(\",\");\n    const type = `(${ins})(${outs})`;\n\n    outlets.push({\n      name: \"callback\",\n      type,\n      inout: Graph.OUT,\n      meta: {\n        callback: true,\n        def: this.subroutine.main,\n      },\n    });\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.subroutine, layout, depth);\n    return this.graph.export(layout, depth);\n  }\n\n  call(program, depth) {\n    return this._require(this.subroutine, program, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    this._include(this.subroutine, layout, depth);\n    return this._callback(\n      this.subroutine,\n      layout,\n      depth,\n      name,\n      external,\n      outlet\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Isolate a subgraph as a single node\n*/\nexport class Isolate extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Isolate(this.graph);\n  }\n\n  makeOutlets() {\n    this.make();\n\n    const outlets = [];\n\n    const seen = {};\n    const done = {};\n    for (const set of [\"inputs\", \"outputs\"]) {\n      for (const outlet of Array.from(this.graph[set]())) {\n        // Preserve name of 'return' and 'callback' outlets\n        let name = undefined;\n        if (\n          [\"return\", \"callback\"].includes(outlet.hint) &&\n          outlet.inout === Graph.OUT\n        ) {\n          name = outlet.hint;\n        }\n\n        // Unless it already exists\n        if (seen[name] != null) {\n          name = undefined;\n        }\n\n        // Dupe outlet and remember link to original\n        const dupe = outlet.dupe(name);\n        if (dupe.meta.child == null) {\n          dupe.meta.child = outlet;\n        }\n        outlet.meta.parent = dupe;\n        if (name != null) {\n          seen[name] = true;\n        }\n        done[outlet.name] = dupe;\n\n        outlets.push(dupe);\n      }\n    }\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  call(program, depth) {\n    this._call(this.subroutine, program, depth);\n    return this._inputs(this.subroutine, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    // Link up with normal inputs\n    this._link(this.subroutine, layout, depth);\n    this._trace(this.subroutine, layout, depth);\n\n    // Export callbacks needed to call the subroutine\n    return this.graph.export(layout, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    outlet = outlet.meta.child;\n    return outlet.node.owner.callback(layout, depth, name, external, outlet);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\n/*\n  Join multiple disconnected nodes\n*/\nexport class Join extends Block {\n  constructor(nodes) {\n    super(true);\n    this.nodes = nodes;\n    this.construct();\n  }\n\n  clone() {\n    return new Join(this.nodes);\n  }\n\n  makeOutlets() {\n    return [];\n  }\n\n  call(program, depth) {\n    return (() => {\n      const result = [];\n      for (const node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.call(program, depth));\n      }\n      return result;\n    })();\n  }\n\n  export(layout, depth) {\n    return (() => {\n      const result = [];\n      for (const node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.export(layout, depth));\n      }\n      return result;\n    })();\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Dump graph for debug/visualization purposes\nimport * as Block from \"../block\";\n\nexport const serialize = function (graph) {\n  const nodes = [];\n  const links = [];\n\n  for (const node of Array.from(graph.nodes)) {\n    let outlet;\n    const record = {\n      // Data\n      id: node.id,\n      name: null,\n      type: null,\n      depth: null,\n      graph: null,\n      inputs: [],\n      outputs: [],\n    };\n\n    nodes.push(record);\n\n    const { inputs } = record;\n    const { outputs } = record;\n\n    const block = node.owner;\n\n    if (block instanceof Block.Call) {\n      record.name = block.snippet._name;\n      record.type = \"call\";\n      record.code = block.snippet._original;\n    } else if (block instanceof Block.Callback) {\n      record.name = \"Callback\";\n      record.type = \"callback\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Isolate) {\n      record.name = \"Isolate\";\n      record.type = \"isolate\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Join) {\n      record.name = \"Join\";\n      record.type = \"join\";\n    } else if (block != null) {\n      if (record.name == null) {\n        record.name = block.name != null ? block.name : block.type;\n      }\n      if (record.type == null) {\n        record.type = block.type;\n      }\n      if (record.code == null) {\n        record.code = block.code;\n      }\n      if (block.graph != null) {\n        record.graph = serialize(block.graph);\n      }\n    }\n\n    const format = function (type) {\n      type = type.replace(\")(\", \")→(\");\n      return (type = type.replace(\"()\", \"\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      inputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: outlet.input == null,\n      });\n    }\n\n    for (outlet of Array.from(node.outputs)) {\n      outputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: !outlet.output.length,\n      });\n\n      for (const other of Array.from(outlet.output)) {\n        links.push({\n          from: node.id,\n          out: outlet.id,\n          to: other.node.id,\n          in: other.id,\n          type: format(outlet.type),\n        });\n      }\n    }\n  }\n\n  return { nodes, links };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Hash string into a 32-bit key (murmurhash3)\nconst c1 = 0xcc9e2d51;\nconst c2 = 0x1b873593;\nconst c3 = 0xe6546b64;\nconst c4 = 0x85ebca6b;\nconst c5 = 0xc2b2ae35;\n\n// Fix imul in old/broken browsers\nlet imul = function (a, b) {\n  const ah = (a >>> 16) & 0xffff;\n  const al = a & 0xffff;\n  const bh = (b >>> 16) & 0xffff;\n  const bl = b & 0xffff;\n  return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\n};\n\nif (Math.imul != null) {\n  const test = Math.imul(0xffffffff, 5);\n  if (test === -5) {\n    ({ imul } = Math);\n  }\n}\n\nexport const hash = function (string) {\n  let h;\n  const n = string.length;\n  let m = Math.floor(n / 2);\n  let j = (h = 0);\n\n  const next = () => string.charCodeAt(j++);\n  const iterate = function (a, b) {\n    let k = a | (b << 16); // two utf-16 words\n    k ^= k << 9; // whitening for ascii-only strings\n\n    k = imul(k, c1);\n    k = (k << 15) | (k >>> 17);\n    k = imul(k, c2);\n\n    h ^= k;\n\n    h = (h << 13) | (h >>> 19);\n    h = imul(h, 5);\n    return (h = (h + c3) | 0);\n  };\n\n  while (m--) {\n    iterate(next(), next());\n  }\n  if (n & 1) {\n    iterate(next(), 0);\n  }\n\n  h ^= n;\n  h ^= h >>> 16;\n  h = imul(h, c4);\n  h ^= h >>> 13;\n  h = imul(h, c5);\n\n  return (h ^= h >>> 16);\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { hash } from \"../factory/hash\";\n\nconst trim = (string) => (\"\" + string).replace(/^\\s+|\\s+$/g, \"\");\n\nconst cssColor = (r, g, b, alpha) =>\n  \"rgba(\" + [r, g, b, alpha].join(\", \") + \")\";\n\nconst hashColor = function (string, alpha) {\n  if (alpha == null) {\n    alpha = 1;\n  }\n  const color = hash(string) ^ 0x123456;\n\n  let r = color & 0xff;\n  let g = (color >>> 8) & 0xff;\n  let b = (color >>> 16) & 0xff;\n\n  const max = Math.max(r, g, b);\n  const norm = 140 / max;\n  const min = Math.round(max / 3);\n\n  r = Math.min(255, Math.round(norm * Math.max(r, min)));\n  g = Math.min(255, Math.round(norm * Math.max(g, min)));\n  b = Math.min(255, Math.round(norm * Math.max(b, min)));\n\n  return cssColor(r, g, b, alpha);\n};\n\nconst escapeText = function (string) {\n  string = string != null ? string : \"\";\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/'/g, \"&#39;\")\n    .replace(/\"/g, \"&quot;\");\n};\n\nexport const process = function (data) {\n  const links = [];\n  const el = _markup(data, links);\n  el.update = () => connect(el, links);\n  _activate(el);\n  return el;\n};\n\nconst _activate = function (el) {\n  const codes = el.querySelectorAll(\".shadergraph-code\");\n  return Array.from(codes).map((code) =>\n    (function () {\n      const popup = code;\n      popup.parentNode.classList.add(\"shadergraph-has-code\");\n      return popup.parentNode.addEventListener(\n        \"click\",\n        (_event) =>\n          (popup.style.display = {\n            block: \"none\",\n            none: \"block\",\n          }[popup.style.display || \"none\"])\n      );\n    })()\n  );\n};\n\nconst _order = function (data) {\n  let link, node;\n  const nodeMap = {};\n  const linkMap = {};\n  for (node of Array.from(data.nodes)) {\n    nodeMap[node.id] = node;\n  }\n\n  for (link of Array.from(data.links)) {\n    if (linkMap[link.from] == null) {\n      linkMap[link.from] = [];\n    }\n    linkMap[link.from].push(link);\n  }\n\n  const recurse = function (node, depth) {\n    let next;\n    if (depth == null) {\n      depth = 0;\n    }\n    node.depth = Math.max(node.depth != null ? node.depth : 0, depth);\n    if ((next = linkMap[node.id])) {\n      for (link of Array.from(next)) {\n        recurse(nodeMap[link.to], depth + 1);\n      }\n    }\n    return null;\n  };\n\n  for (node of Array.from(data.nodes)) {\n    if (node.depth == null) {\n      recurse(node);\n    }\n  }\n\n  return null;\n};\n\nconst _markup = function (data, links) {\n  let column;\n  _order(data);\n\n  const wrapper = document.createElement(\"div\");\n  wrapper.classList.add(\"shadergraph-graph\");\n\n  const columns = [];\n  const outlets = {};\n\n  for (const node of Array.from(data.nodes)) {\n    let outlet;\n    const block = document.createElement(\"div\");\n    block.classList.add(\"shadergraph-node\");\n    block.classList.add(`shadergraph-node-${node.type}`);\n\n    block.innerHTML = `\\\n<div class=\"shadergraph-header\">${escapeText(node.name)}</div>\\\n`;\n\n    const addOutlet = function (outlet, inout) {\n      const color = hashColor(outlet.type);\n\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-outlet\");\n      div.classList.add(`shadergraph-outlet-${inout}`);\n      div.innerHTML = `\\\n<div class=\"shadergraph-point\" style=\"background: ${color}\"></div>\n<div class=\"shadergraph-type\" style=\"color: ${color}\">${escapeText(\n        outlet.type\n      )}</div>\n<div class=\"shadergraph-name\">${escapeText(outlet.name)}</div>\\\n`;\n      block.appendChild(div);\n\n      return (outlets[outlet.id] = div.querySelector(\".shadergraph-point\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      addOutlet(outlet, \"in\");\n    }\n    for (outlet of Array.from(node.outputs)) {\n      addOutlet(outlet, \"out\");\n    }\n\n    if (node.graph != null) {\n      block.appendChild(_markup(node.graph, links));\n    } else {\n      const clear = document.createElement(\"div\");\n      clear.classList.add(\"shadergraph-clear\");\n      block.appendChild(clear);\n    }\n\n    if (node.code != null) {\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-code\");\n      div.innerHTML = escapeText(trim(node.code));\n      block.appendChild(div);\n    }\n\n    column = columns[node.depth];\n    if (column == null) {\n      column = document.createElement(\"div\");\n      column.classList.add(\"shadergraph-column\");\n      columns[node.depth] = column;\n    }\n    column.appendChild(block);\n  }\n\n  for (column of Array.from(columns)) {\n    if (column != null) {\n      wrapper.appendChild(column);\n    }\n  }\n\n  for (const link of Array.from(data.links)) {\n    const color = hashColor(link.type);\n\n    links.push({\n      color,\n      out: outlets[link.out],\n      in: outlets[link.in],\n    });\n  }\n\n  return wrapper;\n};\n\nconst sqr = (x) => x * x;\n\nconst path = function (x1, y1, x2, y2) {\n  let h;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const d = Math.sqrt(sqr(dx) + sqr(dy));\n\n  const vert = Math.abs(dy) > Math.abs(dx);\n  if (vert) {\n    const mx = (x1 + x2) / 2;\n    const my = (y1 + y2) / 2;\n\n    const f = dy > 0 ? 0.3 : -0.3;\n    h = Math.min(Math.abs(dx) / 2, 20 + d / 8);\n\n    return [\n      \"M\",\n      x1,\n      y1,\n      \"C\",\n      x1 + h,\n      y1 + \",\",\n      mx,\n      my - d * f,\n      mx,\n      my,\n      \"C\",\n      mx,\n      my + d * f,\n      x2 - h,\n      y2 + \",\",\n      x2,\n      y2,\n    ].join(\" \");\n  } else {\n    h = Math.min(Math.abs(dx) / 2.5, 20 + d / 4);\n\n    return [\"M\", x1, y1, \"C\", x1 + h, y1 + \",\", x2 - h, y2 + \",\", x2, y2].join(\n      \" \"\n    );\n  }\n};\n\nconst makeSVG = function (tag) {\n  if (tag == null) {\n    tag = \"svg\";\n  }\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n};\n\nconst connect = function (element, links) {\n  let link;\n  if (element.parentNode == null) {\n    return;\n  }\n\n  const ref = element.getBoundingClientRect();\n\n  for (link of Array.from(links)) {\n    const a = link.out.getBoundingClientRect();\n    const b = link.in.getBoundingClientRect();\n\n    link.coords = {\n      x1: (a.left + a.right) / 2 - ref.left,\n      y1: (a.top + a.bottom) / 2 - ref.top,\n      x2: (b.left + b.right) / 2 - ref.left,\n      y2: (b.top + b.bottom) / 2 - ref.top,\n    };\n  }\n\n  let svg = element.querySelector(\"svg\");\n  if (svg != null) {\n    element.removeChild(svg);\n  }\n\n  let box = element;\n  while (box.parentNode && box.offsetHeight === 0) {\n    box = box.parentNode;\n  }\n\n  svg = makeSVG();\n  svg.setAttribute(\"width\", box.offsetWidth);\n  svg.setAttribute(\"height\", box.offsetHeight);\n\n  for (link of Array.from(links)) {\n    const c = link.coords;\n\n    const line = makeSVG(\"path\");\n    line.setAttribute(\"d\", path(c.x1, c.y1, c.x2, c.y2));\n    line.setAttribute(\"stroke\", link.color);\n    line.setAttribute(\"stroke-width\", 3);\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.appendChild(line);\n  }\n\n  return element.appendChild(svg);\n};\n\nexport const overlay = function (contents) {\n  const div = document.createElement(\"div\");\n  div.setAttribute(\"class\", \"shadergraph-overlay\");\n\n  const close = document.createElement(\"div\");\n  close.setAttribute(\"class\", \"shadergraph-close\");\n  close.innerHTML = \"&times;\";\n\n  const view = document.createElement(\"div\");\n  view.setAttribute(\"class\", \"shadergraph-view\");\n\n  const inside = document.createElement(\"div\");\n  inside.setAttribute(\"class\", \"shadergraph-inside\");\n\n  inside.appendChild(contents);\n  view.appendChild(inside);\n  div.appendChild(view);\n  div.appendChild(close);\n\n  close.addEventListener(\"click\", () => div.parentNode.removeChild(div));\n\n  return div;\n};\n\nconst wrap = function (markup) {\n  if (markup instanceof Node) {\n    return markup;\n  }\n  const p = document.createElement(\"span\");\n  p.innerText = markup != null ? markup : \"\";\n  return p;\n};\n\nexport const merge = function (markup) {\n  if (markup.length !== 1) {\n    let el;\n    const div = document.createElement(\"div\");\n    for (el of Array.from(markup)) {\n      div.appendChild(wrap(el));\n    }\n    div.update = () =>\n      (() => {\n        const result = [];\n        for (el of Array.from(markup)) {\n          result.push(\n            typeof el.update === \"function\" ? el.update() : undefined\n          );\n        }\n        return result;\n      })();\n    return div;\n  } else {\n    return wrap(markup[0]);\n  }\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport { serialize as _serialize } from \"./serialize\";\nimport * as _markup from \"./markup\";\n\nexport const serialize = _serialize;\nexport const markup = _markup;\n\nconst _visualize = function (graph) {\n  if (!graph) {\n    return;\n  }\n  if (!graph.nodes) {\n    return graph;\n  }\n\n  const data = serialize(graph);\n  return markup.process(data);\n};\n\nconst resolve = function (arg) {\n  if (arg == null) {\n    return arg;\n  }\n  if (arg instanceof Array) {\n    return arg.map(resolve);\n  }\n  if (arg.vertex != null && arg.fragment != null) {\n    return [resolve(arg.vertex, resolve(arg.fragment))];\n  }\n  if (arg._graph != null) {\n    return arg._graph;\n  }\n  if (arg.graph != null) {\n    return arg.graph;\n  }\n  return arg;\n};\n\nconst merge = function (args) {\n  let out = [];\n  for (const arg of Array.from(args)) {\n    if (arg instanceof Array) {\n      out = out.concat(merge(arg));\n    } else if (arg != null) {\n      out.push(arg);\n    }\n  }\n  return out;\n};\n\nexport const visualize = function () {\n  const list = merge(resolve([].slice.call(arguments)));\n  return markup.merge(\n    Array.from(list)\n      .filter((graph) => graph)\n      .map((graph) => _visualize(graph))\n  );\n};\n\nexport const inspect = function () {\n  const contents = visualize.apply(null, arguments);\n  const element = markup.overlay(contents);\n\n  for (const el of Array.from(\n    document.querySelectorAll(\".shadergraph-overlay\")\n  )) {\n    el.remove();\n  }\n  document.body.appendChild(element);\n  contents.update();\n\n  return element;\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport * as Block from \"../block\";\nimport * as Visualize from \"../visualize\";\n\n/*\n  Chainable factory\n\n  Exposes methods to build a graph incrementally\n*/\nexport class Factory {\n  constructor(language, fetch, config) {\n    this.language = language;\n    this.fetch = fetch;\n    this.config = config;\n    this.graph();\n  }\n\n  // Combined call/concat shortcut\n  pipe(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._concat(name);\n    } else if (name != null) {\n      this._call(name, uniforms, namespace, defines);\n    }\n    return this;\n  }\n\n  // Old name\n  call(name, uniforms, namespace, defines) {\n    return this.pipe(name, uniforms, namespace, defines);\n  }\n\n  // Combined callback/import shortcut\n  require(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._import(name);\n    } else if (name != null) {\n      this.callback();\n      this._call(name, uniforms, namespace, defines);\n      this.end();\n    }\n    return this;\n  }\n\n  // Old name\n  import(name, uniforms, namespace, defines) {\n    return this.require(name, uniforms, namespace, defines);\n  }\n\n  // Create parallel branches that connect as one block to the end\n  // (one outgoing connection per outlet)\n  split() {\n    this._group(\"_combine\", true);\n    return this;\n  }\n\n  // Create parallel branches that fan out from the end\n  // (multiple outgoing connections per outlet)\n  fan() {\n    this._group(\"_combine\", false);\n    return this;\n  }\n\n  // Create isolated subgraph\n  isolate() {\n    this._group(\"_isolate\");\n    return this;\n  }\n\n  // Create callback subgraph\n  callback() {\n    this._group(\"_callback\");\n    return this;\n  }\n\n  // Next branch in group\n  next() {\n    this._next();\n    return this;\n  }\n\n  // Connect branches to previous tail and add pass-through from end\n  pass() {\n    const pass = this._stack[2].end;\n    this.end();\n    this._state.end = this._state.end.concat(pass);\n    return this;\n  }\n\n  // Leave nested branches and join up with main graph,\n  // applying stored op along the way\n  end() {\n    const [sub, main] = Array.from(this._exit());\n    const { op } = sub;\n    if (this[op]) {\n      this[op](sub, main);\n    }\n    return this;\n  }\n\n  // Old name\n  join() {\n    return this.end();\n  }\n\n  // Return finalized graph / reset factory\n  graph() {\n    // Pop remaining stack\n    while ((this._stack != null ? this._stack.length : undefined) > 1) {\n      this.end();\n    }\n\n    // Remember terminating node(s) of graph\n    if (this._graph) {\n      this._tail(this._state, this._graph);\n    }\n\n    const graph = this._graph;\n\n    this._graph = new Graph();\n    this._state = new State();\n    this._stack = [this._state];\n\n    return graph;\n  }\n\n  // Compile shortcut (graph is thrown away)\n  compile(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().compile(namespace);\n  }\n\n  // Link shortcut (graph is thrown away)\n  link(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().link(namespace);\n  }\n\n  // Serialize for debug\n  serialize() {\n    return Visualize.serialize(this._graph);\n  }\n\n  // Return true if empty\n  empty() {\n    return this._graph.nodes.length === 0;\n  }\n\n  // Concatenate existing factory onto tail\n  // Retains original factory\n  _concat(factory) {\n    // Ignore empty concat\n    let block;\n    if (factory._state.nodes.length === 0) {\n      return this;\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Isolate(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Add existing factory as callback\n  // Retains original factory\n  _import(factory) {\n    // Check for empty require\n    let block;\n    if (factory._state.nodes.length === 0) {\n      throw \"Can't import empty callback\";\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Callback(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Connect parallel branches to tail\n  _combine(sub, main) {\n    for (const to of Array.from(sub.start)) {\n      for (const from of Array.from(main.end)) {\n        from.connect(to, sub.multi);\n      }\n    }\n\n    main.end = sub.end;\n    return (main.nodes = main.nodes.concat(sub.nodes));\n  }\n\n  // Make subgraph and connect to tail\n  _isolate(sub, _main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Isolate(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Convert to callback and connect to tail\n  _callback(sub, _main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Callback(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Create next call block\n  _call(name, uniforms, namespace, defines) {\n    const snippet = this.fetch(name);\n    snippet.bind(this.config, uniforms, namespace, defines);\n    const block = new Block.Call(snippet);\n    return this._auto(block);\n  }\n\n  // Move current state into subgraph\n  _subgraph(sub) {\n    const subgraph = new Graph(null, this._graph);\n    subgraph.adopt(sub.nodes);\n    return subgraph;\n  }\n\n  // Finalize graph tail\n  _tail(state, graph) {\n    // Merge (unique) terminating ends into single tail node if needed\n    let tail = state.end.concat(state.tail);\n    tail = tail.filter((node, i) => tail.indexOf(node) === i);\n\n    if (tail.length > 1) {\n      tail = new Block.Join(tail);\n      tail = [tail.node];\n      this._graph.add(tail);\n    }\n\n    // Save single endpoint\n    graph.tail = tail[0];\n    state.end = tail;\n    state.tail = [];\n\n    if (!graph.tail) {\n      throw new Error(\"Cannot finalize empty graph\");\n    }\n\n    // Add compile/link/export/inspect shortcut methods\n    graph.compile = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.compile(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.link = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.link(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.export = (layout, depth) => {\n      return graph.tail.owner.export(layout, depth);\n    };\n\n    return (graph.inspect = (message = null) =>\n      Visualize.inspect(message, graph));\n  }\n\n  // Create group for branches or callbacks\n  _group(op, multi) {\n    this._push(op, multi); // Accumulator\n    this._push(); // Current\n    return this;\n  }\n\n  // Merge branch into accumulator and reset state\n  _next() {\n    const sub = this._pop();\n\n    this._state.start = this._state.start.concat(sub.start);\n    this._state.end = this._state.end.concat(sub.end);\n    this._state.nodes = this._state.nodes.concat(sub.nodes);\n    this._state.tail = this._state.tail.concat(sub.tail);\n\n    return this._push();\n  }\n\n  // Exit nested branches\n  _exit() {\n    this._next();\n    this._pop();\n    return [this._pop(), this._state];\n  }\n\n  // State stack\n  _push(op, multi) {\n    this._stack.unshift(new State(op, multi));\n    return (this._state = this._stack[0]);\n  }\n\n  _pop() {\n    let left;\n    this._state = this._stack[1];\n    if (this._state == null) {\n      this._state = new State();\n    }\n    return (left = this._stack.shift()) != null ? left : new State();\n  }\n\n  // Auto append or insert depending on whether we have inputs\n  _auto(block) {\n    if (block.node.inputs.length) {\n      return this._append(block);\n    } else {\n      return this._insert(block);\n    }\n  }\n\n  // Add block and connect to end\n  _append(block) {\n    let end;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (end of Array.from(this._state.end)) {\n      end.connect(node);\n    }\n\n    if (!this._state.start.length) {\n      this._state.start = [node];\n    }\n    this._state.end = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Add block and connect to start\n  _prepend(block) {\n    let start;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (start of Array.from(this._state.start)) {\n      node.connect(start);\n    }\n\n    if (!this._state.end.length) {\n      this._state.end = [node];\n    }\n    this._state.start = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Insert loose block\n  _insert(block) {\n    const { node } = block;\n    this._graph.add(node);\n\n    this._state.start.push(node);\n    this._state.end.push(node);\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      return this._state.tail.push(node);\n    }\n  }\n}\n\nclass State {\n  constructor(op = null, multi, start, end, nodes, tail) {\n    this.op = op;\n    if (multi == null) {\n      multi = false;\n    }\n    this.multi = multi;\n    if (start == null) {\n      start = [];\n    }\n    this.start = start;\n    if (end == null) {\n      end = [];\n    }\n    this.end = end;\n    if (nodes == null) {\n      nodes = [];\n    }\n    this.nodes = nodes;\n    if (tail == null) {\n      tail = [];\n    }\n    this.tail = tail;\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Visualize from \"../visualize\";\n\nconst debug = false;\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n\nexport class Material {\n  constructor(vertex, fragment) {\n    this.vertex = vertex;\n    this.fragment = fragment;\n    if (debug) {\n      this.tock = tick();\n    }\n  }\n\n  build(options) {\n    return this.link(options);\n  }\n\n  link(options) {\n    if (options == null) {\n      options = {};\n    }\n    const uniforms = {};\n    const varyings = {};\n    const attributes = {};\n\n    const vertex = this.vertex.link(\"main\");\n    const fragment = this.fragment.link(\"main\");\n\n    for (const shader of [vertex, fragment]) {\n      for (const key in shader.uniforms) {\n        const value = shader.uniforms[key];\n        uniforms[key] = value;\n      }\n      for (const key in shader.varyings) {\n        const value = shader.varyings[key];\n        varyings[key] = value;\n      }\n      for (const key in shader.attributes) {\n        const value = shader.attributes[key];\n        attributes[key] = value;\n      }\n    }\n\n    options.vertexShader = vertex.code;\n    options.vertexGraph = vertex.graph;\n    options.fragmentShader = fragment.code;\n    options.fragmentGraph = fragment.graph;\n    options.attributes = attributes;\n    options.uniforms = uniforms;\n    options.varyings = varyings;\n    options.inspect = () =>\n      Visualize.inspect(\n        \"Vertex Shader\",\n        vertex,\n        \"Fragment Shader\",\n        fragment.graph\n      );\n\n    if (debug) {\n      this.tock(\"Material build\");\n    }\n\n    return options;\n  }\n\n  inspect() {\n    return Visualize.inspect(\n      \"Vertex Shader\",\n      this.vertex,\n      \"Fragment Shader\",\n      this.fragment.graph\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Snippet library\n\n  Takes:\n    - Hash of snippets: named library\n    - (name) -> getter: dynamic lookup\n    - nothing:          no library, only pass in inline source code\n\n  If 'name' contains any of \"{;(#\" it is assumed to be direct GLSL code.\n*/\nexport const library = function (language, snippets, load) {\n  let callback = null;\n  let used = {};\n\n  if (snippets != null) {\n    if (typeof snippets === \"function\") {\n      callback = (name) => load(language, name, snippets(name));\n    } else if (typeof snippets === \"object\") {\n      callback = function (name) {\n        if (snippets[name] == null) {\n          throw new Error(`Unknown snippet \\`${name}\\``);\n        }\n        return load(language, name, snippets[name]);\n      };\n    }\n  }\n\n  const inline = (code) => load(language, \"\", code);\n\n  if (callback == null) {\n    return inline;\n  }\n\n  const fetch = function (name) {\n    if (name.match(/[{;]/)) {\n      return inline(name);\n    }\n    used[name] = true;\n    return callback(name);\n  };\n\n  fetch.used = function (_used) {\n    if (_used == null) {\n      _used = used;\n    }\n    return (used = _used);\n  };\n\n  return fetch;\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Least-recently-used queue for key expiry via linked list\nexport const queue = function (limit) {\n  if (limit == null) {\n    limit = 100;\n  }\n  const map = {};\n\n  let head = null;\n  let tail = null;\n  let count = 0;\n\n  // Insert at front\n  const add = function (item) {\n    item.prev = null;\n    item.next = head;\n\n    if (head != null) {\n      head.prev = item;\n    }\n\n    head = item;\n    if (tail == null) {\n      return (tail = item);\n    }\n  };\n\n  // Remove from list\n  const remove = function (item) {\n    const { prev } = item;\n    const { next } = item;\n\n    if (prev != null) {\n      prev.next = next;\n    }\n    if (next != null) {\n      next.prev = prev;\n    }\n\n    if (head === item) {\n      head = next;\n    }\n    if (tail === item) {\n      return (tail = prev);\n    }\n  };\n\n  // Push key to top of list\n  return function (key) {\n    let dead, item;\n    if ((item = map[key]) && item !== head) {\n      // Already in queue\n      remove(item);\n      add(item);\n    } else {\n      // Check capacity\n      if (count === limit) {\n        // Pop tail\n        dead = tail.key;\n        remove(tail);\n\n        // Expire key\n        delete map[dead];\n      } else {\n        count++;\n      }\n\n      // Replace head\n      item = { next: head, prev: null, key };\n      add(item);\n\n      // Map record for lookup\n      map[key] = item;\n    }\n\n    // Return expired key\n    return dead;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Cache decorator\n  Fetches snippets once, clones for reuse\n  Inline code is hashed to avoid bloat\n*/\nimport { queue } from \"./queue\";\nimport { hash } from \"./hash\";\n\nexport const cache = function (fetch) {\n  const cached = {};\n  const push = queue(100);\n\n  // Snippet factory\n  return function (name) {\n    const key = name.length > 32 ? \"##\" + hash(name).toString(16) : name;\n\n    // Push new key onto queue, see if an old key expired\n    const expire = push(key);\n    if (expire != null) {\n      delete cached[expire];\n    }\n\n    // Clone cached snippet\n    if (cached[key] == null) {\n      cached[key] = fetch(name);\n    }\n    return cached[key].clone();\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Compile snippet back into GLSL, but with certain symbols replaced by prefixes / placeholders\n*/\n\nexport const compile = function (program) {\n  const { code, signatures } = program;\n\n  // Prepare list of placeholders\n  const placeholders = replaced(signatures);\n\n  // Compile\n  const assembler = string_compiler(code, placeholders);\n\n  return [signatures, assembler];\n};\n\nconst replaced = function (signatures) {\n  const out = {};\n  const s = (sig) => (out[sig.name] = true);\n\n  s(signatures.main);\n\n  // Prefix all global symbols\n  for (const key of [\n    \"external\",\n    \"internal\",\n    \"varying\",\n    \"uniform\",\n    \"attribute\",\n  ]) {\n    for (const sig of signatures[key]) {\n      s(sig);\n    }\n  }\n\n  return out;\n};\n\n/*\nString-replacement based compiler\n*/\nconst string_compiler = function (code, placeholders) {\n  // Make regexp for finding placeholders\n  // Replace on word boundaries\n  let key;\n  const re = new RegExp(\n    \"\\\\b(\" +\n      (() => {\n        const result = [];\n        for (key in placeholders) {\n          result.push(key);\n        }\n        return result;\n      })().join(\"|\") +\n      \")\\\\b\",\n    \"g\"\n  );\n\n  // Strip comments\n  code = code.replace(/\\/\\/[^\\n]*/g, \"\");\n  code = code.replace(/\\/\\*([^*]|\\*[^/])*\\*\\//g, \"\");\n\n  // Strip all preprocessor commands (lazy)\n  //code = code.replace /^#[^\\n]*/mg, ''\n\n  // Assembler function that takes namespace prefix and exceptions\n  // and returns GLSL source code\n  return function (prefix, exceptions, defines) {\n    let key;\n    if (prefix == null) {\n      prefix = \"\";\n    }\n    if (exceptions == null) {\n      exceptions = {};\n    }\n    if (defines == null) {\n      defines = {};\n    }\n    const replace = {};\n    for (key in placeholders) {\n      replace[key] = exceptions[key] != null ? key : prefix + key;\n    }\n\n    const compiled = code.replace(re, (key) => replace[key]);\n\n    const defs = (() => {\n      const result1 = [];\n      for (key in defines) {\n        const value = defines[key];\n        result1.push(`#define ${key} ${value}`);\n      }\n      return result1;\n    })();\n    if (defs.length) {\n      defs.push(\"\");\n    }\n    return defs.join(\"\\n\") + compiled;\n  };\n};\n","class Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector2.prototype.isVector2 = true;\n\nexport { Vector2 };\n","const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toUpperCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t\t } else {\n\n\t\treturn 0;\n\n\t\t }\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t// Park-Miller algorithm\n\n\t_seed = _seed * 16807 % 2147483647;\n\n\treturn ( _seed - 1 ) / 2147483646;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\n\n\n\nexport {\n\tDEG2RAD,\n\tRAD2DEG,\n\tgenerateUUID,\n\tclamp,\n\teuclideanModulo,\n\tmapLinear,\n\tinverseLerp,\n\tlerp,\n\tdamp,\n\tpingpong,\n\tsmoothstep,\n\tsmootherstep,\n\trandInt,\n\trandFloat,\n\trandFloatSpread,\n\tseededRandom,\n\tdegToRad,\n\tradToDeg,\n\tisPowerOfTwo,\n\tceilPowerOfTwo,\n\tfloorPowerOfTwo,\n\tsetQuaternionFromProperEuler,\n};\n","import * as MathUtils from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.' );\n\t\treturn qm.slerpQuaternions( qa, qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\tthis.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nexport { Quaternion };\n","import * as MathUtils from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","class Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector4.prototype.isVector4 = true;\n\nexport { Vector4 };\n","class Matrix3 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nMatrix3.prototype.isMatrix3 = true;\n\nexport { Matrix3 };\n","import { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nMatrix4.prototype.isMatrix4 = true;\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// AST node parsers\n\nimport { Vector2 } from \"three/src/math/Vector2.js\";\nimport { Vector3 } from \"three/src/math/Vector3.js\";\nimport { Vector4 } from \"three/src/math/Vector4.js\";\nimport { Matrix3 } from \"three/src/math/Matrix3.js\";\nimport { Matrix4 } from \"three/src/math/Matrix4.js\";\n\nexport const decl = {};\n\ndecl.in = 0;\ndecl.out = 1;\ndecl.inout = 2;\n\nconst get = (n) => n.token.data;\n\ndecl.node = function (node) {\n  if (\n    (node.children[5] != null ? node.children[5].type : undefined) ===\n    \"function\"\n  ) {\n    return decl.function(node);\n  } else if ((node.token != null ? node.token.type : undefined) === \"keyword\") {\n    return decl.external(node);\n  }\n};\n\ndecl.external = function (node) {\n  //    console.log 'external', node\n  let c = node.children;\n\n  let storage = get(c[1]);\n  const type = get(c[4]);\n  const list = c[5];\n\n  if (![\"attribute\", \"uniform\", \"varying\"].includes(storage)) {\n    storage = \"global\";\n  }\n\n  const out = [];\n\n  for (let i = 0; i < list.children.length; i++) {\n    c = list.children[i];\n    if (c.type === \"ident\") {\n      const ident = get(c);\n      const next = list.children[i + 1];\n      const quant = (next != null ? next.type : undefined) === \"quantifier\";\n\n      out.push({\n        decl: \"external\",\n        storage,\n        type,\n        ident,\n        quant: !!quant,\n        count: quant,\n      });\n    }\n  }\n\n  return out;\n};\n\ndecl.function = function (node) {\n  const c = node.children;\n\n  //    console.log 'function', node\n\n  const storage = get(c[1]);\n  const type = get(c[4]);\n  const func = c[5];\n  const ident = get(func.children[0]);\n  const args = func.children[1];\n  const body = func.children[2];\n\n  const decls = Array.from(args.children).map((child) => decl.argument(child));\n\n  return [\n    {\n      decl: \"function\",\n      storage,\n      type,\n      ident,\n      body: !!body,\n      args: decls,\n    },\n  ];\n};\n\ndecl.argument = function (node) {\n  const c = node.children;\n\n  //    console.log 'argument', node\n\n  const storage = get(c[1]);\n  const inout = get(c[2]);\n  const type = get(c[4]);\n  const list = c[5];\n  const ident = get(list.children[0]);\n  const quant = list.children[1];\n\n  const count = quant ? quant.children[0].token.data : undefined;\n\n  return {\n    decl: \"argument\",\n    storage,\n    inout,\n    type,\n    ident,\n    quant: !!quant,\n    count,\n  };\n};\n\ndecl.param = function (dir, storage, spec, quant, count) {\n  let prefix = [];\n  if (storage != null) {\n    prefix.push(storage);\n  }\n  if (spec != null) {\n    prefix.push(spec);\n  }\n  prefix.push(\"\");\n\n  prefix = prefix.join(\" \");\n  const suffix = quant ? \"[\" + count + \"]\" : \"\";\n  if (dir !== \"\") {\n    dir += \" \";\n  }\n\n  const f = (name, long) => (long ? dir : \"\") + `${prefix}${name}${suffix}`;\n  f.split = (dir) => decl.param(dir, storage, spec, quant, count);\n\n  return f;\n};\n\n// Three.js sugar\nconst win = typeof window !== \"undefined\";\nconst threejs = win && !!window.THREE;\n\nconst defaults = {\n  int: 0,\n  float: 0,\n  vec2: threejs ? Vector2 : null,\n  vec3: threejs ? Vector3 : null,\n  vec4: threejs ? Vector4 : null,\n  mat2: null,\n  mat3: threejs ? Matrix3 : null,\n  mat4: threejs ? Matrix4 : null,\n  sampler2D: 0,\n  samplerCube: 0,\n};\n\nconst three = {\n  int: \"i\",\n  float: \"f\",\n  vec2: \"v2\",\n  vec3: \"v3\",\n  vec4: \"v4\",\n  mat2: \"m2\",\n  mat3: \"m3\",\n  mat4: \"m4\",\n  sampler2D: \"t\",\n  samplerCube: \"t\",\n};\n\ndecl.type = function (name, spec, quant, count, dir, storage) {\n  const dirs = {\n    in: decl.in,\n    out: decl.out,\n    inout: decl.inout,\n  };\n\n  const storages = { const: \"const\" };\n\n  let type = three[spec];\n  if (quant) {\n    type += \"v\";\n  }\n\n  let value = defaults[spec];\n  if (value != null ? value.call : undefined) {\n    value = new value();\n  }\n  if (quant) {\n    value = [value];\n  }\n\n  const inout = dirs[dir] != null ? dirs[dir] : dirs.in;\n  storage = storages[storage];\n\n  const param = decl.param(dir, storage, spec, quant, count);\n  return new Definition(name, type, spec, param, value, inout);\n};\n\nclass Definition {\n  constructor(name, type, spec, param, value, inout, meta) {\n    this.name = name;\n    this.type = type;\n    this.spec = spec;\n    this.param = param;\n    this.value = value;\n    this.inout = inout;\n    this.meta = meta;\n  }\n\n  split() {\n    // Split inouts\n    const isIn = this.meta.shadowed != null;\n    const dir = isIn ? \"in\" : \"out\";\n    const inout = isIn ? decl.in : decl.out;\n    const param = this.param.split(dir);\n    return new Definition(\n      this.name,\n      this.type,\n      this.spec,\n      param,\n      this.value,\n      inout\n    );\n  }\n\n  copy(name, meta) {\n    return new Definition(\n      name != null ? name : this.name,\n      this.type,\n      this.spec,\n      this.param,\n      this.value,\n      this.inout,\n      meta\n    );\n  }\n}\n","export const SHADOW_ARG = \"_i_o\";\nexport const RETURN_ARG = \"return\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS201: Simplify complex destructure assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport tokenize from \"glsl-tokenizer/string\";\nimport parser from \"@sicmutils/glsl-parser/direct\";\nimport { decl } from \"./decl\";\nimport { SHADOW_ARG, RETURN_ARG } from \"./constants\";\n\nlet debug = false;\n\n/*\nparse GLSL into AST\nextract all global symbols and make type signatures\n*/\n// Parse a GLSL snippet\nexport const parse = function (name, code) {\n  const ast = parseGLSL(name, code);\n  return processAST(ast, code);\n};\n\n// Parse GLSL language into AST\nconst parseGLSL = function (name, code) {\n  let ast, tock;\n  let errors = [];\n  if (debug) {\n    tock = tick();\n  }\n\n  try {\n    const tokens = tokenize(code);\n    ast = parser(tokens);\n  } catch (e) {\n    errors = [{ message: e }];\n  }\n\n  if (debug) {\n    tock(\"GLSL Tokenize & Parse\");\n  }\n\n  const fmt = function (code) {\n    code = code.split(\"\\n\");\n    const max = (\"\" + code.length).length;\n    const pad = function (v) {\n      if ((v = \"\" + v).length < max) {\n        return (\"       \" + v).slice(-max);\n      } else {\n        return v;\n      }\n    };\n    return code.map((line, i) => `${pad(i + 1)}: ${line}`).join(\"\\n\");\n  };\n\n  if (!ast || errors.length) {\n    if (!name) {\n      name = \"(inline code)\";\n    }\n    console.warn(fmt(code));\n    for (const error of errors) {\n      console.error(`${name} -`, error.message);\n    }\n    throw new Error(\"GLSL parse error\");\n  }\n\n  return ast;\n};\n\n// Process AST for compilation\nconst processAST = function (ast, code) {\n  let tock;\n  if (debug) {\n    tock = tick();\n  }\n\n  // Walk AST tree and collect global declarations\n  const symbols = [];\n  walk(mapSymbols, collect(symbols), ast, \"\");\n\n  // Sort symbols into bins\n  const [main, internals, externals] = Array.from(sortSymbols(symbols));\n\n  // Extract storage/type signatures of symbols\n  const signatures = extractSignatures(main, internals, externals);\n\n  if (debug) {\n    tock(\"GLSL AST\");\n  }\n\n  return { ast, code, signatures };\n};\n\n// Extract functions and external symbols from AST\nconst mapSymbols = function (node, collect) {\n  switch (node.type) {\n    case \"decl\":\n      collect(decl.node(node));\n      return false;\n  }\n  return true;\n};\n\nconst collect = (out) =>\n  function (value) {\n    if (value != null) {\n      Array.from(value).map((obj) => out.push(obj));\n    }\n  };\n\n// Identify internals, externals and main function\nconst sortSymbols = function (symbols) {\n  let main = null;\n  const internals = [];\n  let externals = [];\n  const maybe = {};\n  let found = false;\n\n  for (const s of Array.from(symbols)) {\n    if (!s.body) {\n      // Unmarked globals are definitely internal\n      if (s.storage === \"global\") {\n        internals.push(s);\n\n        // Possible external\n      } else {\n        externals.push(s);\n        maybe[s.ident] = true;\n      }\n    } else {\n      // Remove earlier forward declaration\n      if (maybe[s.ident]) {\n        externals = Array.from(externals).filter((e) => e.ident !== s.ident);\n        delete maybe[s.ident];\n      }\n\n      // Internal function\n      internals.push(s);\n\n      // Last function is main\n      // unless there is a function called 'main'\n      if (s.ident === \"main\") {\n        main = s;\n        found = true;\n      } else if (!found) {\n        main = s;\n      }\n    }\n  }\n\n  return [main, internals, externals];\n};\n\n// Generate type signatures and appropriate ins/outs\nconst extractSignatures = function (main, internals, externals) {\n  let symbol;\n  const sigs = {\n    uniform: [],\n    attribute: [],\n    varying: [],\n    external: [],\n    internal: [],\n    global: [],\n    main: null,\n  };\n\n  const defn = (symbol) =>\n    decl.type(\n      symbol.ident,\n      symbol.type,\n      symbol.quant,\n      symbol.count,\n      symbol.inout,\n      symbol.storage\n    );\n\n  const func = function (symbol, inout) {\n    let d;\n    const signature = Array.from(symbol.args).map((arg) => defn(arg));\n\n    // Split inouts into in and out\n    for (d of Array.from(signature)) {\n      if (d.inout === decl.inout) {\n        const a = d;\n        const b = d.copy();\n\n        a.inout = decl.in;\n        b.inout = decl.out;\n        b.meta = { shadow: a.name };\n        b.name += SHADOW_ARG;\n        a.meta = { shadowed: b.name };\n\n        signature.push(b);\n      }\n    }\n\n    // Add output for return type\n    if (symbol.type !== \"void\") {\n      signature.unshift(decl.type(RETURN_ARG, symbol.type, false, \"\", \"out\"));\n    }\n\n    // Make type string\n    const inTypes = (() => {\n      const result = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.in) {\n          result.push(d.type);\n        }\n      }\n      return result;\n    })().join(\",\");\n    const outTypes = (() => {\n      const result1 = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.out) {\n          result1.push(d.type);\n        }\n      }\n      return result1;\n    })().join(\",\");\n    const type = `(${inTypes})(${outTypes})`;\n\n    return {\n      name: symbol.ident,\n      type,\n      signature,\n      inout,\n      spec: symbol.type,\n    };\n  };\n\n  // Main\n  sigs.main = func(main, decl.out);\n\n  // Internals (for name replacement only)\n  for (symbol of Array.from(internals)) {\n    sigs.internal.push({\n      name: symbol.ident,\n    });\n  }\n\n  // Externals\n  for (symbol of Array.from(externals)) {\n    let def;\n    switch (symbol.decl) {\n      // Uniforms/attributes/varyings\n      case \"external\":\n        def = defn(symbol);\n        sigs[symbol.storage].push(def);\n        break;\n\n      // Callbacks\n      case \"function\":\n        def = func(symbol, decl.in);\n        sigs.external.push(def);\n        break;\n    }\n  }\n\n  return sigs;\n};\n\n// Walk AST, apply map and collect values\ndebug = false;\n\nexport const walk = function (map, collect, node, indent) {\n  debug &&\n    console.log(\n      indent,\n      node.type,\n      node.token != null ? node.token.data : undefined,\n      node.token != null ? node.token.type : undefined\n    );\n\n  const recurse = map(node, collect);\n\n  if (recurse) {\n    for (let i = 0; i < node.children.length; i++) {\n      const child = node.children[i];\n      walk(map, collect, child, indent + \"  \", debug);\n    }\n  }\n\n  return null;\n};\n\n// #####\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport * as $ from \"./constants\";\n\n/*\n  GLSL code generator for compiler and linker stubs\n*/\n\n// Check if shadow outlet\nexport function unshadow(name) {\n  const real = name.replace($.SHADOW_ARG, \"\");\n  if (real !== name) {\n    return real;\n  } else {\n    return null;\n  }\n}\n\n// Line joiners\nexport function lines(lines) {\n  return lines.join(\"\\n\");\n}\nexport function list(lines) {\n  return lines.join(\", \");\n}\nexport function statements(lines) {\n  return lines.join(\";\\n\");\n}\n\n// Function body\nexport function body(entry) {\n  return {\n    entry,\n    type: \"void\",\n    params: [],\n    signature: [],\n    return: \"\",\n    vars: {},\n    calls: [],\n    post: [],\n    chain: {},\n  };\n}\n\n// Symbol define\nexport function define(a, b) {\n  return `#define ${a} ${b}`;\n}\n\n// Function define\nexport function fn(type, entry, params, vars, calls) {\n  return `${type} ${entry}(${params}) {\\n${vars}${calls}}`;\n}\n\n// Function invocation\nexport function invoke(ret, entry, args) {\n  ret = ret ? `${ret} = ` : \"\";\n  args = list(args);\n  return `  ${ret}${entry}(${args})`;\n}\n\n// Compare two signatures\nexport function same(a, b) {\n  for (let i = 0; i < a.length; i++) {\n    const A = a[i];\n    const B = b[i];\n    if (!B) {\n      return false;\n    }\n    if (A.type !== B.type) {\n      return false;\n    }\n    if ((A.name === $.RETURN_ARG) !== (B.name === $.RETURN_ARG)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// Generate call signature for module invocation\nexport function call(lookup, dangling, entry, signature, body) {\n  const args = [];\n  let ret = \"\";\n\n  for (let arg of Array.from(signature)) {\n    let id, shadow;\n    const { name } = arg;\n\n    let copy = (id = lookup(name));\n    let other = null;\n    let meta = null;\n    let omit = false;\n\n    const isReturn = name === $.RETURN_ARG;\n\n    // Shadowed inout: input side\n    if ((shadow = arg.meta != null ? arg.meta.shadowed : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        body.vars[other] = \"  \" + arg.param(other);\n        body.calls.push(`  ${other} = ${id}`);\n\n        if (!dangling(shadow)) {\n          arg = arg.split();\n        } else {\n          meta = { shadowed: other };\n        }\n      }\n    }\n\n    // Shadowed inout: output side\n    if ((shadow = arg.meta != null ? arg.meta.shadow : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        if (!dangling(shadow)) {\n          arg = arg.split();\n          omit = true;\n        } else {\n          meta = { shadow: other };\n          continue;\n        }\n      }\n    }\n\n    if (isReturn) {\n      // Capture return value\n      ret = id;\n    } else if (!omit) {\n      // Pass all non return, non shadow args in\n      args.push(other != null ? other : id);\n    }\n\n    // Export argument if unconnected\n    if (dangling(name)) {\n      let op = \"push\";\n      if (isReturn) {\n        if (body.return === \"\") {\n          op = \"unshift\";\n          // Preserve 'return' arg name\n          copy = name;\n          body.type = arg.spec;\n          body.return = `  return ${id}`;\n          body.vars[id] = \"  \" + arg.param(id);\n        } else {\n          body.vars[id] = \"  \" + arg.param(id);\n          body.params.push(arg.param(id, true));\n        }\n      } else {\n        body.params.push(arg.param(id, true));\n      }\n\n      // Copy argument into new signature\n      arg = arg.copy(copy, meta);\n      body.signature[op](arg);\n    } else {\n      body.vars[id] = \"  \" + arg.param(id);\n    }\n  }\n\n  return body.calls.push(invoke(ret, entry, args));\n}\n\n// Assemble main() function from body and call reference\nexport function build(body, calls) {\n  const { entry } = body;\n  let code = null;\n\n  // Check if we're only calling one snippet with identical signature\n  // and not building void main();\n  if (calls && calls.length === 1 && entry !== \"main\") {\n    const b = calls[0].module;\n\n    if (same(body.signature, b.main.signature)) {\n      code = define(entry, b.entry);\n    }\n  }\n\n  // Otherwise build function body\n  if (code == null) {\n    let vars = (() => {\n      const result = [];\n      for (const v in body.vars) {\n        const decl = body.vars[v];\n        result.push(decl);\n      }\n      return result;\n    })();\n    ({ calls } = body);\n    const { post } = body;\n    let { params } = body;\n    const { type } = body;\n    const ret = body.return;\n\n    calls = calls.concat(post);\n    if (ret !== \"\") {\n      calls.push(ret);\n    }\n    calls.push(\"\");\n\n    if (vars.length) {\n      vars.push(\"\");\n      vars = statements(vars) + \"\\n\";\n    } else {\n      vars = \"\";\n    }\n\n    calls = statements(calls);\n    params = list(params);\n\n    code = fn(type, entry, params, vars, calls);\n  }\n\n  return {\n    signature: body.signature,\n    code,\n    name: entry,\n  };\n}\n\n// Build links to other callbacks\nexport function links(links) {\n  const out = {\n    defs: [],\n    bodies: [],\n  };\n\n  for (const l of Array.from(links)) {\n    link(l, out);\n  }\n\n  out.defs = lines(out.defs);\n  out.bodies = statements(out.bodies);\n\n  if (out.defs === \"\") {\n    delete out.defs;\n  }\n  if (out.bodies === \"\") {\n    delete out.bodies;\n  }\n\n  return out;\n}\n\n// Link a module's entry point as a callback\nexport const link = (link, out) => {\n  let arg, list;\n  const { module, name, external } = link;\n  const { main } = module;\n  const { entry } = module;\n\n  // If signatures match, #define alias for the symbol\n  if (same(main.signature, external.signature)) {\n    return out.defs.push(define(name, entry));\n  }\n\n  // Signatures differ, build one-line callback to match defined prototype\n\n  // Map names to names\n  const ins = [];\n  const outs = [];\n  let map = {};\n  const returnVar = [module.namespace, $.RETURN_ARG].join(\"\");\n\n  for (arg of Array.from(external.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    list.push(arg);\n  }\n\n  for (arg of Array.from(main.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    const other = list.shift();\n    let _name = other.name;\n\n    // Avoid 'return' keyword\n    if (_name === $.RETURN_ARG) {\n      _name = returnVar;\n    }\n\n    map[arg.name] = _name;\n  }\n\n  // Build function prototype to invoke the other side\n  let _lookup = (name) => map[name];\n  const _dangling = () => true;\n\n  const inner = body();\n  call(_lookup, _dangling, entry, main.signature, inner);\n  inner.entry = entry;\n\n  // Avoid 'return' keyword\n  map = { return: returnVar };\n  _lookup = (name) => (map[name] != null ? map[name] : name);\n\n  // Build wrapper function for the calling side\n  const outer = body();\n  call(_lookup, _dangling, entry, external.signature, outer);\n\n  outer.calls = inner.calls;\n  outer.entry = name;\n\n  out.bodies.push(build(inner).code.split(\" {\")[0]);\n  return out.bodies.push(build(outer).code);\n};\n\n// Remove all function prototypes to avoid redefinition errors\nexport function defuse(code) {\n  // Don't try this at home kids\n  const re =\n    /([A-Za-z0-9_]+\\s+)?[A-Za-z0-9_]+\\s+[A-Za-z0-9_]+\\s*\\([^)]*\\)\\s*;\\s*/gm;\n  const strip = (code) => code.replace(re, (_m) => \"\");\n\n  // Split into scopes by braces\n  const blocks = code.split(/(?=[{}])/g);\n  let level = 0;\n  for (let i = 0; i < blocks.length; i++) {\n    const b = blocks[i];\n    switch (b[0]) {\n      case \"{\":\n        level++;\n        break;\n      case \"}\":\n        level--;\n        break;\n    }\n\n    // Only mess with top level scope\n    if (level === 0) {\n      // Preprocessor lines will fuck us up. Split on them.\n      const hash = b.split(/^[ \\t]*#/m);\n      for (let j = 0; j < hash.length; j++) {\n        let line = hash[j];\n        if (j > 0) {\n          // Trim off preprocessor directive\n          line = line.split(/\\n/);\n          const head = line.shift();\n          const rest = line.join(\"\\n\");\n\n          // Process rest\n          hash[j] = [head, strip(rest)].join(\"\\n\");\n        } else {\n          // Process entire line\n          hash[j] = strip(line);\n        }\n      }\n\n      // Reassemble\n      blocks[i] = hash.join(\"#\");\n    }\n  }\n\n  return (code = blocks.join(\"\"));\n}\n\n// Remove duplicate uniforms / varyings / attributes\nexport function dedupe(code) {\n  const map = {};\n  const re =\n    /((attribute|uniform|varying)\\s+)[A-Za-z0-9_]+\\s+([A-Za-z0-9_]+)\\s*(\\[[^\\]]*\\]\\s*)?;\\s*/gm;\n  return code.replace(re, function (m, qual, type, name, _struct) {\n    if (map[name]) {\n      return \"\";\n    }\n    map[name] = true;\n    return m;\n  });\n}\n\n// Move definitions to top so they compile properly\nexport function hoist(code) {\n  const filter = function (lines, re) {\n    const defs = [];\n    const out = [];\n    for (const line of Array.from(lines)) {\n      const list = line.match(re) ? defs : out;\n      list.push(line);\n    }\n\n    return defs.concat(out);\n  };\n\n  let lines = code.split(\"\\n\");\n\n  // Hoist symbol defines to the top so (re)definitions use the right alias\n  lines = filter(lines, /^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/);\n\n  // Hoist extensions\n  lines = filter(lines, /^#extension/);\n\n  return lines.join(\"\\n\");\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\nimport * as Factory from \"./factory\";\nimport * as GLSL from \"./glsl\";\nimport * as Graph from \"./graph\";\nimport * as Linker from \"./linker\";\nimport * as Visualize from \"./visualize\";\n\nconst { library, cache } = Factory;\nexport const { visualize, inspect } = Visualize;\nconst { Snippet } = Linker;\n\nconst merge = function (a, b = {}) {\n  const out = {};\n  for (let key in a) {\n    out[key] = b[key] || a[key];\n  }\n  return out;\n};\n\nexport class ShaderGraph {\n  constructor(snippets, config) {\n    const defaults = {\n      globalUniforms: false,\n      globalVaryings: true,\n      globalAttributes: true,\n      globals: [],\n      autoInspect: false,\n    };\n\n    this.config = merge(defaults, config);\n    this.fetch = cache(library(GLSL, snippets, Snippet.load));\n  }\n\n  shader(config) {\n    if (config == null) {\n      config = {};\n    }\n    const _config = merge(this.config, config);\n    return new Factory.Factory(GLSL, this.fetch, _config);\n  }\n\n  material(config) {\n    return new Factory.Material(this.shader(config), this.shader(config));\n  }\n\n  inspect(shader) {\n    return ShaderGraph.inspect(shader);\n  }\n  visualize(shader) {\n    return ShaderGraph.visualize(shader);\n  }\n\n  // Static visualization method\n  static inspect(shader) {\n    return inspect(shader);\n  }\n  static visualize(shader) {\n    return visualize(shader);\n  }\n}\n\n// Expose class hierarchy\nShaderGraph.Block = Block;\nShaderGraph.Factory = Factory;\nShaderGraph.GLSL = GLSL;\nShaderGraph.Graph = Graph;\nShaderGraph.Linker = Linker;\nShaderGraph.Visualize = Visualize;\n\nexport function load(snippets, config = {}) {\n  return new ShaderGraph(snippets, config);\n}\n"],"sourceRoot":""}