{"version":3,"sources":["webpack://ShaderGraph/webpack/universalModuleDefinition","webpack://ShaderGraph/./node_modules/glsl-parser/direct.js","webpack://ShaderGraph/./node_modules/glsl-parser/lib/expr.js","webpack://ShaderGraph/./node_modules/glsl-parser/lib/index.js","webpack://ShaderGraph/./node_modules/glsl-parser/lib/scope.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/index.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/operators.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/string.js","webpack://ShaderGraph/./src/linker/priority.js","webpack://ShaderGraph/webpack/bootstrap","webpack://ShaderGraph/webpack/runtime/compat get default export","webpack://ShaderGraph/webpack/runtime/define property getters","webpack://ShaderGraph/webpack/runtime/hasOwnProperty shorthand","webpack://ShaderGraph/webpack/runtime/make namespace object","webpack://ShaderGraph/./src/graph/graph.js","webpack://ShaderGraph/./src/graph/outlet.js","webpack://ShaderGraph/./src/graph/node.js","webpack://ShaderGraph/./src/graph/index.js","webpack://ShaderGraph/./src/linker/snippet.js","webpack://ShaderGraph/./src/linker/assemble.js","webpack://ShaderGraph/./src/linker/program.js","webpack://ShaderGraph/./src/linker/link.js","webpack://ShaderGraph/./src/linker/layout.js","webpack://ShaderGraph/./src/linker/index.js","webpack://ShaderGraph/./src/block/block.js","webpack://ShaderGraph/./src/block/call.js","webpack://ShaderGraph/./src/block/callback.js","webpack://ShaderGraph/./src/block/isolate.js","webpack://ShaderGraph/./src/block/join.js","webpack://ShaderGraph/./src/visualize/serialize.js","webpack://ShaderGraph/./src/factory/hash.js","webpack://ShaderGraph/./src/visualize/markup.js","webpack://ShaderGraph/./src/visualize/index.js","webpack://ShaderGraph/./src/factory/factory.js","webpack://ShaderGraph/./src/factory/material.js","webpack://ShaderGraph/./src/factory/library.js","webpack://ShaderGraph/./src/factory/queue.js","webpack://ShaderGraph/./src/factory/cache.js","webpack://ShaderGraph/./src/glsl/compile.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector2.js","webpack://ShaderGraph/./node_modules/three/src/math/MathUtils.js","webpack://ShaderGraph/./node_modules/three/src/math/Quaternion.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector3.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix3.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix4.js","webpack://ShaderGraph/./src/glsl/decl.js","webpack://ShaderGraph/./src/glsl/constants.js","webpack://ShaderGraph/./src/glsl/parse.js","webpack://ShaderGraph/./src/glsl/generate.js","webpack://ShaderGraph/./src/index.js"],"names":["root","factory","exports","module","define","amd","self","parse","tokens","parser","i","length","state","token","idx","original_symbol","nud","this","children","fail","led","symbol_table","itself","symbol","id","binding_power","sym","lbp","Object","create","expression","rbp","left","t","advance","infix","bp","type","infixr","prefix","suffix","assignment","next","value","output","data","unexpected","scope","find","create_node","message","fake","push","incoming_state","incoming_tokens","result","parent","emit","node","unshift","len","shift","Error","parse_struct","parse_precision","parse_quantifier","parse_forloop","parse_if","parse_return","parse_whileloop","parse_dowhileloop","parse_function","parse_function_args","program","stmtlist","n","STMTLIST","stmt","STMT","decllist","DECLLIST","precision","PRECISION","ident","IDENT","fn","KEYWORD_OR_IDENT","FUNCTION","fnargs","FUNCTIONARGS","forstmt","FORLOOP","ifstmt","IF","whilestmt","WHILELOOP","returnstmt","RETURN","dowhilestmt","DOWHILELOOP","quantifier","QUANTIFIER","check","arguments","slice","call","ended","nodes","whitespace","errored","special_shift","special_unshift","special_fake","Scope","mknode","reader","setup_stative_parsers","expecting","mode","end","write","input","preceding","concat","take","parse_stmt","parse_stmtlist","DECL","parse_decl","parse_decllist","EXPR","parse_expr","STRUCT","parse_ident","KEYWORD","parse_keyword","parse_keyword_or_ident","x","_node","add_child","ret","undefined","okay","test","stative","enter","Advance","exit","adhoc","brace","got_eof","BREAK","CONTINUE","DISCARD","decl","DECL_STATEMENT","lookup","expr","flags","keyword","PLACEHOLDER","position","is_storage","is_parameter","is_precision","struct","stage","collected_name","name","parenlevel","bracelevel","indexOf","full_parse_expr","err","parseexpr","token_map","_","allow_assign","allow_comma","default_value","str","line","assert","assert_null_string_or_array","y","join","step","steps","current","op","last","last_node","succeeding","advance_expr","until","advance_ident","declare","advance_stmtlist","maybe_stmtlist","skip","popstmt","COMMENT","PREPROCESSOR","stmt_type","sourcetoken","Math","random","toString","constructor","scopes","proto","prototype","s","pop","hasOwnProperty","opt","c","total","NORMAL","content","col","start","isnum","isoperator","allBuiltins","builtins100","allLiterals","literals100","version","builtins300es","literals300es","builtinsDict","literalsDict","chunk","replace","block_comment","line_comment","preprocessor","operator","integer","hex","decimal","TOKEN","readtoken","normal","map","column","determine_operator","is_composite_operator","buf","res","j","operators","contentstr","v100","filter","b","tokenize","generator","make","Array","nest","a","compare","min","asc","p","q","max","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","key","o","defineProperty","enumerable","get","obj","prop","r","Symbol","toStringTag","Graph","index","IN","OUT","add","inputs","from","outlet","outputs","ignore","graph","remove","disconnect","splice","adopt","initClass","Outlet","extra","meta","inout","hint","connect","owner","outlets","all","setOutlets","getIn","getOut","_add","hash","match","_remove","existing","_morph","empty","force","dest","dests","source","hints","typeHint","list","sources","_key","morph","Snippet","language","code","sigs","compiler","compile","_signatures","_compiler","_name","_original","namespace","main","entry","uniforms","externals","symbols","attributes","varyings","config","defines","def","v","exist","exceptions","global","local","globals","_u","globalUniforms","_v","globalVaryings","_a","globalAttributes","_e","u","e","redef","uniform","varying","external","attribute","body","defs","k","assemble","calls","requires","generate","library","handle","ns","sort","priority","include","isDangling","signature","record","lib","required","ext","copy","build","includes","lines","process","Program","exists","snippet","links","modules","exported","header","bodies","m","sorted","defuse","hoist","dedupe","Layout","visits","load","Block","delay","construct","makeOutlets","layout","_include","export","link","_program","_depth","_layout","_external","_outlet","string","props","depth","require","arg","__guard__","previous","callback","OutletError","_info","child","block","transform","Call","super","params","callbacks","_call","_inputs","visit","_link","_trace","Callback","refresh","subroutine","ins","outs","dupe","_require","_callback","Isolate","seen","done","set","Join","serialize","format","open","other","out","to","in","imul","al","bl","h","floor","charCodeAt","iterate","trim","hashColor","alpha","color","g","norm","round","cssColor","escapeText","el","_markup","update","_activate","codes","querySelectorAll","popup","parentNode","classList","addEventListener","event","style","display","none","nodeMap","linkMap","recurse","_order","wrapper","document","createElement","columns","innerHTML","addOutlet","div","appendChild","querySelector","clear","sqr","path","x1","y1","x2","y2","dx","dy","sqrt","abs","mx","my","f","makeSVG","tag","createElementNS","element","ref","getBoundingClientRect","coords","right","top","bottom","svg","removeChild","box","offsetHeight","setAttribute","offsetWidth","overlay","contents","close","view","inside","wrap","markup","Node","innerText","merge","_visualize","resolve","vertex","fragment","_graph","args","visualize","inspect","apply","Factory","fetch","_concat","pipe","_import","_group","_next","pass","_stack","_state","sub","_exit","_tail","State","error","autoInspect","_auto","multi","subgraph","_subgraph","bind","tail","_push","_pop","_append","_insert","Material","options","shader","vertexShader","vertexGraph","fragmentShader","fragmentGraph","snippets","used","inline","_used","queue","limit","head","count","item","prev","dead","cache","cached","expire","clone","ast","signatures","placeholders","replaced","string_compiler","sig","re","RegExp","compiled","result1","Vector2","scalar","w","console","warn","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","ceil","atan2","PI","distanceToSquared","normalize","v1","v2","array","offset","getX","getY","center","angle","cos","sin","isVector2","_lut","clamp","Quaternion","z","_x","_y","_z","_w","qa","qb","qm","slerpQuaternions","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","z1","w1","dir","sqrSin","Number","EPSILON","tDir","_onChangeCallback","quaternion","euler","isEuler","order","c1","c2","c3","s1","s2","s3","axis","halfAngle","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","vFrom","vTo","dot","acos","angleTo","slerp","conjugate","l","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","getZ","getW","isQuaternion","Vector3","multiplyVectors","applyQuaternion","_quaternion","setFromEuler","setFromAxisAngle","applyMatrix3","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector","projectOnVector","theta","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","sx","setFromMatrixColumn","sy","sz","fromArray","isVector3","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","tx","ty","rotation","cx","cy","matrix","isMatrix3","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","target","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","xy","xz","yx","yz","zx","zy","scale","z2","xx","yy","zz","wx","wy","wz","determinant","_m1","invSX","invSY","invSZ","setFromRotationMatrix","near","far","isMatrix4","function","storage","quant","func","argument","param","spec","long","split","threejs","window","THREE","defaults","int","float","vec2","vec3","vec4","Vector4","mat2","mat3","mat4","sampler2D","samplerCube","three","dirs","const","Definition","isIn","shadowed","SHADOW_ARG","RETURN_ARG","parseGLSL","processAST","tock","errors","fmt","walk","mapSymbols","collect","internals","sortSymbols","extractSignatures","maybe","found","internal","defn","shadow","indent","log","now","Date","label","delta","unshadow","real","statements","return","vars","post","chain","invoke","same","A","B","dangling","omit","isReturn","returnVar","_lookup","_dangling","inner","outer","strip","blocks","level","rest","qual","ShaderGraph","_config","GLSL","Linker","Visualize"],"mappings":"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N,EAAc,EAAQ,KACtByB,EAAY,EAAQ,KACpB3B,EAAc,EAAQ,KACtBK,EAAgB,EAAQ,KACxBD,EAAgB,EAAQ,KAExBX,EAAS,IACTwB,EAAQ,KAcRG,EAAM,CACN,gBACA,eACA,eACA,WACA,UACA,QACA,QACA,UACA,UACA,aACA,MACA,Y,cClCJ,IAAIS,EAAO,EAAQ,KAInBA,EAAOA,EAAKtJ,QAAQuJ,QAAO,SAAUC,GACnC,OAAQ,kBAAkBjH,KAAKiH,MAGjC7P,EAAOD,QAAU4P,EAAKnI,OAAO,CAEzB,cACA,gBACA,cACA,eACA,eACA,iBACA,eACA,gBACA,sBACA,6BACA,4BACA,6BACA,gCACA,kCACA,0BACA,+BACA,oBACA,2BACA,2BACA,0BACA,gBAGA,QACA,QACA,YACA,QACA,QACA,iBACA,kBACA,iBACA,kBACA,gBACA,kBACA,gBACA,kBACA,eACA,iBACA,eACA,YACA,cACA,UACA,UACA,cACA,cACA,aACA,gBACA,aACA,mBACA,oBACA,mBACA,iBACA,uBACA,cACA,oBACA,kBACA,2B,QCnEJxH,EAAOD,QAAU,CAEf,MACE,OACA,MACA,MACA,OACA,OACA,OACA,QACA,MACA,QACA,OACA,OACA,UACA,WACA,MACA,QACA,MACA,OACA,cACA,QACA,QACA,eACA,2BACA,sBACA,kBACA,wBACA,eACA,gBACA,WACA,gBACA,0BACA,eACA,eACA,eACA,eACA,SACA,cACA,kBACA,mBACA,eACA,eACA,cACA,eACA,kBACA,gBACA,iBACA,4BACA,uBACA,mBACA,yBACA,gBACA,0BACA,wBACA,mBACA,iBACA,2BACA,wBACA,mBACA,kCACA,oBACA,kCACA,eACA,sBACA,0BACA,qBACA,sBACA,sBACA,gCACA,gCACA,qBACA,4BACA,qCACA,8BACA,+BACA,sCACA,+CACA,wCACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,YACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,WACA,gBACA,qBACA,eACA,cACA,sBACA,6BACA,sCACA,+BACA,oBACA,cACA,qBACA,mBACA,0BACA,mCACA,4BACA,YACA,cACA,mBACA,cACA,SACA,WACA,gBACA,MACA,OACA,iBACA,MACA,MACA,MACA,MACA,YACA,MACA,WACA,MACA,UACA,UACA,UACA,OACA,MACA,aACA,OACA,OACA,MACA,YACA,eACA,gBACA,mBACA,cACA,iBACA,kBACA,sBACA,oBACA,mBACA,uBACA,uB,cCpJJ,IAAI4P,EAAO,EAAQ,KAEnB3P,EAAOD,QAAU4P,EAAKtJ,QAAQmB,OAAO,CAClC,SACC,WACA,SACA,OACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACA,QACA,QACA,oBACA,iBACA,uBACA,aACA,aACA,eACA,kBACA,aACA,aACA,eACA,kBACA,WACA,WACA,WACA,YACA,WACA,cACA,gBACA,QACA,SACA,aACA,SACA,YACA,SACA,SACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,aACA,WACA,WACA,WACA,aACA,eACA,eACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,qBACA,qBACA,cACA,eACA,eACA,iBACA,uBACA,aACA,kBACA,aACA,kBACA,iBACA,iBACA,gBACA,iBACA,iBACA,cACA,eACA,eACA,mBACA,oBACA,uB,QCrFJxH,EAAOD,QAAU,CAEb,YACA,QACA,UACA,OACA,YACA,QACA,UACA,UACA,QACA,WACA,KACA,MACA,QACA,KACA,OACA,KACA,MACA,QACA,QACA,MACA,OACA,OACA,OACA,OACA,QACA,UACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,cACA,kBACA,kBACA,SAGA,MACA,QACA,QACA,OACA,UACA,WACA,OACA,SACA,OACA,SACA,UACA,SACA,WACA,WACA,SACA,SACA,SACA,WACA,YACA,OACA,QACA,SACA,OACA,QACA,WACA,QACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,gBACA,g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","file":"shadergraph.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ShaderGraph\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ShaderGraph\"] = factory();\n\telse\n\t\troot[\"ShaderGraph\"] = factory();\n})(self, function() {\nreturn ","var parse = require('./lib/index')\r\n\r\nmodule.exports = parseArray\r\n\r\nfunction parseArray(tokens) {\r\n  var parser = parse()\r\n\r\n  for (var i = 0; i < tokens.length; i++) {\r\n    parser(tokens[i])\r\n  }\r\n\r\n  return parser(null)\r\n}\r\n","var state\r\n  , token\r\n  , tokens\r\n  , idx\r\n\r\nvar original_symbol = {\r\n    nud: function() { return this.children && this.children.length ? this : fail('unexpected')() }\r\n  , led: fail('missing operator')\r\n}\r\n\r\nvar symbol_table = {}\r\n\r\nfunction itself() {\r\n  return this\r\n}\r\n\r\nsymbol('(ident)').nud = itself\r\nsymbol('(keyword)').nud = itself\r\nsymbol('(builtin)').nud = itself\r\nsymbol('(literal)').nud = itself\r\nsymbol('(end)')\r\n\r\nsymbol(':')\r\nsymbol(';')\r\nsymbol(',')\r\nsymbol(')')\r\nsymbol(']')\r\nsymbol('}')\r\n\r\ninfixr('&&', 30)\r\ninfixr('||', 30)\r\ninfix('|', 43)\r\ninfix('^', 44)\r\ninfix('&', 45)\r\ninfix('==', 46)\r\ninfix('!=', 46)\r\ninfix('<', 47)\r\ninfix('<=', 47)\r\ninfix('>', 47)\r\ninfix('>=', 47)\r\ninfix('>>', 48)\r\ninfix('<<', 48)\r\ninfix('+', 50)\r\ninfix('-', 50)\r\ninfix('*', 60)\r\ninfix('/', 60)\r\ninfix('%', 60)\r\ninfix('?', 20, function(left) {\r\n  this.children = [left, expression(0), (advance(':'), expression(0))]\r\n  this.type = 'ternary'\r\n  return this\r\n})\r\ninfix('.', 80, function(left) {\r\n  token.type = 'literal'\r\n  state.fake(token)\r\n  this.children = [left, token]\r\n  advance()\r\n  return this\r\n})\r\ninfix('[', 80, function(left) {\r\n  this.children = [left, expression(0)]\r\n  this.type = 'binary'\r\n  advance(']')\r\n  return this\r\n})\r\ninfix('(', 80, function(left) {\r\n  this.children = [left]\r\n  this.type = 'call'\r\n\r\n  if(token.data !== ')') while(1) {\r\n    this.children.push(expression(0))\r\n    if(token.data !== ',') break\r\n    advance(',')\r\n  }\r\n  advance(')')\r\n  return this\r\n})\r\n\r\nprefix('-')\r\nprefix('+')\r\nprefix('!')\r\nprefix('~')\r\nprefix('defined')\r\nprefix('(', function() {\r\n  this.type = 'group'\r\n  this.children = [expression(0)]\r\n  advance(')')\r\n  return this\r\n})\r\nprefix('++')\r\nprefix('--')\r\nsuffix('++')\r\nsuffix('--')\r\n\r\nassignment('=')\r\nassignment('+=')\r\nassignment('-=')\r\nassignment('*=')\r\nassignment('/=')\r\nassignment('%=')\r\nassignment('&=')\r\nassignment('|=')\r\nassignment('^=')\r\nassignment('>>=')\r\nassignment('<<=')\r\n\r\nmodule.exports = function(incoming_state, incoming_tokens) {\r\n  state = incoming_state\r\n  tokens = incoming_tokens\r\n  idx = 0\r\n  var result\r\n\r\n  if(!tokens.length) return\r\n\r\n  advance()\r\n  result = expression(0)\r\n  result.parent = state[0]\r\n  emit(result)\r\n\r\n  if(idx < tokens.length) {\r\n    throw new Error('did not use all tokens')\r\n  }\r\n\r\n  result.parent.children = [result]\r\n\r\n  function emit(node) {\r\n    state.unshift(node, false)\r\n    for(var i = 0, len = node.children.length; i < len; ++i) {\r\n      emit(node.children[i])\r\n    }\r\n    state.shift()\r\n  }\r\n\r\n}\r\n\r\nfunction symbol(id, binding_power) {\r\n  var sym = symbol_table[id]\r\n  binding_power = binding_power || 0\r\n  if(sym) {\r\n    if(binding_power > sym.lbp) {\r\n      sym.lbp = binding_power\r\n    }\r\n  } else {\r\n    sym = Object.create(original_symbol)\r\n    sym.id = id\r\n    sym.lbp = binding_power\r\n    symbol_table[id] = sym\r\n  }\r\n  return sym\r\n}\r\n\r\nfunction expression(rbp) {\r\n  var left, t = token\r\n  advance()\r\n\r\n  left = t.nud()\r\n  while(rbp < token.lbp) {\r\n    t = token\r\n    advance()\r\n    left = t.led(left)\r\n  }\r\n  return left\r\n}\r\n\r\nfunction infix(id, bp, led) {\r\n  var sym = symbol(id, bp)\r\n  sym.led = led || function(left) {\r\n    this.children = [left, expression(bp)]\r\n    this.type = 'binary'\r\n    return this\r\n  }\r\n}\r\n\r\nfunction infixr(id, bp, led) {\r\n  var sym = symbol(id, bp)\r\n  sym.led = led || function(left) {\r\n    this.children = [left, expression(bp - 1)]\r\n    this.type = 'binary'\r\n    return this\r\n  }\r\n  return sym\r\n}\r\n\r\nfunction prefix(id, nud) {\r\n  var sym = symbol(id)\r\n  sym.nud = nud || function() {\r\n    this.children = [expression(70)]\r\n    this.type = 'unary'\r\n    return this\r\n  }\r\n  return sym\r\n}\r\n\r\nfunction suffix(id) {\r\n  var sym = symbol(id, 150)\r\n  sym.led = function(left) {\r\n    this.children = [left]\r\n    this.type = 'suffix'\r\n    return this\r\n  }\r\n}\r\n\r\nfunction assignment(id) {\r\n  return infixr(id, 10, function(left) {\r\n    this.children = [left, expression(9)]\r\n    this.assignment = true\r\n    this.type = 'assign'\r\n    return this\r\n  })\r\n}\r\n\r\nfunction advance(id) {\r\n  var next\r\n    , value\r\n    , type\r\n    , output\r\n\r\n  if(id && token.data !== id) {\r\n    return state.unexpected('expected `'+ id + '`, got `'+token.data+'`')\r\n  }\r\n\r\n  if(idx >= tokens.length) {\r\n    token = symbol_table['(end)']\r\n    return\r\n  }\r\n\r\n  next = tokens[idx++]\r\n  value = next.data\r\n  type = next.type\r\n\r\n  if(type === 'ident') {\r\n    output = state.scope.find(value) || state.create_node()\r\n    type = output.type\r\n  } else if(type === 'builtin') {\r\n    output = symbol_table['(builtin)']\r\n  } else if(type === 'keyword') {\r\n    output = symbol_table['(keyword)']\r\n  } else if(type === 'operator') {\r\n    output = symbol_table[value]\r\n    if(!output) {\r\n      return state.unexpected('unknown operator `'+value+'`')\r\n    }\r\n  } else if(type === 'float' || type === 'integer') {\r\n    type = 'literal'\r\n    output = symbol_table['(literal)']\r\n  } else {\r\n    return state.unexpected('unexpected token.')\r\n  }\r\n\r\n  if(output) {\r\n    if(!output.nud) { output.nud = itself }\r\n    if(!output.children) { output.children = [] }\r\n  }\r\n\r\n  output = Object.create(output)\r\n  output.token = next\r\n  output.type = type\r\n  if(!output.data) output.data = value\r\n\r\n  return token = output\r\n}\r\n\r\nfunction fail(message) {\r\n  return function() { return state.unexpected(message) }\r\n}\r\n","module.exports = parser\r\n\r\nvar full_parse_expr = require('./expr')\r\n  , Scope = require('./scope')\r\n\r\n// singleton!\r\nvar Advance = new Object\r\n\r\nvar DEBUG = false\r\n\r\nvar _ = 0\r\n  , IDENT = _++\r\n  , STMT = _++\r\n  , STMTLIST = _++\r\n  , STRUCT = _++\r\n  , FUNCTION = _++\r\n  , FUNCTIONARGS = _++\r\n  , DECL = _++\r\n  , DECLLIST = _++\r\n  , FORLOOP = _++\r\n  , WHILELOOP = _++\r\n  , IF = _++\r\n  , EXPR = _++\r\n  , PRECISION = _++\r\n  , COMMENT = _++\r\n  , PREPROCESSOR = _++\r\n  , KEYWORD = _++\r\n  , KEYWORD_OR_IDENT = _++\r\n  , RETURN = _++\r\n  , BREAK = _++\r\n  , CONTINUE = _++\r\n  , DISCARD = _++\r\n  , DOWHILELOOP = _++\r\n  , PLACEHOLDER = _++\r\n  , QUANTIFIER = _++\r\n\r\nvar DECL_ALLOW_ASSIGN = 0x1\r\n  , DECL_ALLOW_COMMA = 0x2\r\n  , DECL_REQUIRE_NAME = 0x4\r\n  , DECL_ALLOW_INVARIANT = 0x8\r\n  , DECL_ALLOW_STORAGE = 0x10\r\n  , DECL_NO_INOUT = 0x20\r\n  , DECL_ALLOW_STRUCT = 0x40\r\n  , DECL_STATEMENT = 0xFF\r\n  , DECL_FUNCTION = DECL_STATEMENT & ~(DECL_ALLOW_ASSIGN | DECL_ALLOW_COMMA | DECL_NO_INOUT | DECL_ALLOW_INVARIANT | DECL_REQUIRE_NAME)\r\n  , DECL_STRUCT = DECL_STATEMENT & ~(DECL_ALLOW_ASSIGN | DECL_ALLOW_INVARIANT | DECL_ALLOW_STORAGE | DECL_ALLOW_STRUCT)\r\n\r\nvar QUALIFIERS = ['const', 'attribute', 'uniform', 'varying']\r\n\r\nvar NO_ASSIGN_ALLOWED = false\r\n  , NO_COMMA_ALLOWED = false\r\n\r\n// map of tokens to stmt types\r\nvar token_map = {\r\n    'block-comment': COMMENT\r\n  , 'line-comment': COMMENT\r\n  , 'preprocessor': PREPROCESSOR\r\n}\r\n\r\n// map of stmt types to human\r\nvar stmt_type = _ = [\r\n    'ident'\r\n  , 'stmt'\r\n  , 'stmtlist'\r\n  , 'struct'\r\n  , 'function'\r\n  , 'functionargs'\r\n  , 'decl'\r\n  , 'decllist'\r\n  , 'forloop'\r\n  , 'whileloop'\r\n  , 'if'\r\n  , 'expr'\r\n  , 'precision'\r\n  , 'comment'\r\n  , 'preprocessor'\r\n  , 'keyword'\r\n  , 'keyword_or_ident'\r\n  , 'return'\r\n  , 'break'\r\n  , 'continue'\r\n  , 'discard'\r\n  , 'do-while'\r\n  , 'placeholder'\r\n  , 'quantifier'\r\n]\r\n\r\nfunction parser() {\r\n  var stmtlist = n(STMTLIST)\r\n    , stmt = n(STMT)\r\n    , decllist = n(DECLLIST)\r\n    , precision = n(PRECISION)\r\n    , ident = n(IDENT)\r\n    , keyword_or_ident = n(KEYWORD_OR_IDENT)\r\n    , fn = n(FUNCTION)\r\n    , fnargs = n(FUNCTIONARGS)\r\n    , forstmt = n(FORLOOP)\r\n    , ifstmt = n(IF)\r\n    , whilestmt = n(WHILELOOP)\r\n    , returnstmt = n(RETURN)\r\n    , dowhilestmt = n(DOWHILELOOP)\r\n    , quantifier = n(QUANTIFIER)\r\n\r\n  var parse_struct\r\n    , parse_precision\r\n    , parse_quantifier\r\n    , parse_forloop\r\n    , parse_if\r\n    , parse_return\r\n    , parse_whileloop\r\n    , parse_dowhileloop\r\n    , parse_function\r\n    , parse_function_args\r\n\r\n  var check = arguments.length ? [].slice.call(arguments) : []\r\n    , complete = false\r\n    , ended = false\r\n    , depth = 0\r\n    , state = []\r\n    , nodes = []\r\n    , tokens = []\r\n    , whitespace = []\r\n    , errored = false\r\n    , program\r\n    , token\r\n    , node\r\n\r\n  // setup state\r\n  state.shift = special_shift\r\n  state.unshift = special_unshift\r\n  state.fake = special_fake\r\n  state.unexpected = unexpected\r\n  state.scope = new Scope(state)\r\n  state.create_node = function() {\r\n    var n = mknode(IDENT, token)\r\n    n.parent = reader.program\r\n    return n\r\n  }\r\n\r\n  setup_stative_parsers()\r\n\r\n  // setup root node\r\n  node = stmtlist()\r\n  node.expecting = '(eof)'\r\n  node.mode = STMTLIST\r\n  node.token = {type: '(program)', data: '(program)'}\r\n  program = node\r\n\r\n  reader.program = program\r\n  reader.scope = function(scope) {\r\n    if(arguments.length === 1) {\r\n      state.scope = scope\r\n    }\r\n    return state.scope\r\n  }\r\n\r\n  state.unshift(node)\r\n  return reader\r\n\r\n  function reader(data) {\r\n    if (data === null) {\r\n      return end(), program\r\n    }\r\n\r\n    nodes = []\r\n    write(data)\r\n    return nodes\r\n  }\r\n\r\n  // stream functions ---------------------------------------------\r\n\r\n  function write(input) {\r\n    if(input.type === 'whitespace' || input.type === 'line-comment' || input.type === 'block-comment') {\r\n\r\n      whitespace.push(input)\r\n      return\r\n    }\r\n    tokens.push(input)\r\n    token = token || tokens[0]\r\n\r\n    if(token && whitespace.length) {\r\n      token.preceding = token.preceding || []\r\n      token.preceding = token.preceding.concat(whitespace)\r\n      whitespace = []\r\n    }\r\n\r\n    while(take()) switch(state[0].mode) {\r\n      case STMT: parse_stmt(); break\r\n      case STMTLIST: parse_stmtlist(); break\r\n      case DECL: parse_decl(); break\r\n      case DECLLIST: parse_decllist(); break\r\n      case EXPR: parse_expr(); break\r\n      case STRUCT: parse_struct(true, true); break\r\n      case PRECISION: parse_precision(); break\r\n      case IDENT: parse_ident(); break\r\n      case KEYWORD: parse_keyword(); break\r\n      case KEYWORD_OR_IDENT: parse_keyword_or_ident(); break\r\n      case FUNCTION: parse_function(); break\r\n      case FUNCTIONARGS: parse_function_args(); break\r\n      case FORLOOP: parse_forloop(); break\r\n      case WHILELOOP: parse_whileloop(); break\r\n      case DOWHILELOOP: parse_dowhileloop(); break\r\n      case RETURN: parse_return(); break\r\n      case IF: parse_if(); break\r\n      case QUANTIFIER: parse_quantifier(); break\r\n    }\r\n  }\r\n\r\n  function end(tokens) {\r\n    if(arguments.length) {\r\n      write(tokens)\r\n    }\r\n\r\n    if(state.length > 1) {\r\n      unexpected('unexpected EOF')\r\n      return\r\n    }\r\n\r\n    complete = true\r\n  }\r\n\r\n  function take() {\r\n    if(errored || !state.length)\r\n      return false\r\n\r\n    return (token = tokens[0])\r\n  }\r\n\r\n  // ----- state manipulation --------\r\n\r\n  function special_fake(x) {\r\n    state.unshift(x)\r\n    state.shift()\r\n  }\r\n\r\n  function special_unshift(_node, add_child) {\r\n    _node.parent = state[0]\r\n\r\n    var ret = [].unshift.call(this, _node)\r\n\r\n    add_child = add_child === undefined ? true : add_child\r\n\r\n    if(DEBUG) {\r\n      var pad = ''\r\n      for(var i = 0, len = this.length - 1; i < len; ++i) {\r\n        pad += ' |'\r\n      }\r\n      console.log(pad, '\\\\'+_node.type, _node.token.data)\r\n    }\r\n\r\n    if(add_child && node !== _node) node.children.push(_node)\r\n    node = _node\r\n\r\n    return ret\r\n  }\r\n\r\n  function special_shift() {\r\n    var _node = [].shift.call(this)\r\n      , okay = check[this.length]\r\n      , emit = false\r\n\r\n    if(DEBUG) {\r\n      var pad = ''\r\n      for(var i = 0, len = this.length; i < len; ++i) {\r\n        pad += ' |'\r\n      }\r\n      console.log(pad, '/'+_node.type)\r\n    }\r\n\r\n    if(check.length) {\r\n      if(typeof check[0] === 'function') {\r\n        emit = check[0](_node)\r\n      } else if(okay !== undefined) {\r\n        emit = okay.test ? okay.test(_node.type) : okay === _node.type\r\n      }\r\n    } else {\r\n      emit = true\r\n    }\r\n\r\n    if(emit && !errored) nodes.push(_node)\r\n\r\n    node = _node.parent\r\n    return _node\r\n  }\r\n\r\n  // parse states ---------------\r\n\r\n  function parse_stmtlist() {\r\n    // determine the type of the statement\r\n    // and then start parsing\r\n    return stative(\r\n      function() { state.scope.enter(); return Advance }\r\n    , normal_mode\r\n    )()\r\n\r\n    function normal_mode() {\r\n      if(token.data === state[0].expecting) {\r\n        return state.scope.exit(), state.shift()\r\n      }\r\n      switch(token.type) {\r\n        case 'preprocessor':\r\n          state.fake(adhoc())\r\n          tokens.shift()\r\n        return\r\n        default:\r\n          state.unshift(stmt())\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  function parse_stmt() {\r\n    if(state[0].brace) {\r\n      if(token.data !== '}') {\r\n        return unexpected('expected `}`, got '+token.data)\r\n      }\r\n      state[0].brace = false\r\n      return tokens.shift(), state.shift()\r\n    }\r\n    switch(token.type) {\r\n      case 'eof': return got_eof()\r\n      case 'keyword':\r\n        switch(token.data) {\r\n          case 'for': return state.unshift(forstmt());\r\n          case 'if': return state.unshift(ifstmt());\r\n          case 'while': return state.unshift(whilestmt());\r\n          case 'do': return state.unshift(dowhilestmt());\r\n          case 'break': return state.fake(mknode(BREAK, token)), tokens.shift()\r\n          case 'continue': return state.fake(mknode(CONTINUE, token)), tokens.shift()\r\n          case 'discard': return state.fake(mknode(DISCARD, token)), tokens.shift()\r\n          case 'return': return state.unshift(returnstmt());\r\n          case 'precision': return state.unshift(precision());\r\n        }\r\n        return state.unshift(decl(DECL_STATEMENT))\r\n      case 'ident':\r\n        var lookup\r\n        if(lookup = state.scope.find(token.data)) {\r\n          if(lookup.parent.type === 'struct') {\r\n            // this is strictly untrue, you could have an\r\n            // expr that starts with a struct constructor.\r\n            //      ... sigh\r\n            return state.unshift(decl(DECL_STATEMENT))\r\n          }\r\n          return state.unshift(expr(';'))\r\n        }\r\n      case 'operator':\r\n        if(token.data === '{') {\r\n          state[0].brace = true\r\n          var n = stmtlist()\r\n          n.expecting = '}'\r\n          return tokens.shift(), state.unshift(n)\r\n        }\r\n        if(token.data === ';') {\r\n          return tokens.shift(), state.shift()\r\n        }\r\n      default: return state.unshift(expr(';'))\r\n    }\r\n  }\r\n\r\n  function got_eof() {\r\n    if (ended) errored = true\r\n    ended = true\r\n    return state.shift()\r\n  }\r\n\r\n  function parse_decl() {\r\n    var stmt = state[0]\r\n\r\n    return stative(\r\n      invariant_or_not,\r\n      storage_or_not,\r\n      parameter_or_not,\r\n      precision_or_not,\r\n      struct_or_type,\r\n      maybe_name,\r\n      maybe_lparen,     // lparen means we're a function\r\n      is_decllist,\r\n      done\r\n    )()\r\n\r\n    function invariant_or_not() {\r\n      if(token.data === 'invariant') {\r\n        if(stmt.flags & DECL_ALLOW_INVARIANT) {\r\n          state.unshift(keyword())\r\n          return Advance\r\n        } else {\r\n          return unexpected('`invariant` is not allowed here')\r\n        }\r\n      } else {\r\n        state.fake(mknode(PLACEHOLDER, {data: '', position: token.position}))\r\n        return Advance\r\n      }\r\n    }\r\n\r\n    function storage_or_not() {\r\n      if(is_storage(token)) {\r\n        if(stmt.flags & DECL_ALLOW_STORAGE) {\r\n          state.unshift(keyword())\r\n          return Advance\r\n        } else {\r\n          return unexpected('storage is not allowed here')\r\n        }\r\n      } else {\r\n        state.fake(mknode(PLACEHOLDER, {data: '', position: token.position}))\r\n        return Advance\r\n      }\r\n    }\r\n\r\n    function parameter_or_not() {\r\n      if(is_parameter(token)) {\r\n        if(!(stmt.flags & DECL_NO_INOUT)) {\r\n          state.unshift(keyword())\r\n          return Advance\r\n        } else {\r\n          return unexpected('parameter is not allowed here')\r\n        }\r\n      } else {\r\n        state.fake(mknode(PLACEHOLDER, {data: '', position: token.position}))\r\n        return Advance\r\n      }\r\n    }\r\n\r\n    function precision_or_not() {\r\n      if(is_precision(token)) {\r\n        state.unshift(keyword())\r\n        return Advance\r\n      } else {\r\n        state.fake(mknode(PLACEHOLDER, {data: '', position: token.position}))\r\n        return Advance\r\n      }\r\n    }\r\n\r\n    function struct_or_type() {\r\n      if(token.data === 'struct') {\r\n        if(!(stmt.flags & DECL_ALLOW_STRUCT)) {\r\n          return unexpected('cannot nest structs')\r\n        }\r\n        state.unshift(struct())\r\n        return Advance\r\n      }\r\n\r\n      if(token.type === 'keyword') {\r\n        state.unshift(keyword())\r\n        return Advance\r\n      }\r\n\r\n      var lookup = state.scope.find(token.data)\r\n\r\n      if(lookup) {\r\n        state.fake(Object.create(lookup))\r\n        tokens.shift()\r\n        return Advance\r\n      }\r\n      return unexpected('expected user defined type, struct or keyword, got '+token.data)\r\n    }\r\n\r\n    function maybe_name() {\r\n      if(token.data === ',' && !(stmt.flags & DECL_ALLOW_COMMA)) {\r\n        return state.shift()\r\n      }\r\n\r\n      if(token.data === '[') {\r\n        // oh lord.\r\n        state.unshift(quantifier())\r\n        return\r\n      }\r\n\r\n      if(token.data === ')') return state.shift()\r\n\r\n      if(token.data === ';') {\r\n        return stmt.stage + 3\r\n      }\r\n\r\n      if(token.type !== 'ident' && token.type !== 'builtin') {\r\n        return unexpected('expected identifier, got '+token.data)\r\n      }\r\n\r\n      stmt.collected_name = tokens.shift()\r\n      return Advance\r\n    }\r\n\r\n    function maybe_lparen() {\r\n      if(token.data === '(') {\r\n        tokens.unshift(stmt.collected_name)\r\n        delete stmt.collected_name\r\n        state.unshift(fn())\r\n        return stmt.stage + 2\r\n      }\r\n      return Advance\r\n    }\r\n\r\n    function is_decllist() {\r\n      tokens.unshift(stmt.collected_name)\r\n      delete stmt.collected_name\r\n      state.unshift(decllist())\r\n      return Advance\r\n    }\r\n\r\n    function done() {\r\n      return state.shift()\r\n    }\r\n  }\r\n\r\n  function parse_decllist() {\r\n    // grab ident\r\n\r\n    if(token.type === 'ident' || token.type === 'builtin') {\r\n      var name = token.data\r\n      state.unshift(ident())\r\n      state.scope.define(name)\r\n      return\r\n    }\r\n\r\n    if(token.type === 'operator') {\r\n\r\n      if(token.data === ',') {\r\n        // multi-decl!\r\n        if(!(state[1].flags & DECL_ALLOW_COMMA)) {\r\n          return state.shift()\r\n        }\r\n\r\n        return tokens.shift()\r\n      } else if(token.data === '=') {\r\n        if(!(state[1].flags & DECL_ALLOW_ASSIGN)) return unexpected('`=` is not allowed here.')\r\n\r\n        tokens.shift()\r\n\r\n        state.unshift(expr(',', ';'))\r\n        return\r\n      } else if(token.data === '[') {\r\n        state.unshift(quantifier())\r\n        return\r\n      }\r\n    }\r\n    return state.shift()\r\n  }\r\n\r\n  function parse_keyword_or_ident() {\r\n    if(token.type === 'keyword') {\r\n      state[0].type = 'keyword'\r\n      state[0].mode = KEYWORD\r\n      return\r\n    }\r\n\r\n    if(token.type === 'ident') {\r\n      state[0].type = 'ident'\r\n      state[0].mode = IDENT\r\n      return\r\n    }\r\n\r\n    return unexpected('expected keyword or user-defined name, got '+token.data)\r\n  }\r\n\r\n  function parse_keyword() {\r\n    if(token.type !== 'keyword') {\r\n      return unexpected('expected keyword, got '+token.data)\r\n    }\r\n\r\n    return state.shift(), tokens.shift()\r\n  }\r\n\r\n  function parse_ident() {\r\n    if(token.type !== 'ident' && token.type !== 'builtin') {\r\n      return unexpected('expected user-defined name, got '+token.data)\r\n    }\r\n\r\n    state[0].data = token.data\r\n    return state.shift(), tokens.shift()\r\n  }\r\n\r\n\r\n  function parse_expr() {\r\n    var expecting = state[0].expecting\r\n\r\n    state[0].tokens = state[0].tokens || []\r\n\r\n    if(state[0].parenlevel === undefined) {\r\n      state[0].parenlevel = 0\r\n      state[0].bracelevel = 0\r\n    }\r\n    if(state[0].parenlevel < 1 && expecting.indexOf(token.data) > -1) {\r\n      return parseexpr(state[0].tokens)\r\n    }\r\n    if(token.data === '(') {\r\n      ++state[0].parenlevel\r\n    } else if(token.data === ')') {\r\n      --state[0].parenlevel\r\n    }\r\n\r\n    switch(token.data) {\r\n      case '{': ++state[0].bracelevel; break\r\n      case '}': --state[0].bracelevel; break\r\n      case '(': ++state[0].parenlevel; break\r\n      case ')': --state[0].parenlevel; break\r\n    }\r\n\r\n    if(state[0].parenlevel < 0) return unexpected('unexpected `)`')\r\n    if(state[0].bracelevel < 0) return unexpected('unexpected `}`')\r\n\r\n    state[0].tokens.push(tokens.shift())\r\n    return\r\n\r\n    function parseexpr(tokens) {\r\n      try {\r\n        full_parse_expr(state, tokens)\r\n      } catch(err) {\r\n        errored = true\r\n        throw err\r\n      }\r\n\r\n      return state.shift()\r\n    }\r\n  }\r\n\r\n  // node types ---------------\r\n\r\n  function n(type) {\r\n    // this is a function factory that suffices for most kinds of expressions and statements\r\n    return function() {\r\n      return mknode(type, token)\r\n    }\r\n  }\r\n\r\n  function adhoc() {\r\n    return mknode(token_map[token.type], token, node)\r\n  }\r\n\r\n  function decl(flags) {\r\n    var _ = mknode(DECL, token, node)\r\n    _.flags = flags\r\n\r\n    return _\r\n  }\r\n\r\n  function struct(allow_assign, allow_comma) {\r\n    var _ = mknode(STRUCT, token, node)\r\n    _.allow_assign = allow_assign === undefined ? true : allow_assign\r\n    _.allow_comma = allow_comma === undefined ? true : allow_comma\r\n    return _\r\n  }\r\n\r\n  function expr() {\r\n    var n = mknode(EXPR, token, node)\r\n\r\n    n.expecting = [].slice.call(arguments)\r\n    return n\r\n  }\r\n\r\n  function keyword(default_value) {\r\n    var t = token\r\n    if(default_value) {\r\n      t = {'type': '(implied)', data: '(default)', position: t.position}\r\n    }\r\n    return mknode(KEYWORD, t, node)\r\n  }\r\n\r\n  // utils ----------------------------\r\n\r\n  function unexpected(str) {\r\n    errored = true\r\n    throw new Error(\r\n      (str || 'unexpected '+state) +\r\n      ' at line '+state[0].token.line\r\n    )\r\n  }\r\n\r\n  function assert(type, data) {\r\n    return 1,\r\n      assert_null_string_or_array(type, token.type) &&\r\n      assert_null_string_or_array(data, token.data)\r\n  }\r\n\r\n  function assert_null_string_or_array(x, y) {\r\n    switch(typeof x) {\r\n      case 'string': if(y !== x) {\r\n        unexpected('expected `'+x+'`, got '+y+'\\n'+token.data);\r\n      } return !errored\r\n\r\n      case 'object': if(x && x.indexOf(y) === -1) {\r\n        unexpected('expected one of `'+x.join('`, `')+'`, got '+y);\r\n      } return !errored\r\n    }\r\n    return true\r\n  }\r\n\r\n  // stative ----------------------------\r\n\r\n  function stative() {\r\n    var steps = [].slice.call(arguments)\r\n      , step\r\n      , result\r\n\r\n    return function() {\r\n      var current = state[0]\r\n\r\n      current.stage || (current.stage = 0)\r\n\r\n      step = steps[current.stage]\r\n      if(!step) return unexpected('parser in undefined state!')\r\n\r\n      result = step()\r\n\r\n      if(result === Advance) return ++current.stage\r\n      if(result === undefined) return\r\n      current.stage = result\r\n    }\r\n  }\r\n\r\n  function advance(op, t) {\r\n    t = t || 'operator'\r\n    return function() {\r\n      if(!assert(t, op)) return\r\n\r\n      var last = tokens.shift()\r\n        , children = state[0].children\r\n        , last_node = children[children.length - 1]\r\n\r\n      if(last_node && last_node.token && last.preceding) {\r\n        last_node.token.succeeding = last_node.token.succeeding || []\r\n        last_node.token.succeeding = last_node.token.succeeding.concat(last.preceding)\r\n      }\r\n      return Advance\r\n    }\r\n  }\r\n\r\n  function advance_expr(until) {\r\n    return function() {\r\n      state.unshift(expr(until))\r\n      return Advance\r\n    }\r\n  }\r\n\r\n  function advance_ident(declare) {\r\n    return declare ? function() {\r\n      var name = token.data\r\n      return assert('ident') && (state.unshift(ident()), state.scope.define(name), Advance)\r\n    } :  function() {\r\n      if(!assert('ident')) return\r\n\r\n      var s = Object.create(state.scope.find(token.data))\r\n      s.token = token\r\n\r\n      return (tokens.shift(), Advance)\r\n    }\r\n  }\r\n\r\n  function advance_stmtlist() {\r\n    return function() {\r\n      var n = stmtlist()\r\n      n.expecting = '}'\r\n      return state.unshift(n), Advance\r\n    }\r\n  }\r\n\r\n  function maybe_stmtlist(skip) {\r\n    return function() {\r\n      var current = state[0].stage\r\n      if(token.data !== '{') { return state.unshift(stmt()), current + skip }\r\n      return tokens.shift(), Advance\r\n    }\r\n  }\r\n\r\n  function popstmt() {\r\n    return function() { return state.shift(), state.shift() }\r\n  }\r\n\r\n\r\n  function setup_stative_parsers() {\r\n\r\n    // could also be\r\n    // struct { } decllist\r\n    parse_struct =\r\n        stative(\r\n          advance('struct', 'keyword')\r\n        , function() {\r\n            if(token.data === '{') {\r\n              state.fake(mknode(IDENT, {data:'', position: token.position, type:'ident'}))\r\n              return Advance\r\n            }\r\n\r\n            return advance_ident(true)()\r\n          }\r\n        , function() { state.scope.enter(); return Advance }\r\n        , advance('{')\r\n        , function() {\r\n            if(token.type === 'preprocessor') {\r\n              state.fake(adhoc())\r\n              tokens.shift()\r\n              return\r\n            }\r\n            if(token.data === '}') {\r\n              state.scope.exit()\r\n              tokens.shift()\r\n              return state.shift()\r\n            }\r\n            if(token.data === ';') { tokens.shift(); return }\r\n            state.unshift(decl(DECL_STRUCT))\r\n          }\r\n        )\r\n\r\n    parse_precision =\r\n        stative(\r\n          function() { return tokens.shift(), Advance }\r\n        , function() {\r\n            return assert(\r\n            'keyword', ['lowp', 'mediump', 'highp']\r\n            ) && (state.unshift(keyword()), Advance)\r\n          }\r\n        , function() { return (state.unshift(keyword()), Advance) }\r\n        , function() { return state.shift() }\r\n        )\r\n\r\n    parse_quantifier =\r\n        stative(\r\n          advance('[')\r\n        , advance_expr(']')\r\n        , advance(']')\r\n        , function() { return state.shift() }\r\n        )\r\n\r\n    parse_forloop =\r\n        stative(\r\n          advance('for', 'keyword')\r\n        , advance('(')\r\n        , function() {\r\n            var lookup\r\n            if(token.type === 'ident') {\r\n              if(!(lookup = state.scope.find(token.data))) {\r\n                lookup = state.create_node()\r\n              }\r\n\r\n              if(lookup.parent.type === 'struct') {\r\n                return state.unshift(decl(DECL_STATEMENT)), Advance\r\n              }\r\n            } else if(token.type === 'builtin' || token.type === 'keyword') {\r\n              return state.unshift(decl(DECL_STATEMENT)), Advance\r\n            }\r\n            return advance_expr(';')()\r\n          }\r\n        , advance(';')\r\n        , advance_expr(';')\r\n        , advance(';')\r\n        , advance_expr(')')\r\n        , advance(')')\r\n        , maybe_stmtlist(3)\r\n        , advance_stmtlist()\r\n        , advance('}')\r\n        , popstmt()\r\n        )\r\n\r\n    parse_if =\r\n        stative(\r\n          advance('if', 'keyword')\r\n        , advance('(')\r\n        , advance_expr(')')\r\n        , advance(')')\r\n        , maybe_stmtlist(3)\r\n        , advance_stmtlist()\r\n        , advance('}')\r\n        , function() {\r\n            if(token.data === 'else') {\r\n              return tokens.shift(), state.unshift(stmt()), Advance\r\n            }\r\n            return popstmt()()\r\n          }\r\n        , popstmt()\r\n        )\r\n\r\n    parse_return =\r\n        stative(\r\n          advance('return', 'keyword')\r\n        , function() {\r\n            if(token.data === ';') return Advance\r\n            return state.unshift(expr(';')), Advance\r\n          }\r\n        , function() { tokens.shift(), popstmt()() }\r\n        )\r\n\r\n    parse_whileloop =\r\n        stative(\r\n          advance('while', 'keyword')\r\n        , advance('(')\r\n        , advance_expr(')')\r\n        , advance(')')\r\n        , maybe_stmtlist(3)\r\n        , advance_stmtlist()\r\n        , advance('}')\r\n        , popstmt()\r\n        )\r\n\r\n    parse_dowhileloop =\r\n      stative(\r\n        advance('do', 'keyword')\r\n      , maybe_stmtlist(3)\r\n      , advance_stmtlist()\r\n      , advance('}')\r\n      , advance('while', 'keyword')\r\n      , advance('(')\r\n      , advance_expr(')')\r\n      , advance(')')\r\n      , popstmt()\r\n      )\r\n\r\n    parse_function =\r\n      stative(\r\n        function() {\r\n          for(var i = 1, len = state.length; i < len; ++i) if(state[i].mode === FUNCTION) {\r\n            return unexpected('function definition is not allowed within another function')\r\n          }\r\n\r\n          return Advance\r\n        }\r\n      , function() {\r\n          if(!assert(\"ident\")) return\r\n\r\n          var name = token.data\r\n            , lookup = state.scope.find(name)\r\n\r\n          state.unshift(ident())\r\n          state.scope.define(name)\r\n\r\n          state.scope.enter(lookup ? lookup.scope : null)\r\n          return Advance\r\n        }\r\n      , advance('(')\r\n      , function() { return state.unshift(fnargs()), Advance }\r\n      , advance(')')\r\n      , function() {\r\n          // forward decl\r\n          if(token.data === ';') {\r\n            return state.scope.exit(), state.shift(), state.shift()\r\n          }\r\n          return Advance\r\n        }\r\n      , advance('{')\r\n      , advance_stmtlist()\r\n      , advance('}')\r\n      , function() { state.scope.exit(); return Advance }\r\n      , function() { return state.shift(), state.shift(), state.shift() }\r\n      )\r\n\r\n    parse_function_args =\r\n      stative(\r\n        function() {\r\n          if(token.data === 'void') { state.fake(keyword()); tokens.shift(); return Advance }\r\n          if(token.data === ')') { state.shift(); return }\r\n          if(token.data === 'struct') {\r\n            state.unshift(struct(NO_ASSIGN_ALLOWED, NO_COMMA_ALLOWED))\r\n            return Advance\r\n          }\r\n          state.unshift(decl(DECL_FUNCTION))\r\n          return Advance\r\n        }\r\n      , function() {\r\n          if(token.data === ',') { tokens.shift(); return 0 }\r\n          if(token.data === ')') { state.shift(); return }\r\n          unexpected('expected one of `,` or `)`, got '+token.data)\r\n        }\r\n      )\r\n  }\r\n}\r\n\r\nfunction mknode(mode, sourcetoken) {\r\n  return {\r\n      mode: mode\r\n    , token: sourcetoken\r\n    , children: []\r\n    , type: stmt_type[mode]\r\n    , id: (Math.random() * 0xFFFFFFFF).toString(16)\r\n  }\r\n}\r\n\r\nfunction is_storage(token) {\r\n  return token.data === 'const' ||\r\n         token.data === 'attribute' ||\r\n         token.data === 'uniform' ||\r\n         token.data === 'varying'\r\n}\r\n\r\nfunction is_parameter(token) {\r\n  return token.data === 'in' ||\r\n         token.data === 'inout' ||\r\n         token.data === 'out'\r\n}\r\n\r\nfunction is_precision(token) {\r\n  return token.data === 'highp' ||\r\n         token.data === 'mediump' ||\r\n         token.data === 'lowp'\r\n}\r\n","module.exports = scope\r\n\r\nfunction scope(state) {\r\n  if(this.constructor !== scope)\r\n    return new scope(state)\r\n\r\n  this.state = state\r\n  this.scopes = []\r\n  this.current = null\r\n}\r\n\r\nvar cons = scope\r\n  , proto = cons.prototype\r\n\r\nproto.enter = function(s) {\r\n  this.scopes.push(\r\n    this.current = this.state[0].scope = s || {}\r\n  )\r\n}\r\n\r\nproto.exit = function() {\r\n  this.scopes.pop()\r\n  this.current = this.scopes[this.scopes.length - 1]\r\n}\r\n\r\nproto.define = function(str) {\r\n  this.current[str] = this.state[0]\r\n}\r\n\r\nproto.find = function(name, fail) {\r\n  for(var i = this.scopes.length - 1; i > -1; --i) {\r\n    if(this.scopes[i].hasOwnProperty(name)) {\r\n      return this.scopes[i][name]\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n","module.exports = tokenize\r\n\r\nvar literals100 = require('./lib/literals')\r\n  , operators = require('./lib/operators')\r\n  , builtins100 = require('./lib/builtins')\r\n  , literals300es = require('./lib/literals-300es')\r\n  , builtins300es = require('./lib/builtins-300es')\r\n\r\nvar NORMAL = 999          // <-- never emitted\r\n  , TOKEN = 9999          // <-- never emitted\r\n  , BLOCK_COMMENT = 0\r\n  , LINE_COMMENT = 1\r\n  , PREPROCESSOR = 2\r\n  , OPERATOR = 3\r\n  , INTEGER = 4\r\n  , FLOAT = 5\r\n  , IDENT = 6\r\n  , BUILTIN = 7\r\n  , KEYWORD = 8\r\n  , WHITESPACE = 9\r\n  , EOF = 10\r\n  , HEX = 11\r\n\r\nvar map = [\r\n    'block-comment'\r\n  , 'line-comment'\r\n  , 'preprocessor'\r\n  , 'operator'\r\n  , 'integer'\r\n  , 'float'\r\n  , 'ident'\r\n  , 'builtin'\r\n  , 'keyword'\r\n  , 'whitespace'\r\n  , 'eof'\r\n  , 'integer'\r\n]\r\n\r\nfunction tokenize(opt) {\r\n  var i = 0\r\n    , total = 0\r\n    , mode = NORMAL\r\n    , c\r\n    , last\r\n    , content = []\r\n    , tokens = []\r\n    , token_idx = 0\r\n    , token_offs = 0\r\n    , line = 1\r\n    , col = 0\r\n    , start = 0\r\n    , isnum = false\r\n    , isoperator = false\r\n    , input = ''\r\n    , len\r\n\r\n  opt = opt || {}\r\n  var allBuiltins = builtins100\r\n  var allLiterals = literals100\r\n  if (opt.version === '300 es') {\r\n    allBuiltins = builtins300es\r\n    allLiterals = literals300es\r\n  }\r\n\r\n  // cache by name\r\n  var builtinsDict = {}, literalsDict = {}\r\n  for (var i = 0; i < allBuiltins.length; i++) {\r\n    builtinsDict[allBuiltins[i]] = true\r\n  }\r\n  for (var i = 0; i < allLiterals.length; i++) {\r\n    literalsDict[allLiterals[i]] = true\r\n  }\r\n\r\n  return function(data) {\r\n    tokens = []\r\n    if (data !== null) return write(data)\r\n    return end()\r\n  }\r\n\r\n  function token(data) {\r\n    if (data.length) {\r\n      tokens.push({\r\n        type: map[mode]\r\n      , data: data\r\n      , position: start\r\n      , line: line\r\n      , column: col\r\n      })\r\n    }\r\n  }\r\n\r\n  function write(chunk) {\r\n    i = 0\r\n\r\n    if (chunk.toString) chunk = chunk.toString()\r\n\r\n    input += chunk.replace(/\\r\\n/g, '\\n')\r\n    len = input.length\r\n\r\n\r\n    var last\r\n\r\n    while(c = input[i], i < len) {\r\n      last = i\r\n\r\n      switch(mode) {\r\n        case BLOCK_COMMENT: i = block_comment(); break\r\n        case LINE_COMMENT: i = line_comment(); break\r\n        case PREPROCESSOR: i = preprocessor(); break\r\n        case OPERATOR: i = operator(); break\r\n        case INTEGER: i = integer(); break\r\n        case HEX: i = hex(); break\r\n        case FLOAT: i = decimal(); break\r\n        case TOKEN: i = readtoken(); break\r\n        case WHITESPACE: i = whitespace(); break\r\n        case NORMAL: i = normal(); break\r\n      }\r\n\r\n      if(last !== i) {\r\n        switch(input[last]) {\r\n          case '\\n': col = 0; ++line; break\r\n          default: ++col; break\r\n        }\r\n      }\r\n    }\r\n\r\n    total += i\r\n    input = input.slice(i)\r\n    return tokens\r\n  }\r\n\r\n  function end(chunk) {\r\n    if(content.length) {\r\n      token(content.join(''))\r\n    }\r\n\r\n    mode = EOF\r\n    token('(eof)')\r\n    return tokens\r\n  }\r\n\r\n  function normal() {\r\n    content = content.length ? [] : content\r\n\r\n    if(last === '/' && c === '*') {\r\n      start = total + i - 1\r\n      mode = BLOCK_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      start = total + i - 1\r\n      mode = LINE_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === '#') {\r\n      mode = PREPROCESSOR\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    if(/\\s/.test(c)) {\r\n      mode = WHITESPACE\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    isnum = /\\d/.test(c)\r\n    isoperator = /[^\\w_]/.test(c)\r\n\r\n    start = total + i\r\n    mode = isnum ? INTEGER : isoperator ? OPERATOR : TOKEN\r\n    return i\r\n  }\r\n\r\n  function whitespace() {\r\n    if(/[^\\s]/g.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function preprocessor() {\r\n    if((c === '\\r' || c === '\\n') && last !== '\\\\') {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function line_comment() {\r\n    return preprocessor()\r\n  }\r\n\r\n  function block_comment() {\r\n    if(c === '/' && last === '*') {\r\n      content.push(c)\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function operator() {\r\n    if(last === '.' && /\\d/.test(c)) {\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '*') {\r\n      mode = BLOCK_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      mode = LINE_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(c === '.' && content.length) {\r\n      while(determine_operator(content));\r\n\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(c === ';' || c === ')' || c === '(') {\r\n      if(content.length) while(determine_operator(content));\r\n      token(c)\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    var is_composite_operator = content.length === 2 && c !== '='\r\n    if(/[\\w_\\d\\s]/.test(c) || is_composite_operator) {\r\n      while(determine_operator(content));\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function determine_operator(buf) {\r\n    var j = 0\r\n      , idx\r\n      , res\r\n\r\n    do {\r\n      idx = operators.indexOf(buf.slice(0, buf.length + j).join(''))\r\n      res = operators[idx]\r\n\r\n      if(idx === -1) {\r\n        if(j-- + buf.length > 0) continue\r\n        res = buf.slice(0, 1).join('')\r\n      }\r\n\r\n      token(res)\r\n\r\n      start += res.length\r\n      content = content.slice(res.length)\r\n      return content.length\r\n    } while(1)\r\n  }\r\n\r\n  function hex() {\r\n    if(/[^a-fA-F0-9]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function integer() {\r\n    if(c === '.') {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === 'x' && content.length === 1 && content[0] === '0') {\r\n      mode = HEX\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function decimal() {\r\n    if(c === 'f') {\r\n      content.push(c)\r\n      last = c\r\n      i += 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if ((c === '-' || c === '+') && /[eE]/.test(last)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function readtoken() {\r\n    if(/[^\\d\\w_]/.test(c)) {\r\n      var contentstr = content.join('')\r\n      if(literalsDict[contentstr]) {\r\n        mode = KEYWORD\r\n      } else if(builtinsDict[contentstr]) {\r\n        mode = BUILTIN\r\n      } else {\r\n        mode = IDENT\r\n      }\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n}\r\n","// 300es builtins/reserved words that were previously valid in v100\r\nvar v100 = require('./builtins')\r\n\r\n// The texture2D|Cube functions have been removed\r\n// And the gl_ features are updated\r\nv100 = v100.slice().filter(function (b) {\r\n  return !/^(gl\\_|texture)/.test(b)\r\n})\r\n\r\nmodule.exports = v100.concat([\r\n  // the updated gl_ constants\r\n    'gl_VertexID'\r\n  , 'gl_InstanceID'\r\n  , 'gl_Position'\r\n  , 'gl_PointSize'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FragDepth'\r\n  , 'gl_PointCoord'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexUniformVectors'\r\n  , 'gl_MaxVertexOutputVectors'\r\n  , 'gl_MaxFragmentInputVectors'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxFragmentUniformVectors'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MinProgramTexelOffset'\r\n  , 'gl_MaxProgramTexelOffset'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_DepthRange'\r\n\r\n  // other builtins\r\n  , 'trunc'\r\n  , 'round'\r\n  , 'roundEven'\r\n  , 'isnan'\r\n  , 'isinf'\r\n  , 'floatBitsToInt'\r\n  , 'floatBitsToUint'\r\n  , 'intBitsToFloat'\r\n  , 'uintBitsToFloat'\r\n  , 'packSnorm2x16'\r\n  , 'unpackSnorm2x16'\r\n  , 'packUnorm2x16'\r\n  , 'unpackUnorm2x16'\r\n  , 'packHalf2x16'\r\n  , 'unpackHalf2x16'\r\n  , 'outerProduct'\r\n  , 'transpose'\r\n  , 'determinant'\r\n  , 'inverse'\r\n  , 'texture'\r\n  , 'textureSize'\r\n  , 'textureProj'\r\n  , 'textureLod'\r\n  , 'textureOffset'\r\n  , 'texelFetch'\r\n  , 'texelFetchOffset'\r\n  , 'textureProjOffset'\r\n  , 'textureLodOffset'\r\n  , 'textureProjLod'\r\n  , 'textureProjLodOffset'\r\n  , 'textureGrad'\r\n  , 'textureGradOffset'\r\n  , 'textureProjGrad'\r\n  , 'textureProjGradOffset'\r\n])\r\n","module.exports = [\r\n  // Keep this list sorted\r\n  'abs'\r\n  , 'acos'\r\n  , 'all'\r\n  , 'any'\r\n  , 'asin'\r\n  , 'atan'\r\n  , 'ceil'\r\n  , 'clamp'\r\n  , 'cos'\r\n  , 'cross'\r\n  , 'dFdx'\r\n  , 'dFdy'\r\n  , 'degrees'\r\n  , 'distance'\r\n  , 'dot'\r\n  , 'equal'\r\n  , 'exp'\r\n  , 'exp2'\r\n  , 'faceforward'\r\n  , 'floor'\r\n  , 'fract'\r\n  , 'gl_BackColor'\r\n  , 'gl_BackLightModelProduct'\r\n  , 'gl_BackLightProduct'\r\n  , 'gl_BackMaterial'\r\n  , 'gl_BackSecondaryColor'\r\n  , 'gl_ClipPlane'\r\n  , 'gl_ClipVertex'\r\n  , 'gl_Color'\r\n  , 'gl_DepthRange'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_EyePlaneQ'\r\n  , 'gl_EyePlaneR'\r\n  , 'gl_EyePlaneS'\r\n  , 'gl_EyePlaneT'\r\n  , 'gl_Fog'\r\n  , 'gl_FogCoord'\r\n  , 'gl_FogFragCoord'\r\n  , 'gl_FogParameters'\r\n  , 'gl_FragColor'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FragData'\r\n  , 'gl_FragDepth'\r\n  , 'gl_FragDepthEXT'\r\n  , 'gl_FrontColor'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FrontLightModelProduct'\r\n  , 'gl_FrontLightProduct'\r\n  , 'gl_FrontMaterial'\r\n  , 'gl_FrontSecondaryColor'\r\n  , 'gl_LightModel'\r\n  , 'gl_LightModelParameters'\r\n  , 'gl_LightModelProducts'\r\n  , 'gl_LightProducts'\r\n  , 'gl_LightSource'\r\n  , 'gl_LightSourceParameters'\r\n  , 'gl_MaterialParameters'\r\n  , 'gl_MaxClipPlanes'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MaxFragmentUniformComponents'\r\n  , 'gl_MaxLights'\r\n  , 'gl_MaxTextureCoords'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxTextureUnits'\r\n  , 'gl_MaxVaryingFloats'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxVertexUniformComponents'\r\n  , 'gl_ModelViewMatrix'\r\n  , 'gl_ModelViewMatrixInverse'\r\n  , 'gl_ModelViewMatrixInverseTranspose'\r\n  , 'gl_ModelViewMatrixTranspose'\r\n  , 'gl_ModelViewProjectionMatrix'\r\n  , 'gl_ModelViewProjectionMatrixInverse'\r\n  , 'gl_ModelViewProjectionMatrixInverseTranspose'\r\n  , 'gl_ModelViewProjectionMatrixTranspose'\r\n  , 'gl_MultiTexCoord0'\r\n  , 'gl_MultiTexCoord1'\r\n  , 'gl_MultiTexCoord2'\r\n  , 'gl_MultiTexCoord3'\r\n  , 'gl_MultiTexCoord4'\r\n  , 'gl_MultiTexCoord5'\r\n  , 'gl_MultiTexCoord6'\r\n  , 'gl_MultiTexCoord7'\r\n  , 'gl_Normal'\r\n  , 'gl_NormalMatrix'\r\n  , 'gl_NormalScale'\r\n  , 'gl_ObjectPlaneQ'\r\n  , 'gl_ObjectPlaneR'\r\n  , 'gl_ObjectPlaneS'\r\n  , 'gl_ObjectPlaneT'\r\n  , 'gl_Point'\r\n  , 'gl_PointCoord'\r\n  , 'gl_PointParameters'\r\n  , 'gl_PointSize'\r\n  , 'gl_Position'\r\n  , 'gl_ProjectionMatrix'\r\n  , 'gl_ProjectionMatrixInverse'\r\n  , 'gl_ProjectionMatrixInverseTranspose'\r\n  , 'gl_ProjectionMatrixTranspose'\r\n  , 'gl_SecondaryColor'\r\n  , 'gl_TexCoord'\r\n  , 'gl_TextureEnvColor'\r\n  , 'gl_TextureMatrix'\r\n  , 'gl_TextureMatrixInverse'\r\n  , 'gl_TextureMatrixInverseTranspose'\r\n  , 'gl_TextureMatrixTranspose'\r\n  , 'gl_Vertex'\r\n  , 'greaterThan'\r\n  , 'greaterThanEqual'\r\n  , 'inversesqrt'\r\n  , 'length'\r\n  , 'lessThan'\r\n  , 'lessThanEqual'\r\n  , 'log'\r\n  , 'log2'\r\n  , 'matrixCompMult'\r\n  , 'max'\r\n  , 'min'\r\n  , 'mix'\r\n  , 'mod'\r\n  , 'normalize'\r\n  , 'not'\r\n  , 'notEqual'\r\n  , 'pow'\r\n  , 'radians'\r\n  , 'reflect'\r\n  , 'refract'\r\n  , 'sign'\r\n  , 'sin'\r\n  , 'smoothstep'\r\n  , 'sqrt'\r\n  , 'step'\r\n  , 'tan'\r\n  , 'texture2D'\r\n  , 'texture2DLod'\r\n  , 'texture2DProj'\r\n  , 'texture2DProjLod'\r\n  , 'textureCube'\r\n  , 'textureCubeLod'\r\n  , 'texture2DLodEXT'\r\n  , 'texture2DProjLodEXT'\r\n  , 'textureCubeLodEXT'\r\n  , 'texture2DGradEXT'\r\n  , 'texture2DProjGradEXT'\r\n  , 'textureCubeGradEXT'\r\n]\r\n","var v100 = require('./literals')\r\n\r\nmodule.exports = v100.slice().concat([\r\n   'layout'\r\n  , 'centroid'\r\n  , 'smooth'\r\n  , 'case'\r\n  , 'mat2x2'\r\n  , 'mat2x3'\r\n  , 'mat2x4'\r\n  , 'mat3x2'\r\n  , 'mat3x3'\r\n  , 'mat3x4'\r\n  , 'mat4x2'\r\n  , 'mat4x3'\r\n  , 'mat4x4'\r\n  , 'uvec2'\r\n  , 'uvec3'\r\n  , 'uvec4'\r\n  , 'samplerCubeShadow'\r\n  , 'sampler2DArray'\r\n  , 'sampler2DArrayShadow'\r\n  , 'isampler2D'\r\n  , 'isampler3D'\r\n  , 'isamplerCube'\r\n  , 'isampler2DArray'\r\n  , 'usampler2D'\r\n  , 'usampler3D'\r\n  , 'usamplerCube'\r\n  , 'usampler2DArray'\r\n  , 'coherent'\r\n  , 'restrict'\r\n  , 'readonly'\r\n  , 'writeonly'\r\n  , 'resource'\r\n  , 'atomic_uint'\r\n  , 'noperspective'\r\n  , 'patch'\r\n  , 'sample'\r\n  , 'subroutine'\r\n  , 'common'\r\n  , 'partition'\r\n  , 'active'\r\n  , 'filter'\r\n  , 'image1D'\r\n  , 'image2D'\r\n  , 'image3D'\r\n  , 'imageCube'\r\n  , 'iimage1D'\r\n  , 'iimage2D'\r\n  , 'iimage3D'\r\n  , 'iimageCube'\r\n  , 'uimage1D'\r\n  , 'uimage2D'\r\n  , 'uimage3D'\r\n  , 'uimageCube'\r\n  , 'image1DArray'\r\n  , 'image2DArray'\r\n  , 'iimage1DArray'\r\n  , 'iimage2DArray'\r\n  , 'uimage1DArray'\r\n  , 'uimage2DArray'\r\n  , 'image1DShadow'\r\n  , 'image2DShadow'\r\n  , 'image1DArrayShadow'\r\n  , 'image2DArrayShadow'\r\n  , 'imageBuffer'\r\n  , 'iimageBuffer'\r\n  , 'uimageBuffer'\r\n  , 'sampler1DArray'\r\n  , 'sampler1DArrayShadow'\r\n  , 'isampler1D'\r\n  , 'isampler1DArray'\r\n  , 'usampler1D'\r\n  , 'usampler1DArray'\r\n  , 'isampler2DRect'\r\n  , 'usampler2DRect'\r\n  , 'samplerBuffer'\r\n  , 'isamplerBuffer'\r\n  , 'usamplerBuffer'\r\n  , 'sampler2DMS'\r\n  , 'isampler2DMS'\r\n  , 'usampler2DMS'\r\n  , 'sampler2DMSArray'\r\n  , 'isampler2DMSArray'\r\n  , 'usampler2DMSArray'\r\n])\r\n","module.exports = [\r\n  // current\r\n    'precision'\r\n  , 'highp'\r\n  , 'mediump'\r\n  , 'lowp'\r\n  , 'attribute'\r\n  , 'const'\r\n  , 'uniform'\r\n  , 'varying'\r\n  , 'break'\r\n  , 'continue'\r\n  , 'do'\r\n  , 'for'\r\n  , 'while'\r\n  , 'if'\r\n  , 'else'\r\n  , 'in'\r\n  , 'out'\r\n  , 'inout'\r\n  , 'float'\r\n  , 'int'\r\n  , 'uint'\r\n  , 'void'\r\n  , 'bool'\r\n  , 'true'\r\n  , 'false'\r\n  , 'discard'\r\n  , 'return'\r\n  , 'mat2'\r\n  , 'mat3'\r\n  , 'mat4'\r\n  , 'vec2'\r\n  , 'vec3'\r\n  , 'vec4'\r\n  , 'ivec2'\r\n  , 'ivec3'\r\n  , 'ivec4'\r\n  , 'bvec2'\r\n  , 'bvec3'\r\n  , 'bvec4'\r\n  , 'sampler1D'\r\n  , 'sampler2D'\r\n  , 'sampler3D'\r\n  , 'samplerCube'\r\n  , 'sampler1DShadow'\r\n  , 'sampler2DShadow'\r\n  , 'struct'\r\n\r\n  // future\r\n  , 'asm'\r\n  , 'class'\r\n  , 'union'\r\n  , 'enum'\r\n  , 'typedef'\r\n  , 'template'\r\n  , 'this'\r\n  , 'packed'\r\n  , 'goto'\r\n  , 'switch'\r\n  , 'default'\r\n  , 'inline'\r\n  , 'noinline'\r\n  , 'volatile'\r\n  , 'public'\r\n  , 'static'\r\n  , 'extern'\r\n  , 'external'\r\n  , 'interface'\r\n  , 'long'\r\n  , 'short'\r\n  , 'double'\r\n  , 'half'\r\n  , 'fixed'\r\n  , 'unsigned'\r\n  , 'input'\r\n  , 'output'\r\n  , 'hvec2'\r\n  , 'hvec3'\r\n  , 'hvec4'\r\n  , 'dvec2'\r\n  , 'dvec3'\r\n  , 'dvec4'\r\n  , 'fvec2'\r\n  , 'fvec3'\r\n  , 'fvec4'\r\n  , 'sampler2DRect'\r\n  , 'sampler3DRect'\r\n  , 'sampler2DRectShadow'\r\n  , 'sizeof'\r\n  , 'cast'\r\n  , 'namespace'\r\n  , 'using'\r\n]\r\n","module.exports = [\r\n    '<<='\r\n  , '>>='\r\n  , '++'\r\n  , '--'\r\n  , '<<'\r\n  , '>>'\r\n  , '<='\r\n  , '>='\r\n  , '=='\r\n  , '!='\r\n  , '&&'\r\n  , '||'\r\n  , '+='\r\n  , '-='\r\n  , '*='\r\n  , '/='\r\n  , '%='\r\n  , '&='\r\n  , '^^'\r\n  , '^='\r\n  , '|='\r\n  , '('\r\n  , ')'\r\n  , '['\r\n  , ']'\r\n  , '.'\r\n  , '!'\r\n  , '~'\r\n  , '*'\r\n  , '/'\r\n  , '%'\r\n  , '+'\r\n  , '-'\r\n  , '<'\r\n  , '>'\r\n  , '&'\r\n  , '^'\r\n  , '|'\r\n  , '?'\r\n  , ':'\r\n  , '='\r\n  , ','\r\n  , ';'\r\n  , '{'\r\n  , '}'\r\n]\r\n","var tokenize = require('./index')\r\n\r\nmodule.exports = tokenizeString\r\n\r\nfunction tokenizeString(str, opt) {\r\n  var generator = tokenize(opt)\r\n  var tokens = []\r\n\r\n  tokens = tokens.concat(generator(str))\r\n  tokens = tokens.concat(generator(null))\r\n\r\n  return tokens\r\n}\r\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexports.make = function (x) {\n  if (x == null) {\n    x = [];\n  }\n  if (!(x instanceof Array)) {\n    x = [+x != null ? +x : 0];\n  }\n  return x;\n};\n\nexports.nest = (a, b) => a.concat(b);\n\nexports.compare = function (a, b) {\n  const n = Math.min(a.length, b.length);\n  for (\n    let i = 0, end = n, asc = 0 <= end;\n    asc ? i < end : i > end;\n    asc ? i++ : i--\n  ) {\n    const p = a[i];\n    const q = b[i];\n    if (p > q) {\n      return -1;\n    }\n    if (p < q) {\n      return 1;\n    }\n  }\n  a = a.length;\n  b = b.length;\n  if (a > b) {\n    return -1;\n  } else if (a < b) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n\nexports.max = function (a, b) {\n  if (exports.compare(a, b) > 0) {\n    return b;\n  } else {\n    return a;\n  }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Graph of nodes with outlets\n*/\nexport class Graph {\n  static initClass() {\n    this.index = 0;\n\n    this.IN = 0;\n    this.OUT = 1;\n  }\n  // eslint-disable-next-line no-unused-vars\n  static id(name) {\n    return ++Graph.index;\n  }\n\n  constructor(nodes, parent = null) {\n    this.parent = parent;\n    this.id = Graph.id();\n    this.nodes = [];\n    nodes && this.add(nodes);\n  }\n\n  inputs() {\n    const inputs = [];\n    for (let node of Array.from(this.nodes)) {\n      for (let outlet of Array.from(node.inputs)) {\n        if (outlet.input === null) {\n          inputs.push(outlet);\n        }\n      }\n    }\n    return inputs;\n  }\n\n  outputs() {\n    const outputs = [];\n    for (let node of Array.from(this.nodes)) {\n      for (let outlet of Array.from(node.outputs)) {\n        if (outlet.output.length === 0) {\n          outputs.push(outlet);\n        }\n      }\n    }\n    return outputs;\n  }\n\n  getIn(name) {\n    return Array.from(this.inputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n  getOut(name) {\n    return Array.from(this.outputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n\n  add(node, ignore) {\n    if (node.length) {\n      for (let _node of Array.from(node)) {\n        this.add(_node);\n      }\n      return;\n    }\n\n    if (node.graph && !ignore) {\n      throw new Error(\"Adding node to two graphs at once\");\n    }\n\n    node.graph = this;\n    this.nodes.push(node);\n  }\n\n  remove(node, ignore) {\n    if (node.length) {\n      for (let _node of Array.from(node)) {\n        this.remove(_node);\n      }\n      return;\n    }\n\n    if (node.graph !== this) {\n      throw new Error(\"Removing node from wrong graph.\");\n    }\n\n    ignore || node.disconnect();\n\n    this.nodes.splice(this.nodes.indexOf(node), 1);\n    node.graph = null;\n  }\n\n  adopt(node) {\n    if (node.length) {\n      for (let _node of Array.from(node)) {\n        this.adopt(_node);\n      }\n      return;\n    }\n\n    node.graph.remove(node, true);\n    this.add(node, true);\n  }\n}\nGraph.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\n\n/*\n  In/out outlet on node\n*/\nexport class Outlet {\n  static initClass() {\n    this.index = 0;\n  }\n  static make(outlet, extra) {\n    if (extra == null) {\n      extra = {};\n    }\n    const meta = extra;\n    if (outlet.meta != null) {\n      for (let key in outlet.meta) {\n        const value = outlet.meta[key];\n        meta[key] = value;\n      }\n    }\n    return new Outlet(\n      outlet.inout,\n      outlet.name,\n      outlet.hint,\n      outlet.type,\n      meta\n    );\n  }\n  static id(name) {\n    return `_io_${++Outlet.index}_${name}`;\n  }\n\n  static hint(name) {\n    name = name.replace(/^_io_[0-9]+_/, \"\");\n    name = name.replace(/_i_o$/, \"\");\n    return (name = name.replace(/(In|Out|Inout|InOut)$/, \"\"));\n  }\n\n  constructor(inout, name, hint, type, meta, id) {\n    this.inout = inout;\n    this.name = name;\n    this.hint = hint;\n    this.type = type;\n    if (meta == null) {\n      meta = {};\n    }\n    this.meta = meta;\n    this.id = id;\n    if (this.hint == null) {\n      this.hint = Outlet.hint(this.name);\n    }\n\n    this.node = null;\n    this.input = null;\n    this.output = [];\n    if (this.id == null) {\n      this.id = Outlet.id(this.hint);\n    }\n  }\n\n  // Change into given outlet without touching connections\n  morph(outlet) {\n    this.inout = outlet.inout;\n    this.name = outlet.name;\n    this.hint = outlet.hint;\n    this.type = outlet.type;\n    return (this.meta = outlet.meta);\n  }\n\n  // Copy with unique name and cloned metadata\n  dupe(name) {\n    if (name == null) {\n      name = this.id;\n    }\n    const outlet = Outlet.make(this);\n    outlet.name = name;\n    return outlet;\n  }\n\n  // Connect to given outlet\n  connect(outlet) {\n    // Auto-reverse in/out to out/in\n    if (this.inout === Graph.IN && outlet.inout === Graph.OUT) {\n      return outlet.connect(this);\n    }\n\n    // Disallow bad combinations\n    if (this.inout !== Graph.OUT || outlet.inout !== Graph.IN) {\n      throw new Error(\"Can only connect out to in.\");\n    }\n\n    // Check for existing connection\n    if (outlet.input === this) {\n      return;\n    }\n\n    // Disconnect existing connections\n    outlet.disconnect();\n\n    // Add new connection.\n    outlet.input = this;\n    return this.output.push(outlet);\n  }\n\n  // Disconnect given outlet (or all)\n  disconnect(outlet) {\n    // Disconnect input from the other side.\n    if (this.input) {\n      this.input.disconnect(this);\n    }\n\n    if (this.output.length) {\n      if (outlet) {\n        // Remove one outgoing connection.\n        const index = this.output.indexOf(outlet);\n        if (index >= 0) {\n          this.output.splice(index, 1);\n          return (outlet.input = null);\n        }\n      } else {\n        // Remove all outgoing connections.\n        for (outlet of Array.from(this.output)) {\n          outlet.input = null;\n        }\n        return (this.output = []);\n      }\n    }\n  }\n}\nOutlet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\nimport { Outlet } from \"./outlet\";\n\n/*\n Node in graph.\n*/\nexport class Node {\n  static initClass() {\n    this.index = 0;\n  }\n  static id(name) {\n    return ++Node.index;\n  }\n\n  constructor(owner, outlets) {\n    this.owner = owner;\n    this.graph = null;\n    this.inputs = [];\n    this.outputs = [];\n    this.all = [];\n    this.outlets = null;\n    this.id = Node.id();\n\n    this.setOutlets(outlets);\n  }\n\n  // Retrieve input\n  getIn(name) {\n    return Array.from(this.inputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve output\n  getOut(name) {\n    return Array.from(this.outputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve by name\n  get(name) {\n    return this.getIn(name) || this.getOut(name);\n  }\n\n  // Set new outlet definition\n  setOutlets(outlets) {\n    if (outlets != null) {\n      // First init\n      let outlet;\n      if (this.outlets == null) {\n        this.outlets = {};\n        for (outlet of Array.from(outlets)) {\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n        return;\n      }\n\n      // Return new/old outlet matching hash key\n      const hash = (\n        outlet // Match by name, direction and type.\n      ) => [outlet.name, outlet.inout, outlet.type].join(\"-\");\n\n      // Build hash of new outlets\n      const match = {};\n      for (outlet of Array.from(outlets)) {\n        match[hash(outlet)] = true;\n      }\n\n      // Remove missing outlets, record matches\n      for (let key in this.outlets) {\n        outlet = this.outlets[key];\n        key = hash(outlet);\n        if (match[key]) {\n          match[key] = outlet;\n        } else {\n          this._remove(outlet);\n        }\n      }\n\n      // Insert new outlets\n      for (outlet of Array.from(outlets)) {\n        // Find match by hash\n        const existing = match[hash(outlet)];\n        if (existing instanceof Outlet) {\n          // Update existing outlets in place to retain connections.\n          this._morph(existing, outlet);\n        } else {\n          // Spawn new outlet\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n      }\n\n      this;\n    }\n    return this.outlets;\n  }\n\n  // Connect to the target node by matching up inputs and outputs.\n  connect(node, empty, force) {\n    let dest, dests, hint, source, type;\n    const outlets = {};\n    const hints = {};\n\n    const typeHint = (outlet) => type + \"/\" + outlet.hint;\n\n    // Hash the types/hints of available target outlets.\n    for (dest of Array.from(node.inputs)) {\n      // Only autoconnect if not already connected\n      var list;\n      if (!force && dest.input) {\n        continue;\n      }\n\n      // Match outlets by type/name hint, then type/position key\n      ({ type } = dest);\n      hint = typeHint(dest);\n\n      if (!hints[hint]) {\n        hints[hint] = dest;\n      }\n      outlets[type] = list = outlets[type] || [];\n      list.push(dest);\n    }\n\n    // Available source outlets\n    let sources = this.outputs;\n\n    // Ignore connected source if only matching empties.\n    sources = sources.filter((outlet) => !(empty && outlet.output.length));\n\n    // Match hints first\n    for (source of Array.from(sources.slice())) {\n      // Match outlets by type and name\n      ({ type } = source);\n      hint = typeHint(source);\n      dests = outlets[type];\n\n      // Connect if found\n      if ((dest = hints[hint])) {\n        source.connect(dest);\n\n        // Remove from potential set\n        delete hints[hint];\n        dests.splice(dests.indexOf(dest), 1);\n        sources.splice(sources.indexOf(source), 1);\n      }\n    }\n\n    // Match what's left\n    if (!sources.length) {\n      return this;\n    }\n    for (source of Array.from(sources.slice())) {\n      ({ type } = source);\n      dests = outlets[type];\n\n      // Match outlets by type and order\n      if (dests && dests.length) {\n        // Link up and remove from potential set\n        source.connect(dests.shift());\n      }\n    }\n\n    return this;\n  }\n\n  // Disconnect entire node\n  disconnect(node) {\n    let outlet;\n    for (outlet of Array.from(this.inputs)) {\n      outlet.disconnect();\n    }\n    for (outlet of Array.from(this.outputs)) {\n      outlet.disconnect();\n    }\n\n    return this;\n  }\n\n  // Return hash key for outlet\n  _key(outlet) {\n    return [outlet.name, outlet.inout].join(\"-\");\n  }\n\n  // Add outlet object to node\n  _add(outlet) {\n    const key = this._key(outlet);\n\n    // Sanity checks\n    if (outlet.node) {\n      throw new Error(\"Adding outlet to two nodes at once.\");\n    }\n    if (this.outlets[key]) {\n      throw new Error(`Adding two identical outlets to same node. (${key})`);\n    }\n\n    // Link back outlet\n    outlet.node = this;\n\n    // Add to name hash and inout list\n    if (outlet.inout === Graph.IN) {\n      this.inputs.push(outlet);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.push(outlet);\n    }\n    this.all.push(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Morph outlet to other\n  _morph(existing, outlet) {\n    let key = this._key(outlet);\n    delete this.outlets[key];\n\n    existing.morph(outlet);\n\n    key = this._key(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Remove outlet object from node.\n  _remove(outlet) {\n    const key = this._key(outlet);\n    const { inout } = outlet;\n\n    // Sanity checks\n    if (outlet.node !== this) {\n      throw new Error(\"Removing outlet from wrong node.\");\n    }\n\n    // Disconnect outlet.\n    outlet.disconnect();\n\n    // Unlink outlet.\n    outlet.node = null;\n\n    // Remove from name list and inout list.\n    delete this.outlets[key];\n    if (outlet.inout === Graph.IN) {\n      this.inputs.splice(this.inputs.indexOf(outlet), 1);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.splice(this.outputs.indexOf(outlet), 1);\n    }\n    this.all.splice(this.all.indexOf(outlet), 1);\n    return this;\n  }\n}\nNode.initClass();\n","import { Graph } from \"./graph\";\nexport const { IN, OUT } = Graph;\n\nexport * from \"./graph\";\nexport * from \"./node\";\nexport * from \"./outlet\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexport class Snippet {\n  static initClass() {\n    this.index = 0;\n  }\n  static namespace() {\n    return `_sn_${++Snippet.index}_`;\n  }\n\n  static load(language, name, code) {\n    const program = language.parse(name, code);\n    const [sigs, compiler] = Array.from(language.compile(program));\n    return new Snippet(language, sigs, compiler, name, code);\n  }\n\n  constructor(language, _signatures, _compiler, _name, _original) {\n    this.language = language;\n    this._signatures = _signatures;\n    this._compiler = _compiler;\n    this._name = _name;\n    this._original = _original;\n    this.namespace = null;\n    this.code = null;\n\n    this.main = null;\n    this.entry = null;\n\n    this.uniforms = null;\n    this.externals = null;\n    this.symbols = null;\n    this.attributes = null;\n    this.varyings = null;\n\n    // Tidy up object for export\n    if (!this.language) {\n      delete this.language;\n    }\n    if (!this._signatures) {\n      delete this._signatures;\n    }\n    if (!this._compiler) {\n      delete this._compiler;\n    }\n    if (!this._original) {\n      delete this._original;\n    }\n\n    // Insert snippet name if not provided\n    if (!this._name) {\n      this._name =\n        this._signatures != null ? this._signatures.main.name : undefined;\n    }\n  }\n\n  clone() {\n    return new Snippet(\n      this.language,\n      this._signatures,\n      this._compiler,\n      this._name,\n      this._original\n    );\n  }\n\n  bind(config, uniforms, namespace, defines) {\n    // Alt syntax (namespace, uniforms, defines)\n    let def, left;\n    let v;\n    if (uniforms === \"\" + uniforms) {\n      [namespace, uniforms, defines] = Array.from([\n        uniforms,\n        namespace != null ? namespace : {},\n        defines != null ? defines : {},\n      ]);\n      // Alt syntax (uniforms, defines)\n    } else if (namespace !== \"\" + namespace) {\n      [defines, namespace] = Array.from([\n        namespace != null ? namespace : {},\n        undefined,\n      ]);\n    }\n\n    // Prepare data structure\n    this.main = this._signatures.main;\n    this.namespace =\n      (left = namespace != null ? namespace : this.namespace) != null\n        ? left\n        : Snippet.namespace();\n    this.entry = this.namespace + this.main.name;\n\n    this.uniforms = {};\n    this.varyings = {};\n    this.attributes = {};\n    this.externals = {};\n    this.symbols = [];\n    const exist = {};\n    const exceptions = {};\n\n    // Handle globals and locals for prefixing\n    const global = function (name) {\n      exceptions[name] = true;\n      return name;\n    };\n    const local = (name) => {\n      return this.namespace + name;\n    };\n\n    // Apply config\n    if (config.globals) {\n      for (let key of Array.from(config.globals)) {\n        global(key);\n      }\n    }\n    const _u = config.globalUniforms ? global : local;\n    const _v = config.globalVaryings ? global : local;\n    const _a = config.globalAttributes ? global : local;\n    const _e = local;\n\n    // Build finalized properties\n    const x = (def) => {\n      return (exist[def.name] = true);\n    };\n    const u = (def, name) => {\n      return (this.uniforms[_u(name != null ? name : def.name)] = def);\n    };\n    v = (def) => {\n      return (this.varyings[_v(def.name)] = def);\n    };\n    const a = (def) => {\n      return (this.attributes[_a(def.name)] = def);\n    };\n    const e = (def) => {\n      const name = _e(def.name);\n      this.externals[name] = def;\n      return this.symbols.push(name);\n    };\n\n    const redef = (def) => ({\n      type: def.type,\n      name: def.name,\n      value: def.value,\n    });\n\n    for (def of Array.from(this._signatures.uniform)) {\n      x(def);\n    }\n    for (def of Array.from(this._signatures.uniform)) {\n      u(redef(def));\n    }\n    for (def of Array.from(this._signatures.varying)) {\n      v(redef(def));\n    }\n    for (def of Array.from(this._signatures.external)) {\n      e(def);\n    }\n    for (def of Array.from(this._signatures.attribute)) {\n      a(redef(def));\n    }\n    for (let name in uniforms) {\n      def = uniforms[name];\n      if (exist[name]) {\n        u(def, name);\n      }\n    }\n\n    this.body = this.code = this._compiler(this.namespace, exceptions, defines);\n\n    // Adds defs to original snippet for inspection\n    if (defines) {\n      const defs = (() => {\n        const result = [];\n        for (let k in defines) {\n          v = defines[k];\n          result.push(`#define ${k} ${v}`);\n        }\n        return result;\n      })().join(\"\\n\");\n      if (defs.length) {\n        this._original = [\n          defs,\n          \"//----------------------------------------\",\n          this._original,\n        ].join(\"\\n\");\n      }\n    }\n\n    return null;\n  }\n}\nSnippet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n  Program assembler\n\n  Builds composite program that can act as new module/snippet\n  Unconnected input/outputs and undefined callbacks are exposed in the new global/main scope\n  If there is only one call with an identical call signature, a #define is output instead.\n*/\nexport const assemble = function (language, namespace, calls, requires) {\n  const generate = language;\n\n  const externals = {};\n  const symbols = [];\n  const uniforms = {};\n  const varyings = {};\n  const attributes = {};\n  const library = {};\n\n  const process = function () {\n    let body;\n    let ns;\n    for (ns in requires) {\n      const r = requires[ns];\n      required(r.node, r.module);\n    }\n\n    [body, calls] = Array.from(handle(calls));\n    if (namespace != null) {\n      body.entry = namespace;\n    }\n    const main = generate.build(body, calls);\n\n    const sorted = (() => {\n      const result = [];\n      for (ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    const includes = sorted.map((x) => x.code);\n    includes.push(main.code);\n    const code = generate.lines(includes);\n\n    // Build new virtual snippet\n    return {\n      namespace: main.name,\n      library, // Included library functions\n      body: main.code, // Snippet body\n      code, // Complete snippet (tests/debug)\n      main, // Function signature\n      entry: main.name, // Entry point name\n      symbols,\n      externals,\n      uniforms,\n      varyings,\n      attributes,\n    };\n  };\n\n  // Sort and process calls\n  var handle = (calls) => {\n    let c;\n    calls = (() => {\n      const result = [];\n      for (let ns in calls) {\n        c = calls[ns];\n        result.push(c);\n      }\n      return result;\n    })();\n    calls.sort((a, b) => b.priority - a.priority);\n\n    // Call module in DAG chain\n    const call = (node, module, priority) => {\n      include(node, module, priority);\n      const { main } = module;\n      const { entry } = module;\n\n      const _lookup = (name) => lookup(node, name);\n      const _dangling = (name) => isDangling(node, name);\n      return generate.call(_lookup, _dangling, entry, main.signature, body);\n    };\n\n    var body = generate.body();\n    for (c of Array.from(calls)) {\n      call(c.node, c.module, c.priority);\n    }\n\n    return [body, calls];\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include snippet for a call\n  var include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (let ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt GL vars\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return required(node, module);\n  };\n\n  var required = (\n    node,\n    module // Adopt external symbols\n  ) =>\n    (() => {\n      const result = [];\n      for (let key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          const copy = {};\n          for (let k in ext) {\n            const v = ext[k];\n            copy[k] = v;\n          }\n          copy.name = lookup(node, ext.name);\n          externals[key] = copy;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n\n  // Check for dangling input/output\n  var isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  // Look up unique name for outlet\n  var lookup = function (node, name) {\n    // Traverse graph edge\n    let outlet = node.get(name);\n    if (!outlet) {\n      return null;\n    }\n\n    if (outlet.input) {\n      outlet = outlet.input;\n    }\n    ({ name } = outlet);\n\n    return outlet.id;\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { assemble } from \"./assemble\";\n\n/*\n  Program assembly model\n\n  Snippets are added to its queue, registering calls and code includes.\n  Calls are de-duped and scheduled at the earliest point required for correct data flow.\n\n  When assemble() is called, it builds a main() function to\n  execute all calls in final order.\n\n  The result is a new instance of Snippet that acts as if it\n  was parsed from the combined source of the component\n  nodes.\n*/\nexport class Program {\n  static initClass() {\n    this.index = 0;\n  }\n  static entry() {\n    return `_pg_${++Program.index}_`;\n  }\n\n  // Program starts out empty, ready to compile starting from a particular block\n  constructor(language, namespace, graph) {\n    this.language = language;\n    this.namespace = namespace;\n    this.graph = graph;\n    this.calls = {};\n    this.requires = {};\n  }\n\n  // Call a given module at certain priority\n  call(node, module, priority) {\n    let exists;\n    const ns = module.namespace;\n\n    // Merge all calls down into one with the right priority\n    if ((exists = this.calls[ns])) {\n      exists.priority = Math.max(exists.priority, priority);\n    } else {\n      this.calls[ns] = { node, module, priority };\n    }\n\n    return this;\n  }\n\n  // Require a given (callback) module's externals\n  require(node, module) {\n    const ns = module.namespace;\n    return (this.requires[ns] = { node, module });\n  }\n\n  // Compile queued ops into result\n  assemble() {\n    const data = assemble(\n      this.language,\n      this.namespace != null ? this.namespace : Program.entry,\n      this.calls,\n      this.requires\n    );\n    const snippet = new Snippet();\n    for (let key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\nProgram.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n Callback linker\n\n Imports given modules and generates linkages for registered callbacks.\n\n Builds composite program with single module as exported entry point\n*/\n\nexport const link = function (language, links, modules, exported) {\n  const generate = language;\n  let includes = [];\n\n  const symbols = [];\n  const externals = {};\n  const uniforms = {};\n  const attributes = {};\n  const varyings = {};\n  const library = {};\n\n  const process = function () {\n    const exports = generate.links(links);\n\n    const header = [];\n    if (exports.defs != null) {\n      header.push(exports.defs);\n    }\n    if (exports.bodies != null) {\n      header.push(exports.bodies);\n    }\n\n    for (let m of Array.from(modules)) {\n      include(m.node, m.module, m.priority);\n    }\n    const sorted = (() => {\n      const result = [];\n      for (let ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    includes = sorted.map((x) => x.code);\n\n    let code = generate.lines(includes);\n    code = generate.defuse(code);\n    if (header.length) {\n      code = [generate.lines(header), code].join(\"\\n\");\n    }\n    code = generate.hoist(code);\n    code = generate.dedupe(code);\n\n    // Export module's externals\n    const e = exported;\n    return {\n      namespace: e.main.name,\n      code, // Complete snippet (tests/debug)\n      main: e.main, // Function signature\n      entry: e.main.name, // Entry point name\n      externals,\n      uniforms,\n      attributes,\n      varyings,\n    };\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include piece of code\n  var include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (let ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt externals\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return (() => {\n      const result = [];\n      for (key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          externals[key] = ext;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n  };\n\n  // Check for dangling input/output\n  var isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (!outlet) {\n      const module =\n        (node.owner.snippet != null ? node.owner.snippet._name : undefined) !=\n        null\n          ? node.owner.snippet != null\n            ? node.owner.snippet._name\n            : undefined\n          : node.owner.namespace;\n      throw new Error(\n        `Unable to link program. Unlinked callback \\`${name}\\` on \\`${module}\\``\n      );\n    }\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { link } from \"./link\";\n\nconst debug = false;\n\n/*\n  Program linkage layout\n\n  Entry points are added to its dependency graph\n  Callbacks are linked either with a go-between function\n  or a #define if the signatures are identical.\n*/\nexport class Layout {\n  constructor(language, graph) {\n    this.language = language;\n    this.graph = graph;\n    this.links = [];\n    this.includes = [];\n    this.modules = {};\n    this.visits = {};\n  }\n\n  // Link up a given named external to this module's entry point\n  callback(node, module, priority, name, external) {\n    return this.links.push({ node, module, priority, name, external });\n  }\n\n  // Include this module of code\n  include(node, module, priority) {\n    let m;\n    if ((m = this.modules[module.namespace]) != null) {\n      return (m.priority = Math.max(priority, m.priority));\n    } else {\n      this.modules[module.namespace] = true;\n      return this.includes.push({ node, module, priority });\n    }\n  }\n\n  // Visit each namespace at most once to avoid infinite recursion\n  visit(namespace) {\n    debug && console.log(\"Visit\", namespace, !this.visits[namespace]);\n    if (this.visits[namespace]) {\n      return false;\n    }\n    return (this.visits[namespace] = true);\n  }\n\n  // Compile queued ops into result\n  link(module) {\n    const data = link(this.language, this.links, this.includes, module);\n    const snippet = new Snippet();\n    for (let key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\n","import { Snippet } from \"./snippet\";\n\nexport const { load } = Snippet;\n\nexport * from \"./snippet\";\nexport * from \"./program\";\nexport * from \"./layout\";\nexport * from \"./assemble\";\nexport * from \"./link\";\nexport * from \"./priority\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS103: Rewrite code to no longer use __guard__, or convert again using --optional-chaining\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport { Program, Layout } from \"../linker\";\n\nlet debug = false;\n\nexport class Block {\n  static previous(outlet) {\n    return outlet.input != null ? outlet.input.node.owner : undefined;\n  }\n\n  constructor(delay) {\n    // Subclasses can pass `delay` to allow them to initialize before they call\n    // `@construct`.\n    if (delay == null) {\n      delay = false;\n    }\n    if (!delay) {\n      this.construct();\n    }\n  }\n\n  construct() {\n    let left;\n    if (this.namespace == null) {\n      this.namespace = Program.entry();\n    }\n    return (this.node = new Graph.Node(\n      this,\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    ));\n  }\n\n  refresh() {\n    let left;\n    return this.node.setOutlets(\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    );\n  }\n\n  clone() {\n    return new Block();\n  }\n\n  // Compile a new program starting from this block\n  compile(language, namespace) {\n    const program = new Program(\n      language,\n      namespace != null ? namespace : Program.entry(),\n      this.node.graph\n    );\n    this.call(program, 0);\n    return program.assemble();\n  }\n\n  // Link up programs into a layout, starting from this block\n  link(language, namespace) {\n    const module = this.compile(language, namespace);\n\n    const layout = new Layout(language, this.node.graph);\n    this._include(module, layout, 0);\n    this.export(layout, 0);\n    return layout.link(module);\n  }\n\n  // Subclassed methods\n  call(_program, _depth) {}\n  callback(_layout, _depth, _name, _external, _outlet) {}\n  export(_layout, _depth) {}\n\n  // Info string for debugging\n  _info(suffix) {\n    let string =\n      (this.node.owner.snippet != null\n        ? this.node.owner.snippet._name\n        : undefined) != null\n        ? this.node.owner.snippet != null\n          ? this.node.owner.snippet._name\n          : undefined\n        : this.node.owner.namespace;\n    if (suffix != null) {\n      return (string += \".\" + suffix);\n    }\n  }\n\n  // Create an outlet for a signature definition\n  _outlet(def, props) {\n    const outlet = Graph.Outlet.make(def, props);\n    outlet.meta.def = def;\n    return outlet;\n  }\n\n  // Make a call to this module in the given program\n  _call(module, program, depth) {\n    return program.call(this.node, module, depth);\n  }\n\n  // Require this module's dependencies in the given program\n  _require(module, program) {\n    return program.require(this.node, module);\n  }\n\n  // Make a call to all connected inputs\n  _inputs(module, program, depth) {\n    return (() => {\n      const result = [];\n      for (let arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.call(program, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Insert callback to this module in the given layout\n  _callback(module, layout, depth, name, external, outlet) {\n    return layout.callback(this.node, module, depth, name, external, outlet);\n  }\n\n  // Include this module in the given layout\n  _include(module, layout, depth) {\n    return layout.include(this.node, module, depth);\n  }\n\n  // Link this module's connected callbacks\n  _link(module, layout, depth) {\n    debug && console.log(\"block::_link\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (let key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        let outlet = this.node.get(ext.name);\n        if (!outlet) {\n          throw new OutletError(\n            `External not found on ${this._info(ext.name)}`\n          );\n        }\n\n        if (outlet.meta.child != null) {\n          continue;\n        }\n\n        let parent = outlet;\n        let block;\n        while (!block && parent) {\n          [parent, outlet] = Array.from([outlet.meta.parent, parent]);\n        }\n\n        block = Block.previous(outlet);\n        if (!block) {\n          throw new OutletError(\n            `Missing connection on ${this._info(ext.name)}`\n          );\n        }\n\n        debug && console.log(\"callback -> \", this.toString(), ext.name, outlet);\n        block.callback(layout, depth + 1, key, ext, outlet.input);\n        result.push(\n          block != null ? block.export(layout, depth + 1) : undefined\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Trace backwards to discover callbacks further up\n  _trace(module, layout, depth) {\n    debug && console.log(\"block::_trace\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (let arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.export(layout, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n}\n\nvar OutletError = function (message) {\n  const e = new Error(message);\n  e.name = \"OutletError\";\n  return e;\n};\n\nOutletError.prototype = new Error();\n\nfunction __guard__(value, transform) {\n  return typeof value !== \"undefined\" && value !== null\n    ? transform(value)\n    : undefined;\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\nexport class Call extends Block {\n  constructor(snippet) {\n    super(true);\n\n    this.snippet = snippet;\n    this.namespace = snippet.namespace;\n    this.construct();\n  }\n\n  clone() {\n    return new Call(this.snippet);\n  }\n\n  makeOutlets() {\n    const main = this.snippet.main.signature;\n    const { externals } = this.snippet;\n    const { symbols } = this.snippet;\n\n    const params = Array.from(main).map((outlet) =>\n      this._outlet(outlet, { callback: false })\n    );\n    const callbacks = Array.from(symbols).map((key) =>\n      this._outlet(externals[key], { callback: true })\n    );\n\n    return params.concat(callbacks);\n  }\n\n  call(program, depth) {\n    this._call(this.snippet, program, depth);\n    return this._inputs(this.snippet, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.snippet, layout, depth);\n    return this._trace(this.snippet, layout, depth);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Re-use a subgraph as a callback\n*/\nexport class Callback extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Callback(this.graph);\n  }\n\n  makeOutlets() {\n    let outlet;\n    this.make();\n\n    const outlets = [];\n    let ins = [];\n    let outs = [];\n\n    // Pass-through existing callbacks\n    // Collect open inputs/outputs\n    const handle = (outlet, list) => {\n      if (outlet.meta.callback) {\n        if (outlet.inout === Graph.IN) {\n          // Dupe outlet and create two-way link between cloned outlets\n          const dupe = outlet.dupe();\n          if (dupe.meta.child == null) {\n            dupe.meta.child = outlet;\n          }\n          outlet.meta.parent = dupe;\n\n          return outlets.push(dupe);\n        }\n      } else {\n        return list.push(outlet.type);\n      }\n    };\n\n    for (outlet of Array.from(this.graph.inputs())) {\n      handle(outlet, ins);\n    }\n    for (outlet of Array.from(this.graph.outputs())) {\n      handle(outlet, outs);\n    }\n\n    // Merge inputs/outputs into new callback signature\n    ins = ins.join(\",\");\n    outs = outs.join(\",\");\n    const type = `(${ins})(${outs})`;\n\n    outlets.push({\n      name: \"callback\",\n      type,\n      inout: Graph.OUT,\n      meta: {\n        callback: true,\n        def: this.subroutine.main,\n      },\n    });\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.subroutine, layout, depth);\n    return this.graph.export(layout, depth);\n  }\n\n  call(program, depth) {\n    return this._require(this.subroutine, program, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    this._include(this.subroutine, layout, depth);\n    return this._callback(\n      this.subroutine,\n      layout,\n      depth,\n      name,\n      external,\n      outlet\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Isolate a subgraph as a single node\n*/\nexport class Isolate extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Isolate(this.graph);\n  }\n\n  makeOutlets() {\n    this.make();\n\n    const outlets = [];\n\n    const seen = {};\n    const done = {};\n    for (let set of [\"inputs\", \"outputs\"]) {\n      for (let outlet of Array.from(this.graph[set]())) {\n        // Preserve name of 'return' and 'callback' outlets\n        let name = undefined;\n        if (\n          [\"return\", \"callback\"].includes(outlet.hint) &&\n          outlet.inout === Graph.OUT\n        ) {\n          name = outlet.hint;\n        }\n\n        // Unless it already exists\n        if (seen[name] != null) {\n          name = undefined;\n        }\n\n        // Dupe outlet and remember link to original\n        const dupe = outlet.dupe(name);\n        if (dupe.meta.child == null) {\n          dupe.meta.child = outlet;\n        }\n        outlet.meta.parent = dupe;\n        if (name != null) {\n          seen[name] = true;\n        }\n        done[outlet.name] = dupe;\n\n        outlets.push(dupe);\n      }\n    }\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  call(program, depth) {\n    this._call(this.subroutine, program, depth);\n    return this._inputs(this.subroutine, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    // Link up with normal inputs\n    this._link(this.subroutine, layout, depth);\n    this._trace(this.subroutine, layout, depth);\n\n    // Export callbacks needed to call the subroutine\n    return this.graph.export(layout, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    outlet = outlet.meta.child;\n    return outlet.node.owner.callback(layout, depth, name, external, outlet);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\n/*\n  Join multiple disconnected nodes\n*/\nexport class Join extends Block {\n  constructor(nodes) {\n    super(true);\n    this.nodes = nodes;\n    this.construct();\n  }\n\n  clone() {\n    return new Join(this.nodes);\n  }\n\n  makeOutlets() {\n    return [];\n  }\n\n  call(program, depth) {\n    return (() => {\n      const result = [];\n      for (let node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.call(program, depth));\n      }\n      return result;\n    })();\n  }\n\n  export(layout, depth) {\n    return (() => {\n      const result = [];\n      for (let node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.export(layout, depth));\n      }\n      return result;\n    })();\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Dump graph for debug/visualization purposes\nimport * as Block from \"../block\";\n\nconst isCallback = (outlet) => outlet.type[0] === \"(\";\n\nexport var serialize = function (graph) {\n  const nodes = [];\n  const links = [];\n\n  for (let node of Array.from(graph.nodes)) {\n    var outlet;\n    const record = {\n      // Data\n      id: node.id,\n      name: null,\n      type: null,\n      depth: null,\n      graph: null,\n      inputs: [],\n      outputs: [],\n    };\n\n    nodes.push(record);\n\n    const { inputs } = record;\n    const { outputs } = record;\n\n    const block = node.owner;\n\n    if (block instanceof Block.Call) {\n      record.name = block.snippet._name;\n      record.type = \"call\";\n      record.code = block.snippet._original;\n    } else if (block instanceof Block.Callback) {\n      record.name = \"Callback\";\n      record.type = \"callback\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Isolate) {\n      record.name = \"Isolate\";\n      record.type = \"isolate\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Join) {\n      record.name = \"Join\";\n      record.type = \"join\";\n    } else if (block != null) {\n      if (record.name == null) {\n        record.name = block.name != null ? block.name : block.type;\n      }\n      if (record.type == null) {\n        record.type = block.type;\n      }\n      if (record.code == null) {\n        record.code = block.code;\n      }\n      if (block.graph != null) {\n        record.graph = serialize(block.graph);\n      }\n    }\n\n    const format = function (type) {\n      type = type.replace(\")(\", \")→(\");\n      return (type = type.replace(\"()\", \"\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      inputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: outlet.input == null,\n      });\n    }\n\n    for (outlet of Array.from(node.outputs)) {\n      outputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: !outlet.output.length,\n      });\n\n      for (let other of Array.from(outlet.output)) {\n        links.push({\n          from: node.id,\n          out: outlet.id,\n          to: other.node.id,\n          in: other.id,\n          type: format(outlet.type),\n        });\n      }\n    }\n  }\n\n  return { nodes, links };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Hash string into a 32-bit key (murmurhash3)\nconst c1 = 0xcc9e2d51;\nconst c2 = 0x1b873593;\nconst c3 = 0xe6546b64;\nconst c4 = 0x85ebca6b;\nconst c5 = 0xc2b2ae35;\n\n// Fix imul in old/broken browsers\nlet imul = function (a, b) {\n  const ah = (a >>> 16) & 0xffff;\n  const al = a & 0xffff;\n  const bh = (b >>> 16) & 0xffff;\n  const bl = b & 0xffff;\n  return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\n};\n\nif (Math.imul != null) {\n  const test = Math.imul(0xffffffff, 5);\n  if (test === -5) {\n    ({ imul } = Math);\n  }\n}\n\nexport const hash = function (string) {\n  let h;\n  const n = string.length;\n  let m = Math.floor(n / 2);\n  let j = (h = 0);\n\n  const next = () => string.charCodeAt(j++);\n  const iterate = function (a, b) {\n    let k = a | (b << 16); // two utf-16 words\n    k ^= k << 9; // whitening for ascii-only strings\n\n    k = imul(k, c1);\n    k = (k << 15) | (k >>> 17);\n    k = imul(k, c2);\n\n    h ^= k;\n\n    h = (h << 13) | (h >>> 19);\n    h = imul(h, 5);\n    return (h = (h + c3) | 0);\n  };\n\n  while (m--) {\n    iterate(next(), next());\n  }\n  if (n & 1) {\n    iterate(next(), 0);\n  }\n\n  h ^= n;\n  h ^= h >>> 16;\n  h = imul(h, c4);\n  h ^= h >>> 13;\n  h = imul(h, c5);\n\n  return (h ^= h >>> 16);\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { hash } from \"../factory/hash\";\n\nconst trim = (string) => (\"\" + string).replace(/^\\s+|\\s+$/g, \"\");\n\nconst cssColor = (r, g, b, alpha) =>\n  \"rgba(\" + [r, g, b, alpha].join(\", \") + \")\";\n\nconst hashColor = function (string, alpha) {\n  if (alpha == null) {\n    alpha = 1;\n  }\n  const color = hash(string) ^ 0x123456;\n\n  let r = color & 0xff;\n  let g = (color >>> 8) & 0xff;\n  let b = (color >>> 16) & 0xff;\n\n  const max = Math.max(r, g, b);\n  const norm = 140 / max;\n  const min = Math.round(max / 3);\n\n  r = Math.min(255, Math.round(norm * Math.max(r, min)));\n  g = Math.min(255, Math.round(norm * Math.max(g, min)));\n  b = Math.min(255, Math.round(norm * Math.max(b, min)));\n\n  return cssColor(r, g, b, alpha);\n};\n\nconst escapeText = function (string) {\n  string = string != null ? string : \"\";\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/'/g, \"&#39;\")\n    .replace(/\"/g, \"&quot;\");\n};\n\nexport const process = function (data) {\n  const links = [];\n  const el = _markup(data, links);\n  el.update = () => connect(el, links);\n  _activate(el);\n  return el;\n};\n\nvar _activate = function (el) {\n  const codes = el.querySelectorAll(\".shadergraph-code\");\n  return Array.from(codes).map((code) =>\n    (function () {\n      const popup = code;\n      popup.parentNode.classList.add(\"shadergraph-has-code\");\n      return popup.parentNode.addEventListener(\n        \"click\",\n        (event) =>\n          (popup.style.display = {\n            block: \"none\",\n            none: \"block\",\n          }[popup.style.display || \"none\"])\n      );\n    })()\n  );\n};\n\nconst _order = function (data) {\n  let link, node;\n  const nodeMap = {};\n  const linkMap = {};\n  for (node of Array.from(data.nodes)) {\n    nodeMap[node.id] = node;\n  }\n\n  for (link of Array.from(data.links)) {\n    if (linkMap[link.from] == null) {\n      linkMap[link.from] = [];\n    }\n    linkMap[link.from].push(link);\n  }\n\n  var recurse = function (node, depth) {\n    let next;\n    if (depth == null) {\n      depth = 0;\n    }\n    node.depth = Math.max(node.depth != null ? node.depth : 0, depth);\n    if ((next = linkMap[node.id])) {\n      for (link of Array.from(next)) {\n        recurse(nodeMap[link.to], depth + 1);\n      }\n    }\n    return null;\n  };\n\n  for (node of Array.from(data.nodes)) {\n    if (node.depth == null) {\n      recurse(node);\n    }\n  }\n\n  return null;\n};\n\nvar _markup = function (data, links) {\n  let column;\n  _order(data);\n\n  const wrapper = document.createElement(\"div\");\n  wrapper.classList.add(\"shadergraph-graph\");\n\n  const columns = [];\n  const outlets = {};\n\n  for (let node of Array.from(data.nodes)) {\n    var outlet;\n    var block = document.createElement(\"div\");\n    block.classList.add(\"shadergraph-node\");\n    block.classList.add(`shadergraph-node-${node.type}`);\n\n    block.innerHTML = `\\\n<div class=\"shadergraph-header\">${escapeText(node.name)}</div>\\\n`;\n\n    const addOutlet = function (outlet, inout) {\n      const color = hashColor(outlet.type);\n\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-outlet\");\n      div.classList.add(`shadergraph-outlet-${inout}`);\n      div.innerHTML = `\\\n<div class=\"shadergraph-point\" style=\"background: ${color}\"></div>\n<div class=\"shadergraph-type\" style=\"color: ${color}\">${escapeText(\n        outlet.type\n      )}</div>\n<div class=\"shadergraph-name\">${escapeText(outlet.name)}</div>\\\n`;\n      block.appendChild(div);\n\n      return (outlets[outlet.id] = div.querySelector(\".shadergraph-point\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      addOutlet(outlet, \"in\");\n    }\n    for (outlet of Array.from(node.outputs)) {\n      addOutlet(outlet, \"out\");\n    }\n\n    if (node.graph != null) {\n      block.appendChild(_markup(node.graph, links));\n    } else {\n      const clear = document.createElement(\"div\");\n      clear.classList.add(\"shadergraph-clear\");\n      block.appendChild(clear);\n    }\n\n    if (node.code != null) {\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-code\");\n      div.innerHTML = escapeText(trim(node.code));\n      block.appendChild(div);\n    }\n\n    column = columns[node.depth];\n    if (column == null) {\n      column = document.createElement(\"div\");\n      column.classList.add(\"shadergraph-column\");\n      columns[node.depth] = column;\n    }\n    column.appendChild(block);\n  }\n\n  for (column of Array.from(columns)) {\n    if (column != null) {\n      wrapper.appendChild(column);\n    }\n  }\n\n  for (let link of Array.from(data.links)) {\n    const color = hashColor(link.type);\n\n    links.push({\n      color,\n      out: outlets[link.out],\n      in: outlets[link.in],\n    });\n  }\n\n  return wrapper;\n};\n\nconst sqr = (x) => x * x;\n\nconst path = function (x1, y1, x2, y2) {\n  let h;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const d = Math.sqrt(sqr(dx) + sqr(dy));\n\n  const vert = Math.abs(dy) > Math.abs(dx);\n  if (vert) {\n    const mx = (x1 + x2) / 2;\n    const my = (y1 + y2) / 2;\n\n    const f = dy > 0 ? 0.3 : -0.3;\n    h = Math.min(Math.abs(dx) / 2, 20 + d / 8);\n\n    return [\n      \"M\",\n      x1,\n      y1,\n      \"C\",\n      x1 + h,\n      y1 + \",\",\n      mx,\n      my - d * f,\n      mx,\n      my,\n      \"C\",\n      mx,\n      my + d * f,\n      x2 - h,\n      y2 + \",\",\n      x2,\n      y2,\n    ].join(\" \");\n  } else {\n    h = Math.min(Math.abs(dx) / 2.5, 20 + d / 4);\n\n    return [\"M\", x1, y1, \"C\", x1 + h, y1 + \",\", x2 - h, y2 + \",\", x2, y2].join(\n      \" \"\n    );\n  }\n};\n\nconst makeSVG = function (tag) {\n  if (tag == null) {\n    tag = \"svg\";\n  }\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n};\n\nvar connect = function (element, links) {\n  let link;\n  if (element.parentNode == null) {\n    return;\n  }\n\n  const ref = element.getBoundingClientRect();\n\n  for (link of Array.from(links)) {\n    const a = link.out.getBoundingClientRect();\n    const b = link.in.getBoundingClientRect();\n\n    link.coords = {\n      x1: (a.left + a.right) / 2 - ref.left,\n      y1: (a.top + a.bottom) / 2 - ref.top,\n      x2: (b.left + b.right) / 2 - ref.left,\n      y2: (b.top + b.bottom) / 2 - ref.top,\n    };\n  }\n\n  let svg = element.querySelector(\"svg\");\n  if (svg != null) {\n    element.removeChild(svg);\n  }\n\n  let box = element;\n  while (box.parentNode && box.offsetHeight === 0) {\n    box = box.parentNode;\n  }\n\n  svg = makeSVG();\n  svg.setAttribute(\"width\", box.offsetWidth);\n  svg.setAttribute(\"height\", box.offsetHeight);\n\n  for (link of Array.from(links)) {\n    const c = link.coords;\n\n    const line = makeSVG(\"path\");\n    line.setAttribute(\"d\", path(c.x1, c.y1, c.x2, c.y2));\n    line.setAttribute(\"stroke\", link.color);\n    line.setAttribute(\"stroke-width\", 3);\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.appendChild(line);\n  }\n\n  return element.appendChild(svg);\n};\n\nexport const overlay = function (contents) {\n  const div = document.createElement(\"div\");\n  div.setAttribute(\"class\", \"shadergraph-overlay\");\n\n  const close = document.createElement(\"div\");\n  close.setAttribute(\"class\", \"shadergraph-close\");\n  close.innerHTML = \"&times;\";\n\n  const view = document.createElement(\"div\");\n  view.setAttribute(\"class\", \"shadergraph-view\");\n\n  const inside = document.createElement(\"div\");\n  inside.setAttribute(\"class\", \"shadergraph-inside\");\n\n  inside.appendChild(contents);\n  view.appendChild(inside);\n  div.appendChild(view);\n  div.appendChild(close);\n\n  close.addEventListener(\"click\", () => div.parentNode.removeChild(div));\n\n  return div;\n};\n\nconst wrap = function (markup) {\n  if (markup instanceof Node) {\n    return markup;\n  }\n  const p = document.createElement(\"span\");\n  p.innerText = markup != null ? markup : \"\";\n  return p;\n};\n\nexport const merge = function (markup) {\n  if (markup.length !== 1) {\n    let el;\n    const div = document.createElement(\"div\");\n    for (el of Array.from(markup)) {\n      div.appendChild(wrap(el));\n    }\n    div.update = () =>\n      (() => {\n        const result = [];\n        for (el of Array.from(markup)) {\n          result.push(\n            typeof el.update === \"function\" ? el.update() : undefined\n          );\n        }\n        return result;\n      })();\n    return div;\n  } else {\n    return wrap(markup[0]);\n  }\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport { serialize as _serialize } from \"./serialize\";\nimport * as _markup from \"./markup\";\n\nexport const serialize = _serialize;\nexport const markup = _markup;\n\nconst _visualize = function (graph) {\n  if (!graph) {\n    return;\n  }\n  if (!graph.nodes) {\n    return graph;\n  }\n\n  const data = serialize(graph);\n  return markup.process(data);\n};\n\nvar resolve = function (arg) {\n  if (arg == null) {\n    return arg;\n  }\n  if (arg instanceof Array) {\n    return arg.map(resolve);\n  }\n  if (arg.vertex != null && arg.fragment != null) {\n    return [resolve(arg.vertex, resolve(arg.fragment))];\n  }\n  if (arg._graph != null) {\n    return arg._graph;\n  }\n  if (arg.graph != null) {\n    return arg.graph;\n  }\n  return arg;\n};\n\nvar merge = function (args) {\n  let out = [];\n  for (let arg of Array.from(args)) {\n    if (arg instanceof Array) {\n      out = out.concat(merge(arg));\n    } else if (arg != null) {\n      out.push(arg);\n    }\n  }\n  return out;\n};\n\nexport const visualize = function () {\n  const list = merge(resolve([].slice.call(arguments)));\n  return markup.merge(\n    Array.from(list)\n      .filter((graph) => graph)\n      .map((graph) => _visualize(graph))\n  );\n};\n\nexport const inspect = function () {\n  const contents = visualize.apply(null, arguments);\n  const element = markup.overlay(contents);\n\n  for (let el of Array.from(\n    document.querySelectorAll(\".shadergraph-overlay\")\n  )) {\n    el.remove();\n  }\n  document.body.appendChild(element);\n  contents.update();\n\n  return element;\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport * as Block from \"../block\";\nimport * as Visualize from \"../visualize\";\n\n/*\n  Chainable factory\n\n  Exposes methods to build a graph incrementally\n*/\nexport class Factory {\n  constructor(language, fetch, config) {\n    this.language = language;\n    this.fetch = fetch;\n    this.config = config;\n    this.graph();\n  }\n\n  // Combined call/concat shortcut\n  pipe(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._concat(name);\n    } else if (name != null) {\n      this._call(name, uniforms, namespace, defines);\n    }\n    return this;\n  }\n\n  // Old name\n  call(name, uniforms, namespace, defines) {\n    return this.pipe(name, uniforms, namespace, defines);\n  }\n\n  // Combined callback/import shortcut\n  require(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._import(name);\n    } else if (name != null) {\n      this.callback();\n      this._call(name, uniforms, namespace, defines);\n      this.end();\n    }\n    return this;\n  }\n\n  // Old name\n  import(name, uniforms, namespace, defines) {\n    return this.require(name, uniforms, namespace, defines);\n  }\n\n  // Create parallel branches that connect as one block to the end\n  // (one outgoing connection per outlet)\n  split() {\n    this._group(\"_combine\", true);\n    return this;\n  }\n\n  // Create parallel branches that fan out from the end\n  // (multiple outgoing connections per outlet)\n  fan() {\n    this._group(\"_combine\", false);\n    return this;\n  }\n\n  // Create isolated subgraph\n  isolate() {\n    this._group(\"_isolate\");\n    return this;\n  }\n\n  // Create callback subgraph\n  callback() {\n    this._group(\"_callback\");\n    return this;\n  }\n\n  // Next branch in group\n  next() {\n    this._next();\n    return this;\n  }\n\n  // Connect branches to previous tail and add pass-through from end\n  pass() {\n    const pass = this._stack[2].end;\n    this.end();\n    this._state.end = this._state.end.concat(pass);\n    return this;\n  }\n\n  // Leave nested branches and join up with main graph,\n  // applying stored op along the way\n  end() {\n    const [sub, main] = Array.from(this._exit());\n    const { op } = sub;\n    if (this[op]) {\n      this[op](sub, main);\n    }\n    return this;\n  }\n\n  // Old name\n  join() {\n    return this.end();\n  }\n\n  // Return finalized graph / reset factory\n  graph() {\n    // Pop remaining stack\n    while ((this._stack != null ? this._stack.length : undefined) > 1) {\n      this.end();\n    }\n\n    // Remember terminating node(s) of graph\n    if (this._graph) {\n      this._tail(this._state, this._graph);\n    }\n\n    const graph = this._graph;\n\n    this._graph = new Graph();\n    this._state = new State();\n    this._stack = [this._state];\n\n    return graph;\n  }\n\n  // Compile shortcut (graph is thrown away)\n  compile(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().compile(namespace);\n  }\n\n  // Link shortcut (graph is thrown away)\n  link(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().link(namespace);\n  }\n\n  // Serialize for debug\n  serialize() {\n    return Visualize.serialize(this._graph);\n  }\n\n  // Return true if empty\n  empty() {\n    return this._graph.nodes.length === 0;\n  }\n\n  // Concatenate existing factory onto tail\n  // Retains original factory\n  _concat(factory) {\n    // Ignore empty concat\n    let block;\n    if (factory._state.nodes.length === 0) {\n      return this;\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Isolate(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Add existing factory as callback\n  // Retains original factory\n  _import(factory) {\n    // Check for empty require\n    let block;\n    if (factory._state.nodes.length === 0) {\n      throw \"Can't import empty callback\";\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Callback(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Connect parallel branches to tail\n  _combine(sub, main) {\n    for (let to of Array.from(sub.start)) {\n      for (let from of Array.from(main.end)) {\n        from.connect(to, sub.multi);\n      }\n    }\n\n    main.end = sub.end;\n    return (main.nodes = main.nodes.concat(sub.nodes));\n  }\n\n  // Make subgraph and connect to tail\n  _isolate(sub, main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Isolate(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Convert to callback and connect to tail\n  _callback(sub, main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Callback(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Create next call block\n  _call(name, uniforms, namespace, defines) {\n    const snippet = this.fetch(name);\n    snippet.bind(this.config, uniforms, namespace, defines);\n    const block = new Block.Call(snippet);\n    return this._auto(block);\n  }\n\n  // Move current state into subgraph\n  _subgraph(sub) {\n    const subgraph = new Graph(null, this._graph);\n    subgraph.adopt(sub.nodes);\n    return subgraph;\n  }\n\n  // Finalize graph tail\n  _tail(state, graph) {\n    // Merge (unique) terminating ends into single tail node if needed\n    let tail = state.end.concat(state.tail);\n    tail = tail.filter((node, i) => tail.indexOf(node) === i);\n\n    if (tail.length > 1) {\n      tail = new Block.Join(tail);\n      tail = [tail.node];\n      this._graph.add(tail);\n    }\n\n    // Save single endpoint\n    graph.tail = tail[0];\n    state.end = tail;\n    state.tail = [];\n\n    if (!graph.tail) {\n      throw new Error(\"Cannot finalize empty graph\");\n    }\n\n    // Add compile/link/export/inspect shortcut methods\n    graph.compile = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.compile(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.link = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.link(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.export = (layout, depth) => {\n      return graph.tail.owner.export(layout, depth);\n    };\n\n    return (graph.inspect = (message = null) =>\n      Visualize.inspect(message, graph));\n  }\n\n  // Create group for branches or callbacks\n  _group(op, multi) {\n    this._push(op, multi); // Accumulator\n    this._push(); // Current\n    return this;\n  }\n\n  // Merge branch into accumulator and reset state\n  _next() {\n    const sub = this._pop();\n\n    this._state.start = this._state.start.concat(sub.start);\n    this._state.end = this._state.end.concat(sub.end);\n    this._state.nodes = this._state.nodes.concat(sub.nodes);\n    this._state.tail = this._state.tail.concat(sub.tail);\n\n    return this._push();\n  }\n\n  // Exit nested branches\n  _exit() {\n    this._next();\n    this._pop();\n    return [this._pop(), this._state];\n  }\n\n  // State stack\n  _push(op, multi) {\n    this._stack.unshift(new State(op, multi));\n    return (this._state = this._stack[0]);\n  }\n\n  _pop() {\n    let left;\n    this._state = this._stack[1];\n    if (this._state == null) {\n      this._state = new State();\n    }\n    return (left = this._stack.shift()) != null ? left : new State();\n  }\n\n  // Auto append or insert depending on whether we have inputs\n  _auto(block) {\n    if (block.node.inputs.length) {\n      return this._append(block);\n    } else {\n      return this._insert(block);\n    }\n  }\n\n  // Add block and connect to end\n  _append(block) {\n    let end;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (end of Array.from(this._state.end)) {\n      end.connect(node);\n    }\n\n    if (!this._state.start.length) {\n      this._state.start = [node];\n    }\n    this._state.end = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Add block and connect to start\n  _prepend(block) {\n    let start;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (start of Array.from(this._state.start)) {\n      node.connect(start);\n    }\n\n    if (!this._state.end.length) {\n      this._state.end = [node];\n    }\n    this._state.start = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Insert loose block\n  _insert(block) {\n    const { node } = block;\n    this._graph.add(node);\n\n    this._state.start.push(node);\n    this._state.end.push(node);\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      return this._state.tail.push(node);\n    }\n  }\n}\n\nclass State {\n  constructor(op = null, multi, start, end, nodes, tail) {\n    this.op = op;\n    if (multi == null) {\n      multi = false;\n    }\n    this.multi = multi;\n    if (start == null) {\n      start = [];\n    }\n    this.start = start;\n    if (end == null) {\n      end = [];\n    }\n    this.end = end;\n    if (nodes == null) {\n      nodes = [];\n    }\n    this.nodes = nodes;\n    if (tail == null) {\n      tail = [];\n    }\n    this.tail = tail;\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Visualize from \"../visualize\";\n\nlet debug = false;\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n\nexport class Material {\n  constructor(vertex, fragment) {\n    this.vertex = vertex;\n    this.fragment = fragment;\n    if (debug) {\n      this.tock = tick();\n    }\n  }\n\n  build(options) {\n    return this.link(options);\n  }\n\n  link(options) {\n    if (options == null) {\n      options = {};\n    }\n    const uniforms = {};\n    const varyings = {};\n    const attributes = {};\n\n    const vertex = this.vertex.link(\"main\");\n    const fragment = this.fragment.link(\"main\");\n\n    for (let shader of [vertex, fragment]) {\n      var key, value;\n      for (key in shader.uniforms) {\n        value = shader.uniforms[key];\n        uniforms[key] = value;\n      }\n      for (key in shader.varyings) {\n        value = shader.varyings[key];\n        varyings[key] = value;\n      }\n      for (key in shader.attributes) {\n        value = shader.attributes[key];\n        attributes[key] = value;\n      }\n    }\n\n    options.vertexShader = vertex.code;\n    options.vertexGraph = vertex.graph;\n    options.fragmentShader = fragment.code;\n    options.fragmentGraph = fragment.graph;\n    options.attributes = attributes;\n    options.uniforms = uniforms;\n    options.varyings = varyings;\n    options.inspect = () =>\n      Visualize.inspect(\n        \"Vertex Shader\",\n        vertex,\n        \"Fragment Shader\",\n        fragment.graph\n      );\n\n    if (debug) {\n      this.tock(\"Material build\");\n    }\n\n    return options;\n  }\n\n  inspect() {\n    return Visualize.inspect(\n      \"Vertex Shader\",\n      this.vertex,\n      \"Fragment Shader\",\n      this.fragment.graph\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Snippet library\n\n  Takes:\n    - Hash of snippets: named library\n    - (name) -> getter: dynamic lookup\n    - nothing:          no library, only pass in inline source code\n\n  If 'name' contains any of \"{;(#\" it is assumed to be direct GLSL code.\n*/\nexport const library = function (language, snippets, load) {\n  let callback = null;\n  let used = {};\n\n  if (snippets != null) {\n    if (typeof snippets === \"function\") {\n      callback = (name) => load(language, name, snippets(name));\n    } else if (typeof snippets === \"object\") {\n      callback = function (name) {\n        if (snippets[name] == null) {\n          throw new Error(`Unknown snippet \\`${name}\\``);\n        }\n        return load(language, name, snippets[name]);\n      };\n    }\n  }\n\n  const inline = (code) => load(language, \"\", code);\n\n  if (callback == null) {\n    return inline;\n  }\n\n  const fetch = function (name) {\n    if (name.match(/[{;]/)) {\n      return inline(name);\n    }\n    used[name] = true;\n    return callback(name);\n  };\n\n  fetch.used = function (_used) {\n    if (_used == null) {\n      _used = used;\n    }\n    return (used = _used);\n  };\n\n  return fetch;\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Least-recently-used queue for key expiry via linked list\nexport const queue = function (limit) {\n  if (limit == null) {\n    limit = 100;\n  }\n  const map = {};\n\n  let head = null;\n  let tail = null;\n  let count = 0;\n\n  // Insert at front\n  const add = function (item) {\n    item.prev = null;\n    item.next = head;\n\n    if (head != null) {\n      head.prev = item;\n    }\n\n    head = item;\n    if (tail == null) {\n      return (tail = item);\n    }\n  };\n\n  // Remove from list\n  const remove = function (item) {\n    const { prev } = item;\n    const { next } = item;\n\n    if (prev != null) {\n      prev.next = next;\n    }\n    if (next != null) {\n      next.prev = prev;\n    }\n\n    if (head === item) {\n      head = next;\n    }\n    if (tail === item) {\n      return (tail = prev);\n    }\n  };\n\n  // Push key to top of list\n  return function (key) {\n    let dead, item;\n    if ((item = map[key]) && item !== head) {\n      // Already in queue\n      remove(item);\n      add(item);\n    } else {\n      // Check capacity\n      if (count === limit) {\n        // Pop tail\n        dead = tail.key;\n        remove(tail);\n\n        // Expire key\n        delete map[dead];\n      } else {\n        count++;\n      }\n\n      // Replace head\n      item = { next: head, prev: null, key };\n      add(item);\n\n      // Map record for lookup\n      map[key] = item;\n    }\n\n    // Return expired key\n    return dead;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Cache decorator\n  Fetches snippets once, clones for reuse\n  Inline code is hashed to avoid bloat\n*/\nimport { queue } from \"./queue\";\nimport { hash } from \"./hash\";\n\nexport const cache = function (fetch) {\n  const cached = {};\n  const push = queue(100);\n\n  // Snippet factory\n  return function (name) {\n    const key = name.length > 32 ? \"##\" + hash(name).toString(16) : name;\n\n    // Push new key onto queue, see if an old key expired\n    const expire = push(key);\n    if (expire != null) {\n      delete cached[expire];\n    }\n\n    // Clone cached snippet\n    if (cached[key] == null) {\n      cached[key] = fetch(name);\n    }\n    return cached[key].clone();\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Compile snippet back into GLSL, but with certain symbols replaced by prefixes / placeholders\n*/\n\nexport const compile = function (program) {\n  const { ast, code, signatures } = program;\n\n  // Prepare list of placeholders\n  const placeholders = replaced(signatures);\n\n  // Compile\n  const assembler = string_compiler(code, placeholders);\n\n  return [signatures, assembler];\n};\n\n// #####\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n\nvar replaced = function (signatures) {\n  const out = {};\n  const s = (sig) => (out[sig.name] = true);\n\n  s(signatures.main);\n\n  // Prefix all global symbols\n  for (let key of [\"external\", \"internal\", \"varying\", \"uniform\", \"attribute\"]) {\n    for (let sig of signatures[key]) {\n      s(sig);\n    }\n  }\n\n  return out;\n};\n\n/*\nString-replacement based compiler\n*/\nvar string_compiler = function (code, placeholders) {\n  // Make regexp for finding placeholders\n  // Replace on word boundaries\n  let key;\n  const re = new RegExp(\n    \"\\\\b(\" +\n      (() => {\n        const result = [];\n        for (key in placeholders) {\n          result.push(key);\n        }\n        return result;\n      })().join(\"|\") +\n      \")\\\\b\",\n    \"g\"\n  );\n\n  // Strip comments\n  code = code.replace(/\\/\\/[^\\n]*/g, \"\");\n  code = code.replace(/\\/\\*([^*]|\\*[^\\/])*\\*\\//g, \"\");\n\n  // Strip all preprocessor commands (lazy)\n  //code = code.replace /^#[^\\n]*/mg, ''\n\n  // Assembler function that takes namespace prefix and exceptions\n  // and returns GLSL source code\n  return function (prefix, exceptions, defines) {\n    let key;\n    if (prefix == null) {\n      prefix = \"\";\n    }\n    if (exceptions == null) {\n      exceptions = {};\n    }\n    if (defines == null) {\n      defines = {};\n    }\n    const replace = {};\n    for (key in placeholders) {\n      replace[key] = exceptions[key] != null ? key : prefix + key;\n    }\n\n    const compiled = code.replace(re, (key) => replace[key]);\n\n    const defs = (() => {\n      const result1 = [];\n      for (key in defines) {\n        const value = defines[key];\n        result1.push(`#define ${key} ${value}`);\n      }\n      return result1;\n    })();\n    if (defs.length) {\n      defs.push(\"\");\n    }\n    return defs.join(\"\\n\") + compiled;\n  };\n};\n","class Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector2.prototype.isVector2 = true;\n\nexport { Vector2 };\n","const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toUpperCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t\t } else {\n\n\t\treturn 0;\n\n\t\t }\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t// Park-Miller algorithm\n\n\t_seed = _seed * 16807 % 2147483647;\n\n\treturn ( _seed - 1 ) / 2147483646;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\n\n\n\nexport {\n\tDEG2RAD,\n\tRAD2DEG,\n\tgenerateUUID,\n\tclamp,\n\teuclideanModulo,\n\tmapLinear,\n\tinverseLerp,\n\tlerp,\n\tdamp,\n\tpingpong,\n\tsmoothstep,\n\tsmootherstep,\n\trandInt,\n\trandFloat,\n\trandFloatSpread,\n\tseededRandom,\n\tdegToRad,\n\tradToDeg,\n\tisPowerOfTwo,\n\tceilPowerOfTwo,\n\tfloorPowerOfTwo,\n\tsetQuaternionFromProperEuler,\n};\n","import * as MathUtils from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.' );\n\t\treturn qm.slerpQuaternions( qa, qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\tthis.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nexport { Quaternion };\n","import * as MathUtils from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","class Matrix3 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nMatrix3.prototype.isMatrix3 = true;\n\nexport { Matrix3 };\n","import { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nMatrix4.prototype.isMatrix4 = true;\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// AST node parsers\n\nimport { Vector2 } from \"three/src/math/Vector2.js\";\nimport { Vector3 } from \"three/src/math/Vector3.js\";\nimport { Vector4 } from \"three/src/math/Vector3.js\";\nimport { Matrix3 } from \"three/src/math/Matrix3.js\";\nimport { Matrix4 } from \"three/src/math/Matrix4.js\";\n\nexport let decl = {};\n\ndecl.in = 0;\ndecl.out = 1;\ndecl.inout = 2;\n\nconst get = (n) => n.token.data;\n\ndecl.node = function (node) {\n  if (\n    (node.children[5] != null ? node.children[5].type : undefined) ===\n    \"function\"\n  ) {\n    return decl.function(node);\n  } else if ((node.token != null ? node.token.type : undefined) === \"keyword\") {\n    return decl.external(node);\n  }\n};\n\ndecl.external = function (node) {\n  //    console.log 'external', node\n  let c = node.children;\n\n  let storage = get(c[1]);\n  const struct = get(c[3]);\n  const type = get(c[4]);\n  const list = c[5];\n\n  if (![\"attribute\", \"uniform\", \"varying\"].includes(storage)) {\n    storage = \"global\";\n  }\n\n  const out = [];\n\n  for (let i = 0; i < list.children.length; i++) {\n    c = list.children[i];\n    if (c.type === \"ident\") {\n      const ident = get(c);\n      const next = list.children[i + 1];\n      const quant = (next != null ? next.type : undefined) === \"quantifier\";\n\n      out.push({\n        decl: \"external\",\n        storage,\n        type,\n        ident,\n        quant: !!quant,\n        count: quant,\n      });\n    }\n  }\n\n  return out;\n};\n\ndecl.function = function (node) {\n  const c = node.children;\n\n  //    console.log 'function', node\n\n  const storage = get(c[1]);\n  const struct = get(c[3]);\n  const type = get(c[4]);\n  const func = c[5];\n  const ident = get(func.children[0]);\n  const args = func.children[1];\n  const body = func.children[2];\n\n  const decls = Array.from(args.children).map((child) => decl.argument(child));\n\n  return [\n    {\n      decl: \"function\",\n      storage,\n      type,\n      ident,\n      body: !!body,\n      args: decls,\n    },\n  ];\n};\n\ndecl.argument = function (node) {\n  const c = node.children;\n\n  //    console.log 'argument', node\n\n  const storage = get(c[1]);\n  const inout = get(c[2]);\n  const type = get(c[4]);\n  const list = c[5];\n  const ident = get(list.children[0]);\n  const quant = list.children[1];\n\n  const count = quant ? quant.children[0].token.data : undefined;\n\n  return {\n    decl: \"argument\",\n    storage,\n    inout,\n    type,\n    ident,\n    quant: !!quant,\n    count,\n  };\n};\n\ndecl.param = function (dir, storage, spec, quant, count) {\n  let prefix = [];\n  if (storage != null) {\n    prefix.push(storage);\n  }\n  if (spec != null) {\n    prefix.push(spec);\n  }\n  prefix.push(\"\");\n\n  prefix = prefix.join(\" \");\n  const suffix = quant ? \"[\" + count + \"]\" : \"\";\n  if (dir !== \"\") {\n    dir += \" \";\n  }\n\n  const f = (name, long) => (long ? dir : \"\") + `${prefix}${name}${suffix}`;\n  f.split = (dir) => decl.param(dir, storage, spec, quant, count);\n\n  return f;\n};\n\n// Three.js sugar\nconst win = typeof window !== \"undefined\";\nconst threejs = win && !!window.THREE;\n\nconst defaults = {\n  int: 0,\n  float: 0,\n  vec2: threejs ? Vector2 : null,\n  vec3: threejs ? Vector3 : null,\n  vec4: threejs ? Vector4 : null,\n  mat2: null,\n  mat3: threejs ? Matrix3 : null,\n  mat4: threejs ? Matrix4 : null,\n  sampler2D: 0,\n  samplerCube: 0,\n};\n\nconst three = {\n  int: \"i\",\n  float: \"f\",\n  vec2: \"v2\",\n  vec3: \"v3\",\n  vec4: \"v4\",\n  mat2: \"m2\",\n  mat3: \"m3\",\n  mat4: \"m4\",\n  sampler2D: \"t\",\n  samplerCube: \"t\",\n};\n\ndecl.type = function (name, spec, quant, count, dir, storage) {\n  const dirs = {\n    in: decl.in,\n    out: decl.out,\n    inout: decl.inout,\n  };\n\n  const storages = { const: \"const\" };\n\n  let type = three[spec];\n  if (quant) {\n    type += \"v\";\n  }\n\n  let value = defaults[spec];\n  if (value != null ? value.call : undefined) {\n    value = new value();\n  }\n  if (quant) {\n    value = [value];\n  }\n\n  const inout = dirs[dir] != null ? dirs[dir] : dirs.in;\n  storage = storages[storage];\n\n  const param = decl.param(dir, storage, spec, quant, count);\n  return new Definition(name, type, spec, param, value, inout);\n};\n\nclass Definition {\n  constructor(name, type, spec, param, value, inout, meta) {\n    this.name = name;\n    this.type = type;\n    this.spec = spec;\n    this.param = param;\n    this.value = value;\n    this.inout = inout;\n    this.meta = meta;\n  }\n\n  split() {\n    // Split inouts\n    const isIn = this.meta.shadowed != null;\n    const dir = isIn ? \"in\" : \"out\";\n    const inout = isIn ? decl.in : decl.out;\n    const param = this.param.split(dir);\n    return new Definition(\n      this.name,\n      this.type,\n      this.spec,\n      param,\n      this.value,\n      inout\n    );\n  }\n\n  copy(name, meta) {\n    let def;\n    return (def = new Definition(\n      name != null ? name : this.name,\n      this.type,\n      this.spec,\n      this.param,\n      this.value,\n      this.inout,\n      meta\n    ));\n  }\n}\n","export const SHADOW_ARG = \"_i_o\";\nexport const RETURN_ARG = \"return\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS201: Simplify complex destructure assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport tokenize from \"glsl-tokenizer/string\";\nimport parser from \"glsl-parser/direct\";\nimport { decl } from \"./decl\";\nimport { SHADOW_ARG, RETURN_ARG } from \"./constants\";\n\nlet debug = false;\n\n/*\nparse GLSL into AST\nextract all global symbols and make type signatures\n*/\n// Parse a GLSL snippet\nexport const parse = function (name, code) {\n  const ast = parseGLSL(name, code);\n  return processAST(ast, code);\n};\n\n// Parse GLSL language into AST\nvar parseGLSL = function (name, code) {\n  let ast, tock;\n  let errors = [];\n  if (debug) {\n    tock = tick();\n  }\n\n  try {\n    const tokens = tokenize(code);\n    ast = parser(tokens);\n  } catch (e) {\n    errors = [{ message: e }];\n  }\n\n  if (debug) {\n    tock(\"GLSL Tokenize & Parse\");\n  }\n\n  const fmt = function (code) {\n    code = code.split(\"\\n\");\n    const max = (\"\" + code.length).length;\n    const pad = function (v) {\n      if ((v = \"\" + v).length < max) {\n        return (\"       \" + v).slice(-max);\n      } else {\n        return v;\n      }\n    };\n    return code.map((line, i) => `${pad(i + 1)}: ${line}`).join(\"\\n\");\n  };\n\n  if (!ast || errors.length) {\n    if (!name) {\n      name = \"(inline code)\";\n    }\n    console.warn(fmt(code));\n    for (let error of errors) {\n      console.error(`${name} -`, error.message);\n    }\n    throw new Error(\"GLSL parse error\");\n  }\n\n  return ast;\n};\n\n// Process AST for compilation\nvar processAST = function (ast, code) {\n  let tock;\n  if (debug) {\n    tock = tick();\n  }\n\n  // Walk AST tree and collect global declarations\n  const symbols = [];\n  walk(mapSymbols, collect(symbols), ast, \"\");\n\n  // Sort symbols into bins\n  const [main, internals, externals] = Array.from(sortSymbols(symbols));\n\n  // Extract storage/type signatures of symbols\n  const signatures = extractSignatures(main, internals, externals);\n\n  if (debug) {\n    tock(\"GLSL AST\");\n  }\n\n  return { ast, code, signatures };\n};\n\n// Extract functions and external symbols from AST\nvar mapSymbols = function (node, collect) {\n  switch (node.type) {\n    case \"decl\":\n      collect(decl.node(node));\n      return false;\n  }\n  return true;\n};\n\nconst collect = (out) =>\n  function (value) {\n    if (value != null) {\n      Array.from(value).map((obj) => out.push(obj));\n    }\n  };\n\n// Identify internals, externals and main function\nvar sortSymbols = function (symbols) {\n  let main = null;\n  const internals = [];\n  let externals = [];\n  const maybe = {};\n  let found = false;\n\n  for (var s of Array.from(symbols)) {\n    if (!s.body) {\n      // Unmarked globals are definitely internal\n      if (s.storage === \"global\") {\n        internals.push(s);\n\n        // Possible external\n      } else {\n        externals.push(s);\n        maybe[s.ident] = true;\n      }\n    } else {\n      // Remove earlier forward declaration\n      if (maybe[s.ident]) {\n        externals = Array.from(externals).filter((e) => e.ident !== s.ident);\n        delete maybe[s.ident];\n      }\n\n      // Internal function\n      internals.push(s);\n\n      // Last function is main\n      // unless there is a function called 'main'\n      if (s.ident === \"main\") {\n        main = s;\n        found = true;\n      } else if (!found) {\n        main = s;\n      }\n    }\n  }\n\n  return [main, internals, externals];\n};\n\n// Generate type signatures and appropriate ins/outs\nvar extractSignatures = function (main, internals, externals) {\n  let symbol;\n  const sigs = {\n    uniform: [],\n    attribute: [],\n    varying: [],\n    external: [],\n    internal: [],\n    global: [],\n    main: null,\n  };\n\n  const defn = (symbol) =>\n    decl.type(\n      symbol.ident,\n      symbol.type,\n      symbol.quant,\n      symbol.count,\n      symbol.inout,\n      symbol.storage\n    );\n\n  const func = function (symbol, inout) {\n    let d;\n    const signature = Array.from(symbol.args).map((arg) => defn(arg));\n\n    // Split inouts into in and out\n    for (d of Array.from(signature)) {\n      if (d.inout === decl.inout) {\n        const a = d;\n        const b = d.copy();\n\n        a.inout = decl.in;\n        b.inout = decl.out;\n        b.meta = { shadow: a.name };\n        b.name += SHADOW_ARG;\n        a.meta = { shadowed: b.name };\n\n        signature.push(b);\n      }\n    }\n\n    // Add output for return type\n    if (symbol.type !== \"void\") {\n      signature.unshift(decl.type(RETURN_ARG, symbol.type, false, \"\", \"out\"));\n    }\n\n    // Make type string\n    const inTypes = (() => {\n      const result = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.in) {\n          result.push(d.type);\n        }\n      }\n      return result;\n    })().join(\",\");\n    const outTypes = (() => {\n      const result1 = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.out) {\n          result1.push(d.type);\n        }\n      }\n      return result1;\n    })().join(\",\");\n    const type = `(${inTypes})(${outTypes})`;\n\n    return {\n      name: symbol.ident,\n      type,\n      signature,\n      inout,\n      spec: symbol.type,\n    };\n  };\n\n  // Main\n  sigs.main = func(main, decl.out);\n\n  // Internals (for name replacement only)\n  for (symbol of Array.from(internals)) {\n    sigs.internal.push({\n      name: symbol.ident,\n    });\n  }\n\n  // Externals\n  for (symbol of Array.from(externals)) {\n    switch (symbol.decl) {\n      // Uniforms/attributes/varyings\n      case \"external\":\n        var def = defn(symbol);\n        sigs[symbol.storage].push(def);\n        break;\n\n      // Callbacks\n      case \"function\":\n        def = func(symbol, decl.in);\n        sigs.external.push(def);\n        break;\n    }\n  }\n\n  return sigs;\n};\n\n// Walk AST, apply map and collect values\ndebug = false;\n\nexport var walk = function (map, collect, node, indent) {\n  debug &&\n    console.log(\n      indent,\n      node.type,\n      node.token != null ? node.token.data : undefined,\n      node.token != null ? node.token.type : undefined\n    );\n\n  const recurse = map(node, collect);\n\n  if (recurse) {\n    for (let i = 0; i < node.children.length; i++) {\n      const child = node.children[i];\n      walk(map, collect, child, indent + \"  \", debug);\n    }\n  }\n\n  return null;\n};\n\n// #####\n\nvar tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport * as $ from \"./constants\";\n\n/*\n  GLSL code generator for compiler and linker stubs\n*/\n\n// Check if shadow outlet\nexport function unshadow(name) {\n  const real = name.replace($.SHADOW_ARG, \"\");\n  if (real !== name) {\n    return real;\n  } else {\n    return null;\n  }\n}\n\n// Line joiners\nexport function lines(lines) {\n  return lines.join(\"\\n\");\n}\nexport function list(lines) {\n  return lines.join(\", \");\n}\nexport function statements(lines) {\n  return lines.join(\";\\n\");\n}\n\n// Function body\nexport function body(entry) {\n  return {\n    entry,\n    type: \"void\",\n    params: [],\n    signature: [],\n    return: \"\",\n    vars: {},\n    calls: [],\n    post: [],\n    chain: {},\n  };\n}\n\n// Symbol define\nexport function define(a, b) {\n  return `#define ${a} ${b}`;\n}\n\n// Function define\nexport function fn(type, entry, params, vars, calls) {\n  return `${type} ${entry}(${params}) {\\n${vars}${calls}}`;\n}\n\n// Function invocation\nexport function invoke(ret, entry, args) {\n  ret = ret ? `${ret} = ` : \"\";\n  args = list(args);\n  return `  ${ret}${entry}(${args})`;\n}\n\n// Compare two signatures\nexport function same(a, b) {\n  for (let i = 0; i < a.length; i++) {\n    const A = a[i];\n    const B = b[i];\n    if (!B) {\n      return false;\n    }\n    if (A.type !== B.type) {\n      return false;\n    }\n    if ((A.name === $.RETURN_ARG) !== (B.name === $.RETURN_ARG)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// Generate call signature for module invocation\nexport function call(lookup, dangling, entry, signature, body) {\n  const args = [];\n  let ret = \"\";\n  const rets = 1;\n\n  for (let arg of Array.from(signature)) {\n    var id, shadow;\n    const { name } = arg;\n\n    let copy = (id = lookup(name));\n    let other = null;\n    let meta = null;\n    let omit = false;\n    const { inout } = arg;\n\n    const isReturn = name === $.RETURN_ARG;\n\n    // Shadowed inout: input side\n    if ((shadow = arg.meta != null ? arg.meta.shadowed : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        body.vars[other] = \"  \" + arg.param(other);\n        body.calls.push(`  ${other} = ${id}`);\n\n        if (!dangling(shadow)) {\n          arg = arg.split();\n        } else {\n          meta = { shadowed: other };\n        }\n      }\n    }\n\n    // Shadowed inout: output side\n    if ((shadow = arg.meta != null ? arg.meta.shadow : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        if (!dangling(shadow)) {\n          arg = arg.split();\n          omit = true;\n        } else {\n          meta = { shadow: other };\n          continue;\n        }\n      }\n    }\n\n    if (isReturn) {\n      // Capture return value\n      ret = id;\n    } else if (!omit) {\n      // Pass all non return, non shadow args in\n      args.push(other != null ? other : id);\n    }\n\n    // Export argument if unconnected\n    if (dangling(name)) {\n      let op = \"push\";\n      if (isReturn) {\n        if (body.return === \"\") {\n          op = \"unshift\";\n          // Preserve 'return' arg name\n          copy = name;\n          body.type = arg.spec;\n          body.return = `  return ${id}`;\n          body.vars[id] = \"  \" + arg.param(id);\n        } else {\n          body.vars[id] = \"  \" + arg.param(id);\n          body.params.push(arg.param(id, true));\n        }\n      } else {\n        body.params.push(arg.param(id, true));\n      }\n\n      // Copy argument into new signature\n      arg = arg.copy(copy, meta);\n      body.signature[op](arg);\n    } else {\n      body.vars[id] = \"  \" + arg.param(id);\n    }\n  }\n\n  return body.calls.push(invoke(ret, entry, args));\n}\n\n// Assemble main() function from body and call reference\nexport function build(body, calls) {\n  const { entry } = body;\n  let code = null;\n\n  // Check if we're only calling one snippet with identical signature\n  // and not building void main();\n  if (calls && calls.length === 1 && entry !== \"main\") {\n    const a = body;\n    const b = calls[0].module;\n\n    if (same(body.signature, b.main.signature)) {\n      code = define(entry, b.entry);\n    }\n  }\n\n  // Otherwise build function body\n  if (code == null) {\n    let vars = (() => {\n      const result = [];\n      for (let v in body.vars) {\n        const decl = body.vars[v];\n        result.push(decl);\n      }\n      return result;\n    })();\n    ({ calls } = body);\n    const { post } = body;\n    let { params } = body;\n    const { type } = body;\n    const ret = body.return;\n\n    calls = calls.concat(post);\n    if (ret !== \"\") {\n      calls.push(ret);\n    }\n    calls.push(\"\");\n\n    if (vars.length) {\n      vars.push(\"\");\n      vars = statements(vars) + \"\\n\";\n    } else {\n      vars = \"\";\n    }\n\n    calls = statements(calls);\n    params = list(params);\n\n    code = fn(type, entry, params, vars, calls);\n  }\n\n  return {\n    signature: body.signature,\n    code,\n    name: entry,\n  };\n}\n\n// Build links to other callbacks\nexport function links(links) {\n  const out = {\n    defs: [],\n    bodies: [],\n  };\n\n  for (let l of Array.from(links)) {\n    link(l, out);\n  }\n\n  out.defs = lines(out.defs);\n  out.bodies = statements(out.bodies);\n\n  if (out.defs === \"\") {\n    delete out.defs;\n  }\n  if (out.bodies === \"\") {\n    delete out.bodies;\n  }\n\n  return out;\n}\n\n// Link a module's entry point as a callback\nexport const link = (link, out) => {\n  let arg, list;\n  const { module, name, external } = link;\n  const { main } = module;\n  const { entry } = module;\n\n  // If signatures match, #define alias for the symbol\n  if (same(main.signature, external.signature)) {\n    return out.defs.push(define(name, entry));\n  }\n\n  // Signatures differ, build one-line callback to match defined prototype\n\n  // Map names to names\n  const ins = [];\n  const outs = [];\n  let map = {};\n  const returnVar = [module.namespace, $.RETURN_ARG].join(\"\");\n\n  for (arg of Array.from(external.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    list.push(arg);\n  }\n\n  for (arg of Array.from(main.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    const other = list.shift();\n    let _name = other.name;\n\n    // Avoid 'return' keyword\n    if (_name === $.RETURN_ARG) {\n      _name = returnVar;\n    }\n\n    map[arg.name] = _name;\n  }\n\n  // Build function prototype to invoke the other side\n  let _lookup = (name) => map[name];\n  const _dangling = () => true;\n\n  const inner = body();\n  call(_lookup, _dangling, entry, main.signature, inner);\n  inner.entry = entry;\n\n  // Avoid 'return' keyword\n  map = { return: returnVar };\n  _lookup = (name) => (map[name] != null ? map[name] : name);\n\n  // Build wrapper function for the calling side\n  const outer = body();\n  const wrapper = call(_lookup, _dangling, entry, external.signature, outer);\n  outer.calls = inner.calls;\n  outer.entry = name;\n\n  out.bodies.push(build(inner).code.split(\" {\")[0]);\n  return out.bodies.push(build(outer).code);\n};\n\n// Remove all function prototypes to avoid redefinition errors\nexport function defuse(code) {\n  // Don't try this at home kids\n  const re =\n    /([A-Za-z0-9_]+\\s+)?[A-Za-z0-9_]+\\s+[A-Za-z0-9_]+\\s*\\([^)]*\\)\\s*;\\s*/gm;\n  const strip = (code) => code.replace(re, (m) => \"\");\n\n  // Split into scopes by braces\n  const blocks = code.split(/(?=[{}])/g);\n  let level = 0;\n  for (let i = 0; i < blocks.length; i++) {\n    const b = blocks[i];\n    switch (b[0]) {\n      case \"{\":\n        level++;\n        break;\n      case \"}\":\n        level--;\n        break;\n    }\n\n    // Only mess with top level scope\n    if (level === 0) {\n      // Preprocessor lines will fuck us up. Split on them.\n      const hash = b.split(/^[ \\t]*#/m);\n      for (let j = 0; j < hash.length; j++) {\n        let line = hash[j];\n        if (j > 0) {\n          // Trim off preprocessor directive\n          line = line.split(/\\n/);\n          const head = line.shift();\n          const rest = line.join(\"\\n\");\n\n          // Process rest\n          hash[j] = [head, strip(rest)].join(\"\\n\");\n        } else {\n          // Process entire line\n          hash[j] = strip(line);\n        }\n      }\n\n      // Reassemble\n      blocks[i] = hash.join(\"#\");\n    }\n  }\n\n  return (code = blocks.join(\"\"));\n}\n\n// Remove duplicate uniforms / varyings / attributes\nexport function dedupe(code) {\n  const map = {};\n  const re =\n    /((attribute|uniform|varying)\\s+)[A-Za-z0-9_]+\\s+([A-Za-z0-9_]+)\\s*(\\[[^\\]]*\\]\\s*)?;\\s*/gm;\n  return code.replace(re, function (m, qual, type, name, struct) {\n    if (map[name]) {\n      return \"\";\n    }\n    map[name] = true;\n    return m;\n  });\n}\n\n// Move definitions to top so they compile properly\nexport function hoist(code) {\n  const filter = function (lines, re) {\n    const defs = [];\n    const out = [];\n    for (let line of Array.from(lines)) {\n      const list = line.match(re) ? defs : out;\n      list.push(line);\n    }\n\n    return defs.concat(out);\n  };\n\n  let lines = code.split(\"\\n\");\n\n  // Hoist symbol defines to the top so (re)definitions use the right alias\n  lines = filter(lines, /^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/);\n\n  // Hoist extensions\n  lines = filter(lines, /^#extension/);\n\n  return lines.join(\"\\n\");\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\nimport * as Factory from \"./factory\";\nimport * as GLSL from \"./glsl\";\nimport * as Graph from \"./graph\";\nimport * as Linker from \"./linker\";\nimport * as Visualize from \"./visualize\";\n\nconst { library, cache } = Factory;\nexport const { visualize, inspect } = Visualize;\nconst { Snippet } = Linker;\n\nconst merge = function (a, b = {}) {\n  const out = {};\n  for (let key in a) {\n    out[key] = b[key] || a[key];\n  }\n  return out;\n};\n\nexport class ShaderGraph {\n  constructor(snippets, config) {\n    if (!(this instanceof ShaderGraph)) {\n      return new ShaderGraph(snippets, config);\n    }\n\n    const defaults = {\n      globalUniforms: false,\n      globalVaryings: true,\n      globalAttributes: true,\n      globals: [],\n      autoInspect: false,\n    };\n\n    this.config = merge(defaults, config);\n    this.fetch = cache(library(GLSL, snippets, Snippet.load));\n  }\n\n  shader(config) {\n    if (config == null) {\n      config = {};\n    }\n    const _config = merge(this.config, config);\n    return new Factory.Factory(GLSL, this.fetch, _config);\n  }\n\n  material(config) {\n    return new Factory.Material(this.shader(config), this.shader(config));\n  }\n\n  inspect(shader) {\n    return ShaderGraph.inspect(shader);\n  }\n  visualize(shader) {\n    return ShaderGraph.visualize(shader);\n  }\n\n  // Static visualization method\n  static inspect(shader) {\n    return inspect(shader);\n  }\n  static visualize(shader) {\n    return visualize(shader);\n  }\n}\n\n// Expose class hierarchy\nShaderGraph.Block = Block;\nShaderGraph.Factory = Factory;\nShaderGraph.GLSL = GLSL;\nShaderGraph.Graph = Graph;\nShaderGraph.Linker = Linker;\nShaderGraph.Visualize = Visualize;\n\nexport function load(snippets, config = {}) {\n  return new ShaderGraph(snippets, config);\n}\n"],"sourceRoot":""}